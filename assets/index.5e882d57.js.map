{"version":3,"file":"index.5e882d57.js","sources":["../../src/app/Analytics.ts","../../src/app/components/Ad.tsx","../../src/app/components/Btn.tsx","../../src/app/Utils.ts","../../src/app/components/BtnInput.tsx","../../src/app/hooks/useActiveTimout.ts","../../src/app/hooks/useCanvas.ts","../../src/app/hooks/useFocus.ts","../../src/app/hooks/useMediaQuery.ts","../../src/app/hooks/useModel.ts","../../src/app/components/BtnMenu.tsx","../../src/app/components/Octicon.tsx","../../src/app/components/ErrorPanel.tsx","../../src/app/components/forms/Checkbox.tsx","../../src/app/components/forms/Input.tsx","../../src/app/components/forms/SearchList.tsx","../../src/app/services/Changelogs.ts","../../src/app/services/DataFetcher.ts","../../src/app/services/Schemas.ts","../../src/app/services/Sharing.ts","../../vite/preload-helper","../../src/app/Store.ts","../../src/app/contexts/Locale.tsx","../../src/app/contexts/Project.tsx","../../src/app/contexts/Theme.tsx","../../src/app/contexts/Title.tsx","../../src/app/contexts/Version.tsx","../../src/app/previews/BiomeSource.ts","../../src/app/previews/Decorator.ts","../../src/app/previews/noise/NoiseChunkGenerator.ts","../../src/app/previews/NoiseSettings.ts","../../src/app/components/previews/BiomeSourcePreview.tsx","../../src/app/components/previews/DecoratorPreview.tsx","../../src/app/components/previews/DensityFunctionPreview.tsx","../../src/app/components/previews/NoisePreview.tsx","../../src/app/previews/NormalNoise.ts","../../src/app/components/previews/NoiseSettingsPreview.tsx","../../src/app/components/generator/PreviewPanel.tsx","../../src/app/schema/transformOutput.ts","../../src/app/components/generator/SourcePanel.tsx","../../src/app/schema/ModelWrapper.ts","../../src/app/schema/renderHtml.tsx","../../src/app/components/generator/Tree.tsx","../../src/app/components/Giscus.tsx","../../src/app/components/Header.tsx","../../src/app/components/Icons.tsx","../../src/app/components/sounds/SoundConfig.tsx","../../src/app/components/ToolCard.tsx","../../src/app/components/TreeView.tsx","../../src/app/components/versions/ChangelogEntry.tsx","../../src/app/components/versions/ChangelogTag.tsx","../../src/app/components/versions/ChangelogList.tsx","../../src/app/components/versions/VersionDetail.tsx","../../src/app/components/versions/VersionEntry.tsx","../../src/app/components/versions/VersionList.tsx","../../src/app/components/versions/VersionMetaData.tsx","../../src/app/pages/Category.tsx","../../src/app/pages/Changelog.tsx","../../src/app/pages/Generator.tsx","../../src/app/pages/Home.tsx","../../src/app/pages/Project.tsx","../../src/app/pages/Sounds.tsx","../../src/app/pages/Versions.tsx","../../src/app/App.tsx","../../src/app/Main.tsx"],"sourcesContent":["export namespace Analytics {\n\tconst ID_SITE = 'Site'\n\tconst ID_GENERATOR = 'Generator'\n\n\tconst DIM_THEME = 1\n\tconst DIM_VERSION = 3\n\tconst DIM_LANGUAGE = 4\n\tconst DIM_PREVIEW = 5\n\tconst DIM_GENERATOR = 6\n\tconst DIM_PREFERS_COLOR_SCHEME = 7\n\n\tfunction event(category: string, action: string, label?: string) {\n\t\tga('send', 'event', category, action, label)\n\t}\n\n\tfunction dimension(index: number, value: string) {\n\t\tga('set', `dimension${index}`, value)\n\t}\n\n\texport function pageview(page: string) {\n\t\tga('set', 'page', page)\n\t\tga('send', 'pageview')\n\t}\n\n\texport function setLanguage(language: string) {\n\t\tdimension(DIM_LANGUAGE, language)\n\t\tevent(ID_SITE, 'set-language', language)\n\t}\n\n\texport function setTheme(theme: string) {\n\t\tdimension(DIM_THEME, theme)\n\t\tevent(ID_SITE, 'set-theme', theme)\n\t}\n\n\texport function setVersion(version: string) {\n\t\tdimension(DIM_VERSION, version)\n\t\tevent(ID_GENERATOR, 'set-version', version)\n\t}\n\n\texport function setPreview(preview: string) {\n\t\tdimension(DIM_PREVIEW, preview)\n\t\tevent(ID_GENERATOR, 'set-preview', preview)\n\t}\n\n\texport function setGenerator(generator: string) {\n\t\tdimension(DIM_GENERATOR, generator)\n\t}\n\n\texport function setPrefersColorScheme(colorScheme: string) {\n\t\tdimension(DIM_PREFERS_COLOR_SCHEME, colorScheme)\n\t}\n\n\texport function generatorEvent(action: string, label?: string) {\n\t\tevent(ID_GENERATOR, action, label)\n\t}\n}\n","import { useEffect } from 'preact/hooks'\n\ndeclare const ethicalads: any\n\ntype AdProps = {\n\ttype: 'text' | 'image',\n\tid: string,\n}\nexport function Ad({ type, id }: AdProps) {\n\tuseEffect(() => {\n\t\tdocument.getElementById('ad-placeholder')?.remove()\n\t\tif ('ethicalads' in window) {\n\t\t\tethicalads.load()\n\t\t}\n\t}, [])\n\n\treturn <div data-ea-publisher=\"misode-github-io\" data-ea-type={type} class=\"ad dark flat\" id={id}></div>\n}\n","import { Octicon } from '.'\n\ntype BtnProps = {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\tactive?: boolean,\n\ttooltip?: string,\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\n\tshowTooltip?: boolean,\n\tclass?: string,\n\tonClick?: (event: MouseEvent) => unknown,\n}\nexport function Btn({ icon, label, active, class: clazz, tooltip, tooltipLoc, onClick }: BtnProps) {\n\treturn <div class={`btn${active ? ' active' : ''}${clazz ? ` ${clazz}` : ''}${tooltip ? ` tooltipped tip-${tooltipLoc ?? 'sw'}` : ''}${active ? ' tip-shown' : ''}`} onClick={onClick} aria-label={tooltip}>\n\t\t{icon && Octicon[icon]}\n\t\t{label && <span>{label}</span>}\n\t</div>\n}\n","import type { DataModel } from '@mcschema/core'\nimport { Path } from '@mcschema/core'\nimport { getCurrentUrl, route } from 'preact-router'\nimport rfdc from 'rfdc'\nimport config from '../config.json'\n\nexport function isPromise(obj: any): obj is Promise<any> {\n\treturn typeof (obj as any)?.then === 'function' \n}\n\nexport function isObject(obj: any) {\n\treturn typeof obj === 'object' && obj !== null\n}\n\nconst dec2hex = (dec: number) => ('0' + dec.toString(16)).substr(-2)\n\nexport function hexId(length = 12) {\n\tvar arr = new Uint8Array(length / 2)\n\twindow.crypto.getRandomValues(arr)\n\treturn Array.from(arr, dec2hex).join('')\n}\n\nexport function randomSeed() {\n\treturn BigInt(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER))\n}\n\nexport function newSeed(model: DataModel) {\n\tconst seed = Math.floor(Math.random() * (4294967296)) - 2147483648\n\tconst dimensions = model.get(new Path(['dimensions']))\n\tmodel.set(new Path(['seed']), seed, true)\n\tif (isObject(dimensions)) {\n\t\tObject.keys(dimensions).forEach(id => {\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'seed']), seed, true)\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'biome_source', 'seed']), seed, true)\n\t\t})\n\t}\n\tmodel.set(new Path(['placement', 'salt']), Math.abs(seed), true)\n\tmodel.set(new Path(['generator', 'seed']), seed, true)\n\tmodel.set(new Path(['generator', 'biome_source', 'seed']), seed)\n}\n\nexport function htmlEncode(str: string) {\n\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\\//g, '&#x2F;')\n}\n\nexport function hashString(s: string) {\n\tlet h = 0\n\tfor(let i = 0; i < s.length; i++)\n\t\th = Math.imul(31, h) + s.charCodeAt(i) | 0\n\treturn h\n}\n\nexport function cleanUrl(url: string) {\n\treturn `/${url}/`.replaceAll('//', '/')\n}\n\nexport function getPath(url: string) {\n\tconst searchIndex = url.indexOf('?')\n\tif (searchIndex >= 0) {\n\t\turl = url.slice(0, searchIndex)\n\t}\n\treturn cleanUrl(url)\n}\n\nexport function getGenerator(url: string) {\n\tconst trimmedUrl = getPath(url).replace(/^\\//, '').replace(/\\/$/, '')\n\treturn config.generators.find(g => g.url === trimmedUrl)\n}\n\nexport function getSearchParams(url: string) {\n\tconst searchIndex = url.indexOf('?')\n\tif (searchIndex >= 0) {\n\t\turl = url.slice(searchIndex + 1)\n\t\treturn new Map(url.split('&').map<[string, string]>(param => {\n\t\t\tconst index = param.indexOf('=')\n\t\t\tif (index === -1) return [param, 'true']\n\t\t\treturn [decodeURIComponent(param.slice(0, index)), decodeURIComponent(param.slice(index + 1))]\n\t\t}))\n\t}\n\treturn new Map<string, string>()\n}\n\nexport function setSeachParams(modifications: Record<string, string | undefined>, newPath?: string) {\n\tconst url = getCurrentUrl()\n\tconst searchParams = getSearchParams(url)\n\tObject.entries(modifications).forEach(([key, value]) => {\n\t\tif (value === undefined) searchParams.delete(key)\n\t\telse searchParams.set(key, value)\n\t})\n\tconst search = Array.from(searchParams).map(([key, value]) =>\n\t\t`${encodeURIComponent(key)}=${encodeURIComponent(value).replaceAll('%2F', '/')}`)\n\troute(`${newPath ? cleanUrl(newPath) : getPath(url)}${search.length === 0 ? '' : `?${search.join('&')}`}`, true)\n}\n\nexport function stringToColor(str: string): [number, number, number] {\n\tconst h = Math.abs(hashString(str))\n\treturn [h % 256, (h >> 8) % 256, (h >> 16) % 256]\n}\n\nexport function square(a: number) {\n\treturn a * a\n}\n\nexport function clamp(a: number, b: number, c: number) {\n\treturn Math.max(a, Math.min(b, c))\n}\n\nexport function clampedLerp(a: number, b: number, c: number): number {\n\tif (c < 0) {\n\t\treturn a\n\t} else if (c > 1) {\n\t\treturn b\n\t} else {\n\t\treturn lerp(c, a, b)\n\t}\n}\n\nexport function lerp(a: number, b: number, c: number): number {\n\treturn b + a * (c - b)\n}\n\nexport function lerp2(a: number, b: number, c: number, d: number, e: number, f: number): number {\n\treturn lerp(b, lerp(a, c, d), lerp(a, e, f))\n}\n\nexport function lerp3(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number, j: number, k: number) {\n\treturn lerp(c, lerp2(a, b, d, e, f, g), lerp2(a, b, h, i, j, k))\n}\n\nexport function smoothstep(x: number): number {\n\treturn x * x * x * (x * (x * 6 - 15) + 10)\n}\n\nexport function message(e: unknown): string {\n\tif (e instanceof Error) return e.message\n\treturn `${e}`\n}\n\nexport const deepClone = rfdc()\n\n/**\n * MIT License\n * \n * Copyright (c) 2017 Evgeny Poberezkin\n * \n * https://github.com/epoberezkin/fast-deep-equal/blob/master/LICENSE\n */\nexport function deepEqual(a: any, b: any) {\n\tif (a === b) return true\n\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\n\t\tif (a.constructor !== b.constructor) return false\n\t\tlet length, i\n\t\tif (Array.isArray(a)) {\n\t\t\tlength = a.length\n\t\t\tif (length != b.length) return false\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\tif (!deepEqual(a[i], b[i])) return false\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t\tif (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf()\n\t\tif (a.toString !== Object.prototype.toString) return a.toString() === b.toString()\n\t\tconst keys = Object.keys(a)\n\t\tlength = keys.length\n\t\tif (length !== Object.keys(b).length) return false\n\t\tfor (i = length; i-- !== 0;)\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\t\tfor (i = length; i-- !== 0;) {\n\t\t\tconst key = keys[i]\n\t\t\tif (!deepEqual(a[key], b[key])) return false\n\t\t}\n\t\treturn true\n\t}\n\treturn a !== a && b !== b\n}\n\nexport class BiMap<A, B> {\n\tprivate readonly forward: Map<A, B>\n\tprivate readonly backward: Map<B, A>\n\n\tconstructor() {\n\t\tthis.forward = new Map()\n\t\tthis.backward = new Map()\n\t}\n\n\tpublic set(a: A, b: B) {\n\t\tthis.forward.set(a, b)\n\t\tthis.backward.set(b, a)\n\t}\n\n\tpublic getA(key: B) {\n\t\treturn this.backward.get(key)\n\t}\n\n\tpublic getB(key: A) {\n\t\treturn this.forward.get(key)\n\t}\n\n\tpublic getOrPut(key: A, defaultValue: B) {\n\t\tconst b = this.forward.get(key)\n\t\tif (b === undefined) {\n\t\t\tthis.set(key, defaultValue)\n\t\t\treturn defaultValue\n\t\t}\n\t\treturn b\n\t}\n}\n","import { useEffect, useRef } from 'preact/hooks'\nimport { Octicon } from '.'\nimport { hexId } from '../Utils'\n\ntype BtnInputProps = {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\tlarge?: boolean,\n\tlarger?: boolean,\n\tdoSelect?: number,\n\tvalue?: string,\n\tplaceholder?: string,\n\tdataList?: string[],\n\tonChange?: (value: string) => unknown,\n}\nexport function BtnInput({ icon, label, large, larger, doSelect, value, placeholder, dataList, onChange }: BtnInputProps) {\n\tconst onInput = onChange === undefined ? () => {} : (e: any) => {\n\t\tconst value = (e.target as HTMLInputElement).value\n\t\tonChange?.(value)\n\t}\n\n\tconst ref = useRef<HTMLInputElement>(null)\n\tuseEffect(() => {\n\t\tif (doSelect && ref.current) {\n\t\t\tref.current.select()\n\t\t}\n\t}, [doSelect])\n\n\tconst dataListId = dataList && hexId()\n\n\treturn <div class={`btn btn-input ${large ? 'large-input' : ''} ${larger ? 'larger-input' : ''}`} onClick={e => e.stopPropagation()}>\n\t\t{icon && Octicon[icon]}\n\t\t{label && <span>{label}</span>}\n\t\t<input ref={ref} type=\"text\" value={value} onChange={onInput} placeholder={placeholder} list={dataListId} />\n\t\t{dataList && <datalist id={dataListId}>\n\t\t\t{dataList.map(e => <option value={e} />)}\n\t\t</datalist>}\n\t</div>\n}\n","import { useRef, useState } from 'preact/hooks'\n\ninterface ActiveTimeoutOptions {\n\tcooldown?: number,\n\tinvert?: boolean,\n\tinitial?: boolean,\n}\nexport function useActiveTimeout({ cooldown, invert, initial }: ActiveTimeoutOptions = {}): [boolean | undefined, () => unknown] {\n\tconst [active, setActive] = useState(initial)\n\tconst timeout = useRef<number | undefined>(undefined)\n\n\tconst trigger = () => {\n\t\tsetActive(invert ? false : true)\n\t\tif (timeout.current !== undefined) clearTimeout(timeout.current)\n\t\ttimeout.current = setTimeout(() => {\n\t\t\tsetActive(invert ? true : false)\n\t\t}, cooldown ?? 2000) as any\n\t}\n\n\treturn [active, trigger]\n}\n","import type { Inputs } from 'preact/hooks'\nimport { useEffect, useRef } from 'preact/hooks'\n\ntype Vec2 = [number, number]\n\nexport function useCanvas({ size, draw, onDrag, onHover, onLeave }: {\n\tsize: () => Vec2,\n\tdraw: (img: ImageData) => Promise<unknown>,\n\tonDrag?: (dx: number, dy: number) => Promise<unknown>,\n\tonHover?: (x: number, y: number) => unknown,\n\tonLeave?: () => unknown,\n}, inputs?: Inputs) {\n\tconst canvas = useRef<HTMLCanvasElement>(null)\n\n\tconst dragStart = useRef<Vec2 | undefined>()\n\tconst dragRequest = useRef<number>()\n\tconst dragPending = useRef<Vec2>([0, 0])\n\tconst dragBusy = useRef(false)\n\n\tuseEffect(() => {\n\t\tconst onMouseDown = (e: MouseEvent) => {\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\n\t\t}\n\t\tconst onMouseMove = (e: MouseEvent) => {\n\t\t\tif (dragStart.current === undefined) {\n\t\t\t\tconst x = e.offsetX  / canvas.current.clientWidth\n\t\t\t\tconst y = e.offsetY  / canvas.current.clientHeight\n\t\t\t\tonHover?.(x, y)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!onDrag) return\n\t\t\tconst dx = e.offsetX - dragStart.current[0]\n\t\t\tconst dy = e.offsetY - dragStart.current[1]\n\t\t\tif (!(dx === 0 && dy === 0)) {\n\t\t\t\tdragPending.current = [dragPending.current[0] + dx, dragPending.current[1] + dy]\n\t\t\t\tif (!dragBusy.current) {\n\t\t\t\t\tcancelAnimationFrame(dragRequest.current)\n\t\t\t\t\tdragRequest.current = requestAnimationFrame(async () => {\n\t\t\t\t\t\tdragBusy.current = true\n\t\t\t\t\t\tconst dx = dragPending.current[0] / canvas.current.clientWidth\n\t\t\t\t\t\tconst dy = dragPending.current[1] / canvas.current.clientHeight\n\t\t\t\t\t\tdragPending.current = [0, 0]\n\t\t\t\t\t\tawait onDrag?.(dx, dy)\n\t\t\t\t\t\tdragBusy.current = false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\n\t\t}\n\t\tconst onMouseUp = () => {\n\t\t\tdragStart.current = undefined\n\t\t}\n\t\tconst onMouseLeave = () => {\n\t\t\tonLeave?.()\n\t\t}\n\n\t\tcanvas.current.addEventListener('mousedown', onMouseDown)\n\t\tcanvas.current.addEventListener('mousemove', onMouseMove)\n\t\tcanvas.current.addEventListener('mouseleave', onMouseLeave)\n\t\tdocument.body.addEventListener('mouseup', onMouseUp)\n\n\t\treturn () => {\n\t\t\tcanvas.current?.removeEventListener('mousedown', onMouseDown)\n\t\t\tcanvas.current?.removeEventListener('mousemove', onMouseMove)\n\t\t\tcanvas.current?.removeEventListener('mouseleave', onMouseLeave)\n\t\t\tdocument.body.removeEventListener('mouseup', onMouseUp)\n\t\t}\n\t}, [...inputs ?? [], canvas.current])\n\n\tconst redraw = useRef<() => Promise<unknown>>()\n\tconst redrawCount = useRef(0)\n\tredraw.current = async () => {\n\t\tconst ctx = canvas.current.getContext('2d')!\n\t\tconst s = size()\n\t\tcanvas.current.width = s[0]\n\t\tcanvas.current.height = s[1]\n\t\tconst img = ctx.getImageData(0, 0, s[0], s[1])\n\t\tconst ownCount = redrawCount.current += 1\n\t\ttry {\n\t\t\tawait draw(img)\n\t\t} catch (e) {\n\t\t\tthrow e\n\t\t}\n\t\tif (ownCount === redrawCount.current) {\n\t\t\tctx.putImageData(img, 0, 0)\n\t\t}\n\t}\n\n\treturn {\n\t\tcanvas,\n\t\tredraw: redraw.current,\n\t}\n}\n","import { useEffect, useState } from 'preact/hooks'\n\nexport function useFocus(): [boolean, () => unknown] {\n\tconst [active, setActive] = useState(false)\n\n\tconst hider = () => {\n\t\tsetActive(false)\n\t}\n\n\tuseEffect(() => {\n\t\tif (active) {\n\t\t\tdocument.body.addEventListener('click', hider)\n\t\t\tdocument.body.addEventListener('contextmenu', hider)\n\t\t}\n\t\treturn () => {\n\t\t\tdocument.body.removeEventListener('click', hider)\n\t\t\tdocument.body.removeEventListener('contextmenu', hider)\n\t\t}\n\t}, [active])\n\n\treturn [active, () => setActive(true)]\n}\n","import { useEffect, useState } from 'preact/hooks'\n\nexport function useMediaQuery(query: string): boolean {\n\tconst [prefers, setPrefers] = useState(matchMedia(query).matches)\n\n\tconst onChange = (e: MediaQueryListEvent) => {\n\t\tsetPrefers(e.matches)\n\t}\n\n\tuseEffect(() => {\n\t\tconst mediaQuery = matchMedia(query)\n\t\tmediaQuery.addEventListener('change', onChange)\n\t\treturn () => {\n\t\t\tmediaQuery.removeEventListener('change', onChange)\n\t\t}\n\t}, [query])\n\n\treturn prefers\n}\n","import type { DataModel } from '@mcschema/core'\nimport type { Inputs } from 'preact/hooks'\nimport { useEffect } from 'preact/hooks'\n\nexport function useModel(model: DataModel | undefined | null, invalidated: (model: DataModel) => unknown, inputs?: Inputs) {\n\tconst listener = {\n\t\tinvalidated() {\n\t\t\tif (model) {\n\t\t\t\tinvalidated(model)\n\t\t\t}\n\t\t},\n\t}\n\n\tuseEffect(() => {\n\t\tmodel?.addListener(listener)\n\t\treturn () => {\n\t\t\tmodel?.removeListener(listener)\n\t\t}\n\t}, [model, ...inputs ?? []])\n}\n","import type { ComponentChildren } from 'preact'\nimport type { Octicon } from '.'\nimport { Btn } from '.'\nimport { useFocus } from '../hooks'\n\ninterface BtnMenuProps extends JSX.HTMLAttributes<HTMLDivElement> {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\trelative?: boolean,\n\ttooltip?: string,\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\n\tchildren: ComponentChildren,\n}\nexport function BtnMenu(props: BtnMenuProps) {\n\tconst { icon, label, relative, tooltip, tooltipLoc, children } = props\n\tconst [active, setActive] = useFocus()\n\n\treturn <div class={`btn-menu${relative === false ? ' no-relative' : ''}`} {...props}>\n\t\t<Btn {...{icon, label, tooltip, tooltipLoc}} onClick={setActive} />\n\t\t{active && <div class=\"btn-group\">\n\t\t\t{children}\n\t\t</div>}\n\t</div>\n}\n","export const Octicon = {\n\talert: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path></svg>,\n\tarchive: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5a.25.25 0 00-.25.25v1.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-1.5a.25.25 0 00-.25-.25H1.75zM0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v1.5A1.75 1.75 0 0114.25 6H1.75A1.75 1.75 0 010 4.25v-1.5zM1.75 7a.75.75 0 01.75.75v5.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25v-5.5a.75.75 0 111.5 0v5.5A1.75 1.75 0 0113.25 15H2.75A1.75 1.75 0 011 13.25v-5.5A.75.75 0 011.75 7zm4.5 1a.75.75 0 000 1.5h3.5a.75.75 0 100-1.5h-3.5z\"></path></svg>,\n\tarrow_left: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z\"></path></svg>,\n\tarrow_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z\"></path></svg>,\n\tcheck: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\"></path></svg>,\n\tchevron_down: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>,\n\tchevron_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z\"></path></svg>,\n\tchevron_up: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z\"></path></svg>,\n\tclippy: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z\"></path></svg>,\n\tcode: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z\"></path></svg>,\n\tdash: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2 8a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75A.75.75 0 012 8z\"></path></svg>,\n\tdevice_desktop: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5h12.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25zM14.25 1H1.75A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z\"></path></svg>,\n\tdot_fill: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8z\"></path></svg>,\n\tdownload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tduplicate: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M10.5 3a.75.75 0 01.75.75v1h1a.75.75 0 010 1.5h-1v1a.75.75 0 01-1.5 0v-1h-1a.75.75 0 010-1.5h1v-1A.75.75 0 0110.5 3z\"></path><path fill-rule=\"evenodd\" d=\"M6.75 0A1.75 1.75 0 005 1.75v7.5c0 .966.784 1.75 1.75 1.75h7.5A1.75 1.75 0 0016 9.25v-7.5A1.75 1.75 0 0014.25 0h-7.5zM6.5 1.75a.25.25 0 01.25-.25h7.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5z\"></path><path d=\"M1.75 5A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h7.5A1.75 1.75 0 0011 14.25v-1.5a.75.75 0 00-1.5 0v1.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1.5a.75.75 0 000-1.5h-1.5z\"></path></svg>,\n\teye: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z\"></path></svg>,\n\teye_closed: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M.143 2.31a.75.75 0 011.047-.167l14.5 10.5a.75.75 0 11-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.618 1.618 0 010-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 01.143 2.31zm3.386 3.378a14.21 14.21 0 00-1.85 2.244.12.12 0 00-.022.068c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 016.058 7.52l-2.53-1.832zM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 11-.473-1.423A6.23 6.23 0 018 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.619 1.619 0 010 1.798c-.11.166-.248.365-.41.587a.75.75 0 11-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 000-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5z\"></path></svg>,\n\tfile: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z\"></path></svg>,\n\tfile_directory: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 1A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25v-8.5A1.75 1.75 0 0014.25 3h-6.5a.25.25 0 01-.2-.1l-.9-1.2c-.33-.44-.85-.7-1.4-.7h-3.5z\"></path></svg>,\n\tgear: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z\"></path></svg>,\n\tglobe: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.543 7.25h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.506 6.506 0 00-4.666 5.5zm2.733 1.5H1.543a6.506 6.506 0 004.666 5.5 11.13 11.13 0 01-.352-.552c-.715-1.192-1.437-2.874-1.581-4.948zm1.504 0h4.44a9.637 9.637 0 01-1.363 4.177c-.306.51-.612.919-.857 1.215a9.978 9.978 0 01-.857-1.215A9.637 9.637 0 015.78 8.75zm4.44-1.5H5.78a9.637 9.637 0 011.363-4.177c.306-.51.612-.919.857-1.215.245.296.55.705.857 1.215A9.638 9.638 0 0110.22 7.25zm1.504 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.506 6.506 0 004.666-5.5h-2.733zm2.733-1.5h-2.733c-.144-2.074-.866-3.756-1.58-4.948a11.738 11.738 0 00-.353-.552 6.506 6.506 0 014.666 5.5zM8 0a8 8 0 100 16A8 8 0 008 0z\"></path></svg>,\n\thistory: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z\"></path></svg>,\n\tinfo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path></svg>,\n\tissue_opened: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z\"></path></svg>,\n\tkebab_horizontal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\"></path></svg>,\n\tlink: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg>,\n\tlink_external: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M10.604 1h4.146a.25.25 0 01.25.25v4.146a.25.25 0 01-.427.177L13.03 4.03 9.28 7.78a.75.75 0 01-1.06-1.06l3.75-3.75-1.543-1.543A.25.25 0 0110.604 1zM3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z\"></path></svg>,\n\tmark_github: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>,\n\tmoon: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z\"></path></svg>,\n\tplay: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM6.379 5.227A.25.25 0 006 5.442v5.117a.25.25 0 00.379.214l4.264-2.559a.25.25 0 000-.428L6.379 5.227z\"></path></svg>,\n\tplus: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2a.75.75 0 01.75.75v4.5h4.5a.75.75 0 010 1.5h-4.5v4.5a.75.75 0 01-1.5 0v-4.5h-4.5a.75.75 0 010-1.5h4.5v-4.5A.75.75 0 018 2z\"></path></svg>,\n\tplus_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zm.75 4.75a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h2.5v2.5a.75.75 0 001.5 0v-2.5h2.5a.75.75 0 000-1.5h-2.5v-2.5z\"></path></svg>,\n\trepo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z\"></path></svg>,\n\tsearch: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z\"></path></svg>,\n\tsort_asc: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 4.25a.75.75 0 01.75-.75h2.5a.75.75 0 010 1.5H.75A.75.75 0 010 4.25zm0 4a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75A.75.75 0 010 8.25zm0 4a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75zm12.927-9.677a.25.25 0 00-.354 0l-3 3A.25.25 0 009.75 6H12v6.75a.75.75 0 001.5 0V6h2.25a.25.25 0 00.177-.427l-3-3z\"></path></svg>,\n\tsort_desc: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 4.25a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5H.75A.75.75 0 010 4.25zm0 4a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5H.75A.75.75 0 010 8.25zm0 4a.75.75 0 01.75-.75h2.5a.75.75 0 010 1.5H.75a.75.75 0 01-.75-.75z\"></path><path d=\"M13.5 10h2.25a.25.25 0 01.177.427l-3 3a.25.25 0 01-.354 0l-3-3A.25.25 0 019.75 10H12V3.75a.75.75 0 011.5 0V10z\"></path></svg>,\n\tsquare: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4 5.75C4 4.784 4.784 4 5.75 4h4.5c.966 0 1.75.784 1.75 1.75v4.5A1.75 1.75 0 0110.25 12h-4.5A1.75 1.75 0 014 10.25v-4.5zm1.75-.25a.25.25 0 00-.25.25v4.5c0 .138.112.25.25.25h4.5a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-4.5z\"></path></svg>,\n\tsquare_fill: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M5.75 4A1.75 1.75 0 004 5.75v4.5c0 .966.784 1.75 1.75 1.75h4.5A1.75 1.75 0 0012 10.25v-4.5A1.75 1.75 0 0010.25 4h-4.5z\"></path></svg>,\n\tstack: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.122.392a1.75 1.75 0 011.756 0l5.003 2.902c.83.481.83 1.68 0 2.162L8.878 8.358a1.75 1.75 0 01-1.756 0L2.119 5.456a1.25 1.25 0 010-2.162L7.122.392zM8.125 1.69a.25.25 0 00-.25 0l-4.63 2.685 4.63 2.685a.25.25 0 00.25 0l4.63-2.685-4.63-2.685zM1.601 7.789a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0L1.874 8.814A.75.75 0 011.6 7.789zm0 3.5a.75.75 0 011.025-.273l5.249 3.044a.25.25 0 00.25 0l5.249-3.044a.75.75 0 01.752 1.298l-5.248 3.044a1.75 1.75 0 01-1.756 0l-5.248-3.044a.75.75 0 01-.273-1.025z\"></path></svg>,\n\tsun: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z\"></path></svg>,\n\tsync: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z\"></path></svg>,\n\ttag: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z\"></path></svg>,\n\tterminal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75zm1.75-.25a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25H1.75zM7.25 8a.75.75 0 01-.22.53l-2.25 2.25a.75.75 0 11-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 111.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z\"></path></svg>,\n\tthree_bars: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z\"></path></svg>,\n\ttrashcan: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z\"></path></svg>,\n\tunfold: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8.177.677l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25a.75.75 0 01-1.5 0V4H5.104a.25.25 0 01-.177-.427L7.823.677a.25.25 0 01.354 0zM7.25 10.75a.75.75 0 011.5 0V12h2.146a.25.25 0 01.177.427l-2.896 2.896a.25.25 0 01-.354 0l-2.896-2.896A.25.25 0 015.104 12H7.25v-1.25zm-5-2a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z\"></path></svg>,\n\tupload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.53 1.22a.75.75 0 00-1.06 0L3.72 4.97a.75.75 0 001.06 1.06l2.47-2.47v6.69a.75.75 0 001.5 0V3.56l2.47 2.47a.75.75 0 101.06-1.06L8.53 1.22zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tx: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\"></path></svg>,\n\tx_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.404 12.596a6.5 6.5 0 119.192-9.192 6.5 6.5 0 01-9.192 9.192zM2.344 2.343a8 8 0 1011.313 11.314A8 8 0 002.343 2.343zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z\"></path></svg>,\n}\n","import { useEffect, useMemo, useState } from 'preact/hooks'\nimport { mapStackTrace } from 'sourcemapped-stacktrace'\nimport { Octicon } from './Octicon'\n\ntype ErrorPanelProps = {\n\terror: string | Error,\n\tonDismiss?: () => unknown,\n}\nexport function ErrorPanel({ error, onDismiss }: ErrorPanelProps) {\n\tconst [stackVisible, setStackVisible] = useState(false)\n\tconst [stack, setStack] = useState<string | undefined>(undefined)\n\n\tuseEffect(() => {\n\t\tif (error instanceof Error) {\n\t\t\tconst stack = error.stack!.split('\\n').map(line => {\n\t\t\t\treturn line.replace(/^(\\s+)at (?:async )?(https?:.*)/, '$1at ($2)')\n\t\t\t})\n\t\t\tsetStack(stack.join('\\n'))\n\t\t\tmapStackTrace(stack.join('\\n'), (mapped) => {\n\t\t\t\tconst mappedStack = mapped.map(line => {\n\t\t\t\t\treturn line.replace(/..\\/..\\/src\\//, 'src/')\n\t\t\t\t}).join('\\n')\n\t\t\t\tsetStack(mappedStack)\n\t\t\t})\n\t\t}\n\t}, [error])\n\n\tconst url = useMemo(() => {\n\t\tlet url ='https://github.com/misode/misode.github.io/issues/new'\n\t\tif (error instanceof Error) {\n\t\t\turl += `?title=${encodeURIComponent(`${error.name}: ${error.message}`)}`\n\t\t\tif (stack) {\n\t\t\t\turl += `&body=${encodeURIComponent(`\\`\\`\\`\\n${error.name}: ${error.message}\\n${stack}\\n\\`\\`\\`\\n`)}`\n\t\t\t}\n\t\t} else {\n\t\t\turl += `?title=${encodeURIComponent(error.toString())}`\n\t\t}\n\t\treturn url\n\t}, [error, stack])\n\n\treturn <div class=\"error\">\n\t\t{onDismiss && <div class=\"error-dismiss\" onClick={onDismiss}>{Octicon.x}</div>}\n\t\t<h3>\n\t\t\t{error instanceof Error ? error.message : error}\n\t\t\t{stack && <span onClick={() => setStackVisible(!stackVisible)}>\n\t\t\t\t{Octicon.info}\n\t\t\t</span>}\n\t\t</h3>\n\t\t{stack && stackVisible && <pre>{stack}</pre>}\n\t\t<p>If you think this is a bug, you can report it <a href={url} target=\"_blank\">on GitHub</a></p>\n\t</div>\n}\n","import { hexId } from '../../Utils'\n\ninterface Props {\n\tlabel: string,\n\tvalue: boolean,\n\tonChange: (value: boolean) => unknown,\n}\nexport function Checkbox({ label, value, onChange }: Props) {\n\tconst id = hexId()\n\treturn <label class=\"checkbox\">\n\t\t<input id={id} type=\"checkbox\" checked={value} onClick={() => onChange(!value)} />\n\t\t{label}\n\t</label>\n}\n","import type { JSXInternal } from 'preact/src/jsx'\n\ntype InputProps = JSXInternal.HTMLAttributes<HTMLInputElement>\n\ntype BaseInputProps<T> = Omit<InputProps, 'onChange' | 'type'> & {\n\tonChange?: (value: T) => unknown,\n\tonEnter?: (value: T) => unknown,\n}\nfunction BaseInput<T>(name: string, type: string, fn: (value: string) => T) {\n\tconst component = (props: BaseInputProps<T>) => {\n\t\tconst onChange = props.onChange && ((evt: Event) => {\n\t\t\tconst value = (evt.target as HTMLInputElement).value\n\t\t\tprops.onChange?.(fn(value))\n\t\t})\n\t\tconst onKeyDown = props.onEnter && ((evt: KeyboardEvent) => {\n\t\t\tif (evt.key === 'Enter') {\n\t\t\t\tconst value = (evt.target as HTMLInputElement).value\n\t\t\t\tprops.onEnter?.(fn(value))\n\t\t\t}\n\t\t})\n\t\treturn <input {...props} {...{ type, onChange, onKeyDown }} />\n\t}\n\tcomponent.displayName = name\n\treturn component\n}\n\nexport const TextInput = BaseInput('TextInput', 'text', v => v)\n\nexport const NumberInput = BaseInput('NumberInput', 'number', v => Number(v))\n\nexport const RangeInput = BaseInput('RangeInput', 'range', v => Number(v))\n","import { useMemo, useState } from 'preact/hooks'\nimport { Btn, BtnInput } from '..'\n\ninterface Props {\n\tvalues?: string[],\n\tonSelect?: (value: string) => unknown,\n\tsearchPlaceholder?: string,\n\tnoResults?: string,\n}\nexport function SearchList({ values, onSelect, searchPlaceholder, noResults }: Props) {\n\tconst [search, setSearch] = useState('')\n\tconst results = useMemo(() => {\n\t\tconst terms = search.trim().split(' ')\n\t\treturn values?.filter(v => terms.every(t => v.includes(t))) ?? []\n\t}, [values, search])\n\n\treturn <>\n\t\t<BtnInput icon=\"search\" large value={search} onChange={setSearch} doSelect={1} placeholder={searchPlaceholder ?? 'Search'} />\n\t\t<div class=\"result-list\">\n\t\t\t{results.map(v => <Btn key={v} label={v} onClick={() => onSelect?.(v)} />)}\n\t\t\t{results.length === 0 && <Btn label={noResults ?? 'No results'}/>}\n\t\t</div>\n\t</>\n}\n","import { isObject } from '../Utils'\n\nconst repo = 'https://raw.githubusercontent.com/misode/technical-changes/main'\n\nexport type Change = {\n\tgroup: ChangelogVersion,\n\tversion: ChangelogVersion,\n\torder: number,\n\ttags: string[],\n\tcontent: string,\n}\n\nexport type ChangelogVersion = {\n\tid: string,\n\tarticle: string | null,\n}\n\nlet Changelogs: Change[] | Promise<Change[]> | null = null\n\nexport async function getChangelogs() {\n\tif (!Changelogs) {\n\t\tconst index = await (await fetch(`${repo}/index.json`)).json() as string[]\n\t\tChangelogs = (await Promise.all(\n\t\t\tindex.map((group, i) => fetchGroup(parseVersion(group), i))\n\t\t)).flat().map<Change>(change => ({\n\t\t\t...change,\n\t\t\ttags: [change.group.id, ...change.tags],\n\t\t}))\n\t}\n\treturn Changelogs\n}\n\nasync function fetchGroup(group: ChangelogVersion, groupIndex: number) {\n\tconst index = await (await fetch(`${repo}/${group.id}/index.json`)).json() as string[]\n\treturn (await Promise.all(\n\t\tindex.map((version, i) => fetchChangelog(group, parseVersion(version), groupIndex, i))\n\t)).flat()\n}\n\nasync function fetchChangelog(group: ChangelogVersion, version: ChangelogVersion, groupIndex: number, versionIndex: number) {\n\tconst text = await (await fetch(`${repo}/${group.id}/${version.id}.md`)).text()\n\treturn parseChangelog(text).map(change => ({\n\t\tversion,\n\t\tgroup,\n\t\torder: groupIndex * 1000 + versionIndex,\n\t\t...change,\n\t}))\n}\n\nfunction parseChangelog(text: string) {\n\treturn text.split('\\n\\n')\n\t\t.map(entry => {\n\t\t\tconst i = entry.indexOf('|')\n\t\t\treturn {\n\t\t\t\ttags: entry.substring(0, i).trim().split(' '),\n\t\t\t\tcontent: entry.slice(i + 1).trim()\n\t\t\t\t\t.replaceAll('->', '→')\n\t\t\t\t\t.replaceAll('\\n...\\n', '\\n\\n'),\n\t\t\t}\n\t\t})\n}\n\nfunction parseVersion(version: unknown): ChangelogVersion {\n\tif (typeof version === 'string') {\n\t\treturn {\n\t\t\tid: version,\n\t\t\tarticle: version.match(/\\d\\dw\\d\\d[a-z]/) ? 'minecraft-snapshot-' + version : version.match(/\\d+\\.\\d+(\\.\\d+)?-pre[0-9]+/) ? 'minecraft-' + version.replaceAll('.', '-').replaceAll('pre', 'pre-release-') : null,\n\t\t}\n\t} else if (isObject(version)) {\n\t\treturn version as ChangelogVersion\n\t}\n\treturn { id: 'unknown', article: null }\n}\n","import type { CollectionRegistry } from '@mcschema/core'\nimport config from '../../config.json'\nimport { message } from '../Utils'\nimport type { BlockStateRegistry, VersionId } from './Schemas'\n\n// Cleanup old caches\n['1.15', '1.16', '1.17'].forEach(v => localStorage.removeItem(`cache_${v}`));\n['mcdata_master', 'vanilla_datapack_summary'].forEach(v => localStorage.removeItem(`cached_${v}`))\ncaches.delete('misode-v1')\n\nconst CACHE_NAME = 'misode-v2'\nconst CACHE_LATEST_VERSION = 'cached_latest_version'\n\ntype Version = {\n\tid: string,\n\tref?: string,\n\tdynamic?: boolean,\n}\n\ndeclare var __LATEST_VERSION__: string\nconst latestVersion = __LATEST_VERSION__ ?? ''\nconst mcmetaUrl = 'https://raw.githubusercontent.com/misode/mcmeta'\n\ntype McmetaTypes = 'summary' | 'data' | 'assets' | 'registries'\n\nfunction mcmeta(version: { dynamic: true } | { dynamic?: false, ref?: string}, type: McmetaTypes) {\n\treturn `${mcmetaUrl}/${version.dynamic ? type : `${version.ref}-${type}`}`\n}\n\nasync function validateCache(version: Version) {\n\tif (version.dynamic) {\n\t\tif (localStorage.getItem(CACHE_LATEST_VERSION) !== latestVersion) {\n\t\t\tawait deleteMatching(url => url.startsWith(`${mcmetaUrl}/summary/`) || url.startsWith(`${mcmetaUrl}/data/`) || url.startsWith(`${mcmetaUrl}/assets/`) || url.startsWith(`${mcmetaUrl}/registries/`))\n\t\t\tlocalStorage.setItem(CACHE_LATEST_VERSION, latestVersion)\n\t\t}\n\t\tversion.ref = latestVersion\n\t}\n}\n\nexport async function fetchData(versionId: string, collectionTarget: CollectionRegistry, blockStateTarget: BlockStateRegistry) {\n\tconst version = config.versions.find(v => v.id === versionId) as Version | undefined\n\tif (!version) {\n\t\tconsole.error(`[fetchData] Unknown version ${version} in ${JSON.stringify(config.versions)}`)\n\t\treturn\n\t}\n\n\tawait validateCache(version)\n\n\tawait Promise.all([\n\t\tfetchRegistries(version, collectionTarget),\n\t\tfetchBlockStateMap(version, blockStateTarget),\n\t])\n}\n\nasync function fetchRegistries(version: Version, target: CollectionRegistry) {\n\tconsole.debug(`[fetchRegistries] ${version.id}`)\n\ttry {\n\t\tconst data = await getData(`${mcmeta(version, 'summary')}/registries/data.min.json`)\n\t\tfor (const id in data) {\n\t\t\ttarget.register(id, data[id].map((e: string) => 'minecraft:' + e))\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn('Error occurred while fetching registries:', message(e))\n\t}\n}\n\nasync function fetchBlockStateMap(version: Version, target: BlockStateRegistry) {\n\tconsole.debug(`[fetchBlockStateMap] ${version.id}`)\n\ttry {\n\t\tconst data = await getData(`${mcmeta(version, 'summary')}/blocks/data.min.json`)\n\t\tfor (const id in data) {\n\t\t\ttarget['minecraft:' + id] = {\n\t\t\t\tproperties: data[id][0],\n\t\t\t\tdefault: data[id][1],\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn('Error occurred while fetching block state map:', message(e))\n\t}\n}\n\nexport async function fetchPreset(versionId: VersionId, registry: string, id: string) {\n\tconsole.debug(`[fetchPreset] ${versionId} ${registry} ${id}`)\n\tconst version = config.versions.find(v => v.id === versionId)!\n\ttry {\n\t\tconst type = ['blockstates', 'models'].includes(registry) ? 'assets' : 'data'\n\t\tconst url = `${mcmeta(version, type)}/${type}/minecraft/${registry}/${id}.json`\n\t\tconst res = await fetch(url)\n\t\treturn res.json()\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching ${registry} preset ${id}: ${message(e)}`)\n\t}\n}\n\nexport async function fetchAllPresets(versionId: VersionId, registry: string) {\n\tconsole.debug(`[fetchAllPresets] ${versionId} ${registry}`)\n\tconst version = config.versions.find(v => v.id === versionId)!\n\tawait validateCache(version)\n\ttry {\n\t\tconst entries = await getData(`${mcmeta(version, 'registries')}/${registry}/data.min.json`)\n\t\treturn new Map<string, unknown>(await Promise.all(\n\t\t\tentries.map(async (e: string) =>\n\t\t\t\t[e, await getData(`${mcmeta(version, 'data')}/data/minecraft/${registry}/${e}.json`)])\n\t\t))\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching all ${registry} presets: ${message(e)}`)\n\t}\n}\n\nexport type SoundEvents = {\n\t[key: string]: {\n\t\tsounds: (string | { name: string })[],\n\t},\n}\nexport async function fetchSounds(versionId: VersionId): Promise<SoundEvents> {\n\tconst version = config.versions.find(v => v.id === versionId)!\n\tawait validateCache(version)\n\ttry {\n\t\tconst url = `${mcmeta(version, 'summary')}/sounds/data.min.json`\n\t\treturn await getData(url)\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching sounds for ${version}: ${message(e)}`)\n\t}\n}\n\nexport function getSoundUrl(versionId: VersionId, path: string) {\n\tconst version = config.versions.find(v => v.id === versionId)!\n\treturn `${mcmeta(version, 'assets')}/assets/minecraft/sounds/${path}.ogg`\n}\n\nexport type VersionMeta = {\n\tid: string,\n\tname: string,\n\trelease_target: string,\n\ttype: 'snapshot' | 'release',\n\tstable: boolean,\n\tdata_version: number,\n\tprotocol_version: number,\n\tdata_pack_version: number,\n\tresource_pack_version: number,\n\tbuild_time: string,\n\trelease_time: string,\n\tsha1: string,\n}\nexport async function fetchVersions(): Promise<VersionMeta[]> {\n\tconst version = config.versions[config.versions.length - 1]\n\tawait validateCache(version)\n\ttry {\n\t\treturn getData(`${mcmeta(version, 'summary')}/versions/data.min.json`)\n\t} catch (e) {\n\t\tthrow new Error(`Error occured while fetching versions: ${message(e)}`)\n\t}\n}\n\nasync function getData<T = any>(url: string, fn: (v: any) => T = (v: any) => v): Promise<T> {\n\ttry {\n\t\tconst cache = await caches.open(CACHE_NAME)\n\t\tconsole.debug(`[getData] Opened cache ${CACHE_NAME} ${url}`)\n\t\tconst cacheResponse = await cache.match(url)\n    \n\t\tif (cacheResponse && cacheResponse.ok) {\n\t\t\tconsole.debug(`[getData] Retrieving cached data ${url}`)\n\t\t\treturn await cacheResponse.json()\n\t\t}\n  \n\t\tconsole.debug(`[getData] fetching data ${url}`)\n\t\tconst fetchResponse = await fetch(url)\n\t\tconst responseData = fn(await fetchResponse.json())\n\t\tawait cache.put(url, new Response(JSON.stringify(responseData)))\n\t\treturn responseData\n\t} catch (e) {\n\t\tconsole.warn(`[getData] Failed to open cache ${CACHE_NAME}: ${message(e)}`)\n\n\t\tconsole.debug(`[getData] fetching data ${url}`)\n\t\tconst fetchResponse = await fetch(url)\n\t\tconst responseData = fn(await fetchResponse.json())\n\t\treturn responseData\n\t}\n}\n\nasync function deleteMatching(matches: (url: string) => boolean) {\n\ttry {\n\t\tconst cache = await caches.open(CACHE_NAME)\n\t\tconsole.debug(`[deleteMatching] Opened cache ${CACHE_NAME}`)\n\t\tconst promises: Promise<boolean>[] = []\n  \n\t\tfor (const request of await cache.keys()) {\n\t\t\tif (matches(request.url)) {\n\t\t\t\tpromises.push(cache.delete(request))\n\t\t\t}\n\t\t}\n\t\tconsole.debug(`[deleteMatching] Removing ${promises.length} cache objects...`)\n\t\tawait Promise.all(promises)\n\t} catch (e) {\n\t\tconsole.warn(`[deleteMatching] Failed to open cache ${CACHE_NAME}: ${message(e)}`)\n\t}\n}\n","import type { CollectionRegistry, INode, SchemaRegistry } from '@mcschema/core'\nimport { ChoiceNode, DataModel, Reference, StringNode } from '@mcschema/core'\nimport * as java15 from '@mcschema/java-1.15'\nimport * as java16 from '@mcschema/java-1.16'\nimport * as java17 from '@mcschema/java-1.17'\nimport * as java18 from '@mcschema/java-1.18'\nimport * as java182 from '@mcschema/java-1.18.2'\nimport * as java19 from '@mcschema/java-1.19'\nimport config from '../../config.json'\nimport { message } from '../Utils'\nimport { fetchData } from './DataFetcher'\n\nexport const VersionIds = ['1.15', '1.16', '1.17', '1.18', '1.18.2', '1.19'] as const\nexport type VersionId = typeof VersionIds[number]\n\nexport type BlockStateRegistry = {\n\t[block: string]: {\n\t\tproperties?: {\n\t\t\t[key: string]: string[],\n\t\t},\n\t\tdefault?: {\n\t\t\t[key: string]: string,\n\t\t},\n\t},\n}\n\ntype VersionData = {\n\tcollections: CollectionRegistry,\n\tschemas: SchemaRegistry,\n\tblockStates: BlockStateRegistry,\n}\nconst Versions: Record<string, VersionData | Promise<VersionData>> = {}\n\ntype ModelData = {\n\tmodel: DataModel,\n\tversion: VersionId,\n}\nconst Models: Record<string, ModelData> = {}\n\nconst versionGetter: {\n\t[versionId in VersionId]: {\n\t\tgetCollections: () => CollectionRegistry,\n\t\tgetSchemas: (collections: CollectionRegistry) => SchemaRegistry,\n\t}\n} = {\n\t1.15: java15,\n\t1.16: java16,\n\t1.17: java17,\n\t1.18: java18,\n\t'1.18.2': java182,\n\t1.19: java19,\n}\n\nexport let CachedDecorator: INode<any>\nexport let CachedFeature: INode<any>\nexport let CachedCollections: CollectionRegistry\n\nasync function getVersion(id: VersionId): Promise<VersionData> {\n\tif (!Versions[id]) {\n\t\tVersions[id] = (async () => {\n\t\t\ttry {\n\t\t\t\tconst collections = versionGetter[id].getCollections()\n\t\t\t\tconst blockStates: BlockStateRegistry = {}\n\t\t\t\tawait fetchData(id, collections, blockStates)\n\t\t\t\tconst schemas = versionGetter[id].getSchemas(collections)\n\t\t\t\tVersions[id] = { collections, schemas, blockStates }\n\t\t\t\treturn Versions[id]\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error(`Cannot get version \"${id}\": ${message(e)}`)\n\t\t\t}\n\t\t})()\n\t\treturn Versions[id]\n\t}\n\treturn Versions[id]\n}\n\nexport async function getModel(version: VersionId, id: string): Promise<DataModel> {\n\tif (!Models[id] || Models[id].version !== version) {\n\t\tconst versionData = await getVersion(version)\n\t\t\n\t\tCachedDecorator = Reference(versionData.schemas, 'configured_decorator')\n\t\tCachedFeature = ChoiceNode([\n\t\t\t{\n\t\t\t\ttype: 'string',\n\t\t\t\tnode: StringNode(versionData.collections, { validator: 'resource', params: { pool: '$worldgen/configured_feature' } }),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'object',\n\t\t\t\tnode: Reference(versionData.schemas, 'configured_feature'),\n\t\t\t},\n\t\t], { choiceContext: 'feature' })\n\n\t\tconst schemaName = config.generators.find(g => g.id === id)?.schema\n\t\tif (!schemaName) {\n\t\t\tthrow new Error(`Cannot find model ${id}`)\n\t\t}\n\t\ttry {\n\t\t\tconst schema = versionData.schemas.get(schemaName)\n\t\t\tconst model = new DataModel(schema, { wrapLists: true })\n\t\t\tif (Models[id]) {\n\t\t\t\tmodel.reset(Models[id].model.data, false)\n\t\t\t} else {\n\t\t\t\tmodel.validate(true)\n\t\t\t\tmodel.history = [JSON.stringify(model.data)]\n\t\t\t}\n\t\t\tModels[id] = { model, version }\n\t\t} catch (e) {\n\t\t\tconst err = new Error(`Cannot get generator \"${id}\" for version \"${version}\": ${message(e)}`)\n\t\t\tif (e instanceof Error) err.stack = e.stack\n\t\t\tthrow err\n\t\t}\n\t}\n\treturn Models[id].model\n}\n\nexport async function getCollections(version: VersionId): Promise<CollectionRegistry> {\n\tconst versionData = await getVersion(version)\n\tCachedCollections = versionData.collections\n\treturn versionData.collections\n}\n\nexport async function getBlockStates(version: VersionId): Promise<BlockStateRegistry> {\n\tconst versionData = await getVersion(version)\n\treturn versionData.blockStates\n}\n\nexport function checkVersion(versionId: string, minVersionId: string | undefined, maxVersionId?: string) {\n\tconst version = config.versions.findIndex(v => v.id === versionId)\n\tconst minVersion = minVersionId ? config.versions.findIndex(v => v.id === minVersionId) : 0\n\tconst maxVersion = maxVersionId ? config.versions.findIndex(v => v.id === maxVersionId) : config.versions.length - 1\n\treturn minVersion <= version && version <= maxVersion\n}\n","import lz from 'lz-string'\nimport config from '../../config.json'\nimport type { VersionId } from './Schemas'\n\nconst API_PREFIX = 'https://z15g7can.directus.app/items'\nexport const SHARE_KEY = 'share'\n\nconst ShareCache = new Map<string, string>()\n\nexport async function shareSnippet(type: string, version: VersionId, jsonData: any, show_preview: boolean) {\n\ttry {\n\t\tconst data = lz.compressToBase64(JSON.stringify(jsonData))\n\t\tconst raw = btoa(JSON.stringify(jsonData))\n\t\tconsole.log('Compression rate', raw.length / data.length)\n\t\tconst body = JSON.stringify({ data, type, version, show_preview })\n\t\tlet id = ShareCache.get(body)\n\t\tif (!id) {\n\t\t\tconst snippet = await fetchApi('/snippets', body)\n\t\t\tShareCache.set(body, snippet.id)\n\t\t\tid = snippet.id as string\n\t\t}\n\t\tconst gen = config.generators.find(g => g.id === type)!\n\t\treturn `${location.protocol}//${location.host}/${gen.url}/?${SHARE_KEY}=${id}`\n\t} catch (e) {\n\t\tif (e instanceof Error) {\n\t\t\te.message = `Error creating share link: ${e.message}`\n\t\t}\n\t\tthrow e\n\t}\n}\n\nexport async function getSnippet(id: string) {\n\ttry {\n\t\tconst snippet = await fetchApi(`/snippets/${id}`)\n\t\treturn {\n\t\t\t...snippet,\n\t\t\tdata: JSON.parse(lz.decompressFromBase64(snippet.data) ?? '{}'),\n\t\t}\n\t} catch (e) {\n\t\tif (e instanceof Error) {\n\t\t\te.message = `Error loading shared content: ${e.message}`\n\t\t}\n\t\tthrow e\n\t}\n}\n\nasync function fetchApi(url: string, body?: string) {\n\tconst res = await fetch(API_PREFIX + url, body ? {\n\t\tmethod: 'post',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody,\n\t} : undefined)\n\tconst data = await res.json()\n\tif (data.data) {\n\t\treturn data.data\n\t}\n\tthrow new Error(data.errors?.[0]?.message ?? 'Unknown error')\n}\n","let scriptRel;const seen = {};export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps) {\n        return baseModule();\n    }\n    // @ts-ignore\n    if (scriptRel === undefined) {\n        // @ts-ignore\n        const relList = document.createElement('link').relList;\n        // @ts-ignore\n        scriptRel =\n            relList && relList.supports && relList.supports('modulepreload')\n                ? 'modulepreload'\n                : 'preload';\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","import type { Project } from './contexts'\nimport { DRAFT_PROJECT } from './contexts'\nimport type { VersionId } from './services'\nimport { VersionIds } from './services'\n\nexport namespace Store {\n\texport const ID_LANGUAGE = 'language'\n\texport const ID_THEME = 'theme'\n\texport const ID_VERSION = 'schema_version'\n\texport const ID_INDENT = 'indentation'\n\texport const ID_FORMAT = 'output_format'\n\texport const ID_HIGHLIGHTING = 'output_highlighting'\n\texport const ID_SOUNDS_VERSION = 'minecraft_sounds_version'\n\texport const ID_PROJECTS = 'misode_projects'\n\texport const ID_BACKUPS = 'misode_generator_backups'\n\n\texport function getLanguage() {\n\t\treturn localStorage.getItem(ID_LANGUAGE) ?? 'en'\n\t}\n\n\texport function getTheme() {\n\t\treturn localStorage.getItem(ID_THEME) ?? 'dark'\n\t}\n\n\texport function getVersion(): VersionId {\n\t\tconst version = localStorage.getItem(ID_VERSION)\n\t\tif (version && VersionIds.includes(version as VersionId)) {\n\t\t\treturn version as VersionId\n\t\t}\n\t\treturn '1.18.2'\n\t}\n\n\texport function getIndent() {\n\t\treturn localStorage.getItem(ID_INDENT) ?? '2_spaces'\n\t}\n\n\texport function getFormat() {\n\t\treturn localStorage.getItem(ID_FORMAT) ?? 'json'\n\t}\n\n\texport function getHighlighting() {\n\t\treturn localStorage.getItem(ID_HIGHLIGHTING) !== 'false'\n\t}\n\n\texport function getSoundsVersion() {\n\t\treturn localStorage.getItem(ID_SOUNDS_VERSION) ?? 'latest'\n\t}\n\n\texport function getProjects(): Project[] {\n\t\tconst projects = localStorage.getItem(ID_PROJECTS)\n\t\tif (projects) {\n\t\t\treturn JSON.parse(projects) as Project[]\n\t\t}\n\t\treturn [DRAFT_PROJECT]\n\t}\n\n\texport function getBackup(id: string): object | undefined {\n\t\tconst backups = JSON.parse(localStorage.getItem(ID_BACKUPS) ?? '{}')\n\t\treturn backups[id]\n\t}\n\n\texport function setLanguage(language: string | undefined) {\n\t\tif (language) localStorage.setItem(ID_LANGUAGE, language)\n\t}\n\n\texport function setTheme(theme: string | undefined) {\n\t\tif (theme) localStorage.setItem(ID_THEME, theme)\n\t}\n\n\texport function setVersion(version: VersionId | undefined) {\n\t\tif (version) localStorage.setItem(ID_VERSION, version)\n\t}\n\n\texport function setIndent(indent: string | undefined) {\n\t\tif (indent) localStorage.setItem(ID_INDENT, indent)\n\t}\n\n\texport function setFormat(format: string | undefined) {\n\t\tif (format) localStorage.setItem(ID_FORMAT, format)\n\t}\n\n\texport function setHighlighting(highlighting: boolean | undefined) {\n\t\tif (highlighting !== undefined) localStorage.setItem(ID_HIGHLIGHTING, highlighting.toString())\n\t}\n\n\texport function setSoundsVersion(version: string | undefined) {\n\t\tif (version) localStorage.setItem(ID_SOUNDS_VERSION, version)\n\t}\n\n\texport function setProjects(projects: Project[] | undefined) {\n\t\tif (projects) localStorage.setItem(ID_PROJECTS, JSON.stringify(projects))\n\t}\n\n\texport function setBackup(id: string, data: object | undefined) {\n\t\tconst backups = JSON.parse(localStorage.getItem(ID_BACKUPS) ?? '{}')\n\t\tif (data === undefined) {\n\t\t\tdelete backups[id]\n\t\t} else {\n\t\t\tbackups[id] = data\n\t\t}\n\t\tlocalStorage.setItem(ID_BACKUPS, JSON.stringify(backups))\n\t}\n}\n","import type { ComponentChildren } from 'preact'\nimport { createContext } from 'preact'\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport English from '../../locales/en.json'\nimport { Analytics } from '../Analytics'\nimport { Store } from '../Store'\n\ninterface Locale {\n\tlang: string,\n\tlocale: (key: string, ...params: string[]) => string,\n\tchangeLanguage: (lang: string) => unknown,\n}\nconst Locale = createContext<Locale>({\n\tlang: 'none',\n\tlocale: key => key,\n\tchangeLanguage: () => {},\n})\n\nexport const Locales: {\n\t[key: string]: {\n\t\t[key: string]: string,\n\t},\n} = {\n\tfallback: English,\n}\n\nexport function localize(lang: string, key: string, ...params: string[]) {\n\tconst value: string | undefined = Locales[lang]?.[key]\n\t?? Locales.en?.[key] ?? Locales.fallback[key] ?? key\n\treturn resolveLocaleParams(value, params)\n}\n\nfunction resolveLocaleParams(value: string, params?: string[]): string {\n\treturn value.replace(/%\\d+%/g, match => {\n\t\tconst index = parseInt(match.slice(1, -1))\n\t\treturn params?.[index] !== undefined ? params[index] : match\n\t})\n}\n\nasync function loadLocale(language: string) {\n\tif (Locales[language]) return\n\tconst langConfig = config.languages.find(lang => lang.code === language)\n\tif (!langConfig) return\n\tconst data = await import(`../../locales/${language}.json`)\n\tconst schema = langConfig.schemas !== false\n\t\t&& await import(`../../../node_modules/@mcschema/locales/src/${language}.json`)\n\tLocales[language] = { ...data.default, ...schema.default }\n}\n\nexport function useLocale() {\n\treturn useContext(Locale)\n}\n\nexport function LocaleProvider({ children }: { children: ComponentChildren }) {\n\tconst [lang, setLanguage] = useState('none')\n\n\tconst locale = useCallback((key: string, ...params: string[]) => {\n\t\treturn localize(lang, key, ...params)\n\t}, [lang])\n\n\tconst changeLanguage = useCallback(async (lang: string) => {\n\t\tawait loadLocale(lang)\n\t\tAnalytics.setLanguage(lang)\n\t\tStore.setLanguage(lang)\n\t\tsetLanguage(lang)\n\t}, [])\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst target = Store.getLanguage()\n\t\t\tawait Promise.all([\n\t\t\t\tloadLocale('en'),\n\t\t\t\t...(target !== 'en' ? [loadLocale(target)] : []),\n\t\t\t])\n\t\t\tsetLanguage(target)\n\t\t})()\n\t}, [])\n\n\tconst value: Locale = {\n\t\tlang,\n\t\tlocale: locale,\n\t\tchangeLanguage,\n\t}\n\n\treturn <Locale.Provider value={value}>\n\t\t{children}\n\t</Locale.Provider>\n}\n","import type { ComponentChildren } from 'preact'\nimport { createContext } from 'preact'\nimport { route } from 'preact-router'\nimport { useCallback, useContext, useMemo, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport type { VersionId } from '../services'\nimport { Store } from '../Store'\nimport { cleanUrl } from '../Utils'\n\nexport type Project = {\n\tname: string,\n\tnamespace: string,\n\tversion?: VersionId,\n\tfiles: ProjectFile[],\n}\nexport const DRAFT_PROJECT: Project = {\n\tname: 'Drafts',\n\tnamespace: 'draft',\n\tfiles: [],\n}\n\nexport type ProjectFile = {\n\ttype: string,\n\tid: string,\n\tdata: any,\n}\n\ninterface ProjectContext {\n\tproject: Project,\n\tfile?: ProjectFile,\n\tchangeProject: (name: string) => unknown,\n\tupdateProject: (project: Partial<Project>) => unknown,\n\tupdateFile: (type: string, id: string | undefined, file: Partial<ProjectFile>) => boolean,\n\topenFile: (type: string, id: string) => unknown,\n\tcloseFile: () => unknown,\n}\nconst Project = createContext<ProjectContext>({\n\tproject: DRAFT_PROJECT,\n\tchangeProject: () => {},\n\tupdateProject: () => {},\n\tupdateFile: () => false,\n\topenFile: () => {},\n\tcloseFile: () => {},\n})\n\nexport function useProject() {\n\treturn useContext(Project)\n}\n\nexport function ProjectProvider({ children }: { children: ComponentChildren }) {\n\tconst [projects, setProjects] = useState<Project[]>(Store.getProjects())\n\n\tconst [projectName, setProjectName] = useState<string>(DRAFT_PROJECT.name)\n\tconst project = useMemo(() => {\n\t\treturn projects.find(p => p.name === projectName) ?? DRAFT_PROJECT\n\t}, [projects, projectName])\n\n\tconst [fileId, setFileId] = useState<[string, string] | undefined>(undefined)\n\tconst file = useMemo(() => {\n\t\tif (!fileId) return undefined\n\t\treturn project.files.find(f => f.type === fileId[0] && f.id === fileId[1])\n\t}, [project, fileId])\n\n\tconst changeProjects = useCallback((projects: Project[]) => {\n\t\tStore.setProjects(projects)\n\t\tsetProjects(projects)\n\t}, [])\n\n\tconst updateProject = useCallback((edits: Partial<Project>) => {\n\t\tchangeProjects(projects.map(p => p.name === projectName ?\t{ ...p, ...edits } : p))\n\t}, [projects, projectName])\n\n\tconst updateFile = useCallback((type: string, id: string | undefined, edits: Partial<ProjectFile>) => {\n\t\tif (!edits.id) { // remove\n\t\t\tupdateProject({ files: project.files.filter(f => f.type !== type || f.id !== id) })\n\t\t} else {\n\t\t\tconst newId = edits.id.includes(':') ? edits.id : `${project.namespace}:${edits.id}`\n\t\t\tconst exists = project.files.some(f => f.type === type && f.id === newId)\n\t\t\tif (!id) { // create\n\t\t\t\tif (exists) return false\n\t\t\t\tupdateProject({ files: [...project.files, { type, id: newId, data: edits.data ?? {} } ]})\n\t\t\t\tsetFileId([type, newId])\n\t\t\t} else { // rename or update data\n\t\t\t\tif (file?.id === id && id !== newId && exists) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tupdateProject({ files: project.files.map(f => f.type === type && f.id === id ? { ...f, ...edits, id: newId } : f)})\n\t\t\t\tif (file?.id === id) setFileId([type, newId])\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}, [updateProject, project, file])\n\n\tconst openFile = useCallback((type: string, id: string) => {\n\t\tconst gen = config.generators.find(g => g.id === type || g.path === type)\n\t\tif (!gen) {\n\t\t\tthrow new Error(`Cannot find generator of type ${type}`)\n\t\t}\n\t\tsetFileId([gen.id, id])\n\t\troute(cleanUrl(gen.url))\n\t}, [])\n\n\tconst closeFile = useCallback(() => {\n\t\tsetFileId(undefined)\n\t}, [])\n\n\tconst value: ProjectContext = {\n\t\tproject,\n\t\tfile,\n\t\tchangeProject: setProjectName,\n\t\tupdateProject,\n\t\tupdateFile,\n\t\topenFile,\n\t\tcloseFile,\n\t}\n\n\treturn <Project.Provider value={value}>\n\t\t{children}\n\t</Project.Provider>\n}\n\nexport function getFilePath(file: ProjectFile) {\n\tconst [namespace, id] = file.id.includes(':') ? file.id.split(':') : ['minecraft', file.id]\n\tconst gen = config.generators.find(g => g.id === file.type)\n\tif (!gen) {\n\t\tthrow new Error(`Cannot find generator of type ${file.type}`)\n\t}\n\treturn `data/${namespace}/${gen.path ?? gen.id}/${id}`\n}\n","import type { ComponentChildren } from 'preact'\nimport { createContext } from 'preact'\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\nimport { Analytics } from '../Analytics'\nimport { useMediaQuery } from '../hooks'\nimport { Store } from '../Store'\n\ninterface Theme {\n\ttheme: string,\n\tactualTheme: 'light' | 'dark',\n\tchangeTheme: (theme: string) => unknown,\n}\nconst Theme = createContext<Theme>({\n\ttheme: 'dark',\n\tactualTheme: 'dark',\n\tchangeTheme: () => {},\n})\n\nexport function useTheme() {\n\treturn useContext(Theme)\n}\n\nexport function ThemeProvider({ children }: { children: ComponentChildren }) {\n\tconst [theme, setTheme] = useState(Store.getTheme())\n\tconst prefersLight = useMediaQuery('(prefers-color-scheme: light)')\n\tconst prefersDark = useMediaQuery('(prefers-color-scheme: dark)')\n\n\tuseEffect(() => {\n\t\tdocument.documentElement.setAttribute('data-theme', theme)\n\t}, [theme])\n\n\tconst changeTheme = useCallback((theme: string) => {\n\t\tAnalytics.setTheme(theme)\n\t\tStore.setTheme(theme)\n\t\tsetTheme(theme)\n\t}, [])\n\n\tuseEffect(() => {\n\t\tAnalytics.setPrefersColorScheme(prefersLight ? 'light' : prefersDark ? 'dark' : 'none')\n\t}, [prefersLight, prefersDark])\n\n\tconst value: Theme = {\n\t\ttheme,\n\t\tactualTheme: theme === 'light' || (theme !== 'dark' && prefersLight) ? 'light' : 'dark',\n\t\tchangeTheme,\n\t}\n\n\treturn <Theme.Provider value={value}>\n\t\t{children}\n\t</Theme.Provider>\n}\n","import type { ComponentChildren } from 'preact'\nimport { createContext } from 'preact'\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\nimport { useLocale } from '.'\nimport config from '../../config.json'\nimport type { VersionId } from '../services'\n\nconst VERSIONS_IN_TITLE = 3\n\ninterface Title {\n\ttitle: string,\n\tchangeTitle: (title: string, versions?: VersionId[]) => unknown,\n}\nconst Title = createContext<Title>({\n\ttitle: '',\n\tchangeTitle: () => {},\n})\n\nexport function useTitle(title?: string, versions?: VersionId[]) {\n\tconst context = useContext(Title)\n\tuseEffect(() => {\n\t\tif (title) {\n\t\t\tcontext.changeTitle(title, versions)\n\t\t}\n\t}, [title, versions])\n\treturn context\n}\n\nexport function TitleProvider({ children }: { children: ComponentChildren }) {\n\tconst { locale } = useLocale()\n\tconst [title, setTitle] = useState<string>(locale('title.home'))\n\n\tconst changeTitle = useCallback((title: string, versions?: VersionId[]) => {\n\t\tversions ??= config.versions.map(v => v.id as VersionId)\n\t\tconst titleVersions = versions.slice(versions.length - VERSIONS_IN_TITLE)\n\t\tdocument.title = `${title} Minecraft ${titleVersions.join(', ')}`\n\t\tsetTitle(title)\n\t}, [])\n\n\tconst value = {\n\t\ttitle,\n\t\tchangeTitle,\n\t}\n\n\treturn <Title.Provider value={value}>\n\t\t{children}\n\t</Title.Provider>\n}\n","import type { ComponentChildren } from 'preact'\nimport { createContext } from 'preact'\nimport { getCurrentUrl } from 'preact-router'\nimport { useCallback, useContext, useEffect, useState } from 'preact/hooks'\nimport { Analytics } from '../Analytics'\nimport type { VersionId } from '../services'\nimport { VersionIds } from '../services'\nimport { Store } from '../Store'\nimport { getSearchParams, setSeachParams } from '../Utils'\n\nconst VERSION_PARAM = 'version'\n\ninterface Version {\n\tversion: VersionId,\n\tchangeVersion: (version: VersionId, store?: boolean) => unknown,\n}\nconst Version = createContext<Version>({\n\tversion: '1.18.2',\n\tchangeVersion: () => {},\n})\n\nexport function useVersion() {\n\treturn useContext(Version)\n}\n\nexport function VersionProvider({ children }: { children: ComponentChildren }) {\n\tconst [version, setVersion] = useState<VersionId>(Store.getVersion())\n\n\tconst searchParams = getSearchParams(getCurrentUrl())\n\tconst targetVersion = searchParams.get(VERSION_PARAM)\n\tuseEffect(() => {\n\t\tif (VersionIds.includes(targetVersion as VersionId) && version !== targetVersion) {\n\t\t\tsetVersion(targetVersion as VersionId)\n\t\t}\n\t}, [version, targetVersion])\n\n\tconst changeVersion = useCallback((version: VersionId, store = true) => {\n\t\tif (getSearchParams(getCurrentUrl()).has(VERSION_PARAM)) {\n\t\t\tsetSeachParams({ version })\n\t\t}\n\t\tif (store) {\n\t\t\tAnalytics.setVersion(version)\n\t\t\tStore.setVersion(version)\n\t\t}\n\t\tsetVersion(version)\n\t}, [])\n\n\tconst value: Version = {\n\t\tversion,\n\t\tchangeVersion,\n\t}\n\n\treturn <Version.Provider value={value}>\n\t\t{children}\n\t</Version.Provider>\n}\n","import { DataModel } from '@mcschema/core'\nimport type { NoiseParameters } from 'deepslate'\nimport { FixedBiome, Identifier, LegacyRandom, NormalNoise } from 'deepslate'\nimport init, { biome_parameters, climate_noise, climate_sampler, multi_noise } from 'deepslate-rs'\n// @ts-expect-error\nimport wasm from 'deepslate-rs/deepslate_rs_bg.wasm?url'\nimport type { VersionId } from '../services'\nimport { checkVersion, fetchPreset } from '../services'\nimport { BiMap, clamp, deepClone, deepEqual, square, stringToColor } from '../Utils'\n\nlet ready = false\nasync function loadWasm() {\n\tif (ready) return\n\tawait init(wasm)\n\tready = true\n\tconsole.debug(`Loaded deepslate-rs from \"${wasm}\"`)\n}\n\nconst LAYERS = {\n\ttemperature: [-1, 1],\n\thumidity: [-1, 1],\n\tcontinentalness: [-1.1, 1],\n\terosion: [-1, 1],\n\tweirdness: [-1, 1],\n\toffset: [-1, 1],\n\tfactor: [0, 12],\n\tjaggedness: [0, 1],\n}\n\ntype Triple = [number, number, number]\ntype BiomeColors = Record<string, Triple>\ntype BiomeSourceOptions = {\n\toctaves: Record<string, NoiseParameters>,\n\tbiomeColors: BiomeColors,\n\toffset: [number, number],\n\tscale: number,\n\tres: number,\n\tseed: bigint,\n\tversion: VersionId,\n\tlayers: Set<keyof typeof LAYERS | 'biomes'>,\n}\n\ninterface CachedBiomeSource {\n\tgetBiome(x: number, y: number, z: number): Identifier\n\tgetBiomes?(xFrom: number, xTo: number, xStep: number, yFrom: number, yTo: number, yStep: number, zFrom: number, zTo: number, zStep: number): Identifier[]\n\tgetClimate?(x: number, y: number, z: number): {[k: string]: number}\n\tgetClimates?(xFrom: number, xTo: number, xStep: number, yFrom: number, yTo: number, yStep: number, zFrom: number, zTo: number, zStep: number): {[k: string]: number}[]\n}\n\nlet cacheState: any\nlet biomeSourceCache: CachedBiomeSource\n\nexport async function biomeMap(state: any, img: ImageData, options: BiomeSourceOptions) {\n\tconst { biomeSource } = await getCached(state, options)\n\n\tconst data = img.data\n\tconst ox = -Math.round(options.offset[0]) - 100 + options.res / 2\n\tconst oz = -Math.round(options.offset[1]) - 100 + options.res / 2\n\tconst row = img.width * 4 / options.res\n\tconst col = 4 / options.res\n\n\tconst xRange: Triple = [ox * options.scale, (200 + ox) * options.scale, options.res * options.scale]\n\tconst zRange: Triple = [oz * options.scale, (200 + oz) * options.scale, options.res * options.scale]\n\n\tconst biomes = !options.layers.has('biomes') ? undefined : biomeSource.getBiomes?.(...xRange, 64, 65, 1, ...zRange)\n\tconst layers = [...options.layers].filter(l => l !== 'biomes') as (keyof typeof LAYERS)[]\n\tconst noise = layers.length === 0 ? undefined : biomeSource.getClimates?.(...xRange, 64, 65, 1, ...zRange)\n\n\tfor (let x = 0; x < 200; x += options.res) {\n\t\tfor (let z = 0; z < 200; z += options.res) {\n\t\t\tconst i = z * row + x * col\n\t\t\tconst j = (x / options.res) * 200 / options.res + z / options.res\n\t\t\tconst worldX = (x + ox) * options.scale\n\t\t\tconst worldZ = (z + oz) * options.scale\n\t\t\tlet color: Triple = [50, 50, 50]\n\t\t\tif (options.layers.has('biomes')) {\n\t\t\t\tconst biome = biomes?.[j] ?? biomeSource.getBiome(worldX, 64, worldZ)\n\t\t\t\tcolor = getBiomeColor(biome.toString(), options.biomeColors)\n\t\t\t} else if (noise && layers[0]) {\n\t\t\t\tconst value = noise[j][layers[0]]\n\t\t\t\tconst [min, max] = LAYERS[layers[0]]\n\t\t\t\tconst brightness = (value - min) / (max - min) * 256\n\t\t\t\tcolor = [brightness, brightness, brightness]\n\t\t\t}\n\t\t\tdata[i] = color[0]\n\t\t\tdata[i + 1] = color[1]\n\t\t\tdata[i + 2] = color[2]\n\t\t\tdata[i + 3] = 255\n\t\t}\n\t}\n}\n\nexport async function getBiome(state: any, x: number, z: number, options: BiomeSourceOptions): Promise<{[k: string]: number | string} | undefined> {\n\tconst { biomeSource } = await getCached(state, options)\n\n\tconst [xx, zz] = toWorld([x, z], options)\n\treturn {\n\t\tbiome: biomeSource.getBiome(xx, 64, zz).toString(),\n\t\t...biomeSource.getClimate?.(xx, 64, zz),\n\t}\n}\n\nasync function getCached(state: any, options: BiomeSourceOptions): Promise<{ biomeSource: CachedBiomeSource}> {\n\tconst newState = [state, options.octaves, `${options.seed}`, options.version]\n\tif (!deepEqual(newState, cacheState)) {\n\t\tcacheState = deepClone(newState)\n\n\t\tbiomeSourceCache = await getBiomeSource(state, options)\n\t}\n\treturn {\n\t\tbiomeSource: biomeSourceCache,\n\t} \n}\n\nasync function getBiomeSource(state: any, options: BiomeSourceOptions): Promise<CachedBiomeSource> {\n\tswitch (state?.type?.replace(/^minecraft:/, '')) {\n\t\tcase 'fixed':\n\t\t\treturn new FixedBiome(Identifier.parse(state.biome as string))\n\n\t\tcase 'checkerboard':\n\t\t\tconst shift = (state.scale ?? 2) + 2\n\t\t\tconst numBiomes = state.biomes?.length ?? 0\n\t\t\treturn {\n\t\t\t\tgetBiome(x: number, _y: number, z: number) {\n\t\t\t\t\tconst i = (((x >> shift) + (z >> shift)) % numBiomes + numBiomes) % numBiomes\n\t\t\t\t\treturn Identifier.parse(state.biomes?.[i].node as string)\n\t\t\t\t},\n\t\t\t}\n\n\t\tcase 'multi_noise':\n\t\t\tswitch(state.preset?.replace(/^minecraft:/, '')) {\n\t\t\t\tcase 'nether':\n\t\t\t\t\tstate = checkVersion(options.version, '1.18') ? NetherPreset18 : NetherPreset\n\t\t\t\t\tbreak\n\t\t\t\tcase 'overworld':\n\t\t\t\t\tstate = checkVersion(options.version, '1.18') ? await OverworldPreset18() : state\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tstate = DataModel.unwrapLists(state)\n\t\t\tif (checkVersion(options.version, '1.18')) {\n\t\t\t\tawait loadWasm()\n\t\t\t\tconst BiomeIds = new BiMap<string, number>()\n\t\t\t\tconst param = (p: number | number[]) => {\n\t\t\t\t\treturn typeof p === 'number' ? [p, p] : p\n\t\t\t\t}\n\t\t\t\tconst [t0, t1, h0, h1, c0, c1, e0, e1, w0, w1, d0, d1, o, b] = [[], [], [], [], [], [], [], [], [], [], [], [], [], []] as number[][]\n\t\t\t\tfor (const i of state.biomes) {\n\t\t\t\t\tconst { temperature, humidity, continentalness, erosion, weirdness, depth, offset } = i.parameters\n\t\t\t\t\tt0.push(param(temperature)[0])\n\t\t\t\t\tt1.push(param(temperature)[1])\n\t\t\t\t\th0.push(param(humidity)[0])\n\t\t\t\t\th1.push(param(humidity)[1])\n\t\t\t\t\tc0.push(param(continentalness)[0])\n\t\t\t\t\tc1.push(param(continentalness)[1])\n\t\t\t\t\te0.push(param(erosion)[0])\n\t\t\t\t\te1.push(param(erosion)[1])\n\t\t\t\t\tw0.push(param(weirdness)[0])\n\t\t\t\t\tw1.push(param(weirdness)[1])\n\t\t\t\t\td0.push(param(depth)[0])\n\t\t\t\t\td1.push(param(depth)[1])\n\t\t\t\t\to.push(offset)\n\t\t\t\t\tb.push(BiomeIds.getOrPut(i.biome, Math.floor(Math.random() * 2147483647)))\n\t\t\t\t}\n\t\t\t\tconst parameters = biome_parameters(new Float64Array(t0), new Float64Array(t1), new Float64Array(h0), new Float64Array(h1), new Float64Array(c0), new Float64Array(c1), new Float64Array(e0), new Float64Array(e1), new Float64Array(w0), new Float64Array(w1), new Float64Array(d0), new Float64Array(d1), new Float64Array(o), new Int32Array(b))\n\t\t\t\tconst sampler = climate_sampler(options.seed, options.octaves.temperature.firstOctave, new Float64Array(options.octaves.temperature.amplitudes), options.octaves.humidity.firstOctave, new Float64Array(options.octaves.humidity.amplitudes), options.octaves.continentalness.firstOctave, new Float64Array(options.octaves.continentalness.amplitudes), options.octaves.erosion.firstOctave, new Float64Array(options.octaves.erosion.amplitudes), options.octaves.weirdness.firstOctave, new Float64Array(options.octaves.weirdness.amplitudes), options.octaves.shift.firstOctave, new Float64Array(options.octaves.shift.amplitudes))\n\t\t\t\treturn {\n\t\t\t\t\tgetBiome(x, y, z) {\n\t\t\t\t\t\tconst ids = multi_noise(parameters, sampler, x, x + 1, 1, y, y + 1, 1, z, z + 1, 1)\n\t\t\t\t\t\treturn Identifier.parse(BiomeIds.getA(ids[0]) ?? 'unknown')\n\t\t\t\t\t},\n\t\t\t\t\tgetBiomes(xFrom, xTo, xStep, yFrom, yTo, yStep, zFrom, zTo, zStep) {\n\t\t\t\t\t\tconst ids = multi_noise(parameters, sampler, xFrom, xTo, xStep, yFrom, yTo, yStep, zFrom, zTo, zStep)\n\t\t\t\t\t\treturn [...ids].map(id => Identifier.parse(BiomeIds.getA(id) ?? 'unknown'))\n\t\t\t\t\t},\n\t\t\t\t\tgetClimate(x, y, z) {\n\t\t\t\t\t\tconst climate = climate_noise(sampler, x, x + 1, 1, y, y + 1, 1, z, z + 1, 1)\n\t\t\t\t\t\tconst [t, h, c, e, w] = climate.slice(0, 5)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttemperature: t,\n\t\t\t\t\t\t\thumidity: h,\n\t\t\t\t\t\t\tcontinentalness: c,\n\t\t\t\t\t\t\terosion: e,\n\t\t\t\t\t\t\tweirdness: w,\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tgetClimates(xFrom, xTo, xStep, yFrom, yTo, yStep, zFrom, zTo, zStep) {\n\t\t\t\t\t\tconst climate = climate_noise(sampler, xFrom, xTo, xStep, yFrom, yTo, yStep, zFrom, zTo, zStep)\n\t\t\t\t\t\tconst result = []\n\t\t\t\t\t\tfor (let i = 0; i < climate.length; i += 7) {\n\t\t\t\t\t\t\tconst [t, h, c, e, w] = climate.slice(i, i + 5)\n\t\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\t\ttemperature: t,\n\t\t\t\t\t\t\t\thumidity: h,\n\t\t\t\t\t\t\t\tcontinentalness: c,\n\t\t\t\t\t\t\t\terosion: e,\n\t\t\t\t\t\t\t\tweirdness: w,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst noise = ['altitude', 'temperature', 'humidity', 'weirdness']\n\t\t\t\t\t.map((id, i) => {\n\t\t\t\t\t\tconst config = state[`${id}_noise`]\n\t\t\t\t\t\tconfig.firstOctave = clamp(config.firstOctave ?? -7, -100, -1)\n\t\t\t\t\t\treturn new NormalNoise(new LegacyRandom(options.seed + BigInt(i)), config)\n\t\t\t\t\t})\n\t\t\t\tif (!Array.isArray(state.biomes) || state.biomes.length === 0) {\n\t\t\t\t\treturn new FixedBiome(Identifier.create('unknown'))\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tgetBiome(x: number, _y: number, z: number): Identifier {\n\t\t\t\t\t\tconst n = noise.map(n => n.sample(x, z, 0))\n\t\t\t\t\t\tlet minDist = Infinity\n\t\t\t\t\t\tlet minBiome = ''\n\t\t\t\t\t\tfor (const { biome, parameters: p } of state.biomes) {\n\t\t\t\t\t\t\tconst dist = square(p.altitude - n[0]) + square(p.temperature - n[1]) + square(p.humidity - n[2]) + square(p.weirdness - n[3]) + square(p.offset)\n\t\t\t\t\t\t\tif (dist < minDist) {\n\t\t\t\t\t\t\t\tminDist = dist\n\t\t\t\t\t\t\t\tminBiome = biome\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Identifier.parse(minBiome)\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t}\n\tthrow new Error('Unknown biome source')\n}\n\nfunction getBiomeColor(biome: string, biomeColors: BiomeColors): Triple {\n\tif (!biome) {\n\t\treturn [128, 128, 128]\n\t}\n\tconst color = biomeColors[biome] ?? VanillaColors[biome]\n\tif (color === undefined) {\n\t\treturn stringToColor(biome)\n\t}\n\treturn color\n}\n\nfunction toWorld([x, z]: [number, number], options: BiomeSourceOptions) {\n\tconst xx = (x - options.offset[0] - 100 + options.res / 2) * options.scale\n\tconst zz = (z - options.offset[1] - 100 + options.res / 2) * options.scale\n\treturn [xx, zz]\n}\n\nconst VanillaColors: Record<string, Triple> = {\n\t'minecraft:badlands': [217,69,21],\n\t'minecraft:badlands_plateau': [202,140,101],\n\t'minecraft:bamboo_jungle': [118,142,20],\n\t'minecraft:bamboo_jungle_hills': [59,71,10],\n\t'minecraft:basalt_deltas': [64,54,54],\n\t'minecraft:beach': [250,222,85],\n\t'minecraft:birch_forest': [48,116,68],\n\t'minecraft:birch_forest_hills': [31,95,50],\n\t'minecraft:cold_ocean': [32,32,112],\n\t'minecraft:crimson_forest': [221,8,8],\n\t'minecraft:dark_forest': [64,81,26],\n\t'minecraft:dark_forest_hills': [104,121,66],\n\t'minecraft:deep_cold_ocean': [32,32,56],\n\t'minecraft:deep_frozen_ocean': [64,64,144],\n\t'minecraft:deep_lukewarm_ocean': [0,0,64],\n\t'minecraft:deep_ocean': [0,0,48],\n\t'minecraft:deep_warm_ocean': [0,0,80],\n\t'minecraft:desert': [250,148,24],\n\t'minecraft:desert_hills': [210,95,18],\n\t'minecraft:desert_lakes': [255,188,64],\n\t'minecraft:end_barrens': [128,128,255],\n\t'minecraft:end_highlands': [128,128,255],\n\t'minecraft:end_midlands': [128,128,255],\n\t'minecraft:eroded_badlands': [255,109,61],\n\t'minecraft:flower_forest': [45,142,73],\n\t'minecraft:forest': [5,102,33],\n\t'minecraft:frozen_ocean': [112,112,214],\n\t'minecraft:frozen_river': [160,160,255],\n\t'minecraft:giant_spruce_taiga': [129,142,121],\n\t'minecraft:old_growth_spruce_taiga': [129,142,121],\n\t'minecraft:giant_spruce_taiga_hills': [109,119,102],\n\t'minecraft:giant_tree_taiga': [89,102,81],\n\t'minecraft:old_growth_pine_taiga': [89,102,81],\n\t'minecraft:giant_tree_taiga_hills': [69,79,62],\n\t'minecraft:gravelly_hills': [136,136,136],\n\t'minecraft:gravelly_mountains': [136,136,136],\n\t'minecraft:windswept_gravelly_hills': [136,136,136],\n\t'minecraft:ice_spikes': [180,220,220],\n\t'minecraft:jungle': [83,123,9],\n\t'minecraft:jungle_edge': [98,139,23],\n\t'minecraft:sparse_jungle': [98,139,23],\n\t'minecraft:jungle_hills': [44,66,5],\n\t'minecraft:lukewarm_ocean': [0,0,144],\n\t'minecraft:modified_badlands_plateau': [242,180,141],\n\t'minecraft:modified_gravelly_mountains': [120,152,120],\n\t'minecraft:modified_jungle': [123,163,49],\n\t'minecraft:modified_jungle_edge': [138,179,63],\n\t'minecraft:modified_wooded_badlands_plateau': [216,191,141],\n\t'minecraft:mountain_edge': [114,120,154],\n\t'minecraft:extreme_hills': [96,96,96],\n\t'minecraft:mountains': [96,96,96],\n\t'minecraft:windswept_hills': [96,96,96],\n\t'minecraft:mushroom_field_shore': [160,0,255],\n\t'minecraft:mushroom_fields': [255,0,255],\n\t'minecraft:nether_wastes': [191,59,59],\n\t'minecraft:ocean': [0,0,112],\n\t'minecraft:plains': [141,179,96],\n\t'minecraft:river': [0,0,255],\n\t'minecraft:savanna': [189,178,95],\n\t'minecraft:savanna_plateau': [167,157,100],\n\t'minecraft:shattered_savanna': [229,218,135],\n\t'minecraft:windswept_savanna': [229,218,135],\n\t'minecraft:shattered_savanna_plateau': [207,197,140],\n\t'minecraft:small_end_islands': [128,128,255],\n\t'minecraft:snowy_beach': [250,240,192],\n\t'minecraft:snowy_mountains': [160,160,160],\n\t'minecraft:snowy_taiga': [49,85,74],\n\t'minecraft:snowy_taiga_hills': [36,63,54],\n\t'minecraft:snowy_taiga_mountains': [89,125,114],\n\t'minecraft:snowy_tundra': [255,255,255],\n\t'minecraft:snowy_plains': [255,255,255],\n\t'minecraft:soul_sand_valley': [94,56,48],\n\t'minecraft:stone_shore': [162,162,132],\n\t'minecraft:stony_shore': [162,162,132],\n\t'minecraft:sunflower_plains': [181,219,136],\n\t'minecraft:swamp': [7,249,178],\n\t'minecraft:swamp_hills': [47,255,218],\n\t'minecraft:taiga': [11,102,89],\n\t'minecraft:taiga_hills': [22,57,51],\n\t'minecraft:taiga_mountains': [51,142,129],\n\t'minecraft:tall_birch_forest': [88,156,108],\n\t'minecraft:old_growth_birch_forest': [88,156,108],\n\t'minecraft:tall_birch_hills': [71,135,90],\n\t'minecraft:the_end': [128,128,255],\n\t'minecraft:the_void': [0,0,0],\n\t'minecraft:warm_ocean': [0,0,172],\n\t'minecraft:warped_forest': [73,144,123],\n\t'minecraft:wooded_badlands_plateau': [176,151,101],\n\t'minecraft:wooded_badlands': [176,151,101],\n\t'minecraft:wooded_hills': [34,85,28],\n\t'minecraft:wooded_mountains': [80,112,80],\n\t'minecraft:windswept_forest': [80,112,80],\n\t'minecraft:snowy_slopes': [140, 195, 222],\n\t'minecraft:lofty_peaks': [196, 168, 193],\n\t'minecraft:jagged_peaks': [196, 168, 193],\n\t'minecraft:snowcapped_peaks': [200, 198, 200],\n\t'minecraft:frozen_peaks': [200, 198, 200],\n\t'minecraft:stony_peaks': [82, 92, 103],\n\t'minecraft:grove': [150, 150, 189],\n\t'minecraft:meadow': [169, 197, 80],\n\t'minecraft:lush_caves': [112, 255, 79],\n\t'minecraft:dripstone_caves': [140, 124, 0],\n}\n\nconst NetherPreset = {type:'minecraft:multi_noise',seed:0,altitude_noise:{firstOctave:-7,amplitudes:[1,1]},temperature_noise:{firstOctave:-7,amplitudes:[1,1]},humidity_noise:{firstOctave:-7,amplitudes:[1,1]},weirdness_noise:{firstOctave:-7,amplitudes:[1,1]},biomes:[{biome:'minecraft:nether_wastes',parameters:{altitude:0,temperature:0,humidity:0,weirdness:0,offset:0}},{biome:'minecraft:soul_sand_valley',parameters:{altitude:0,temperature:0,humidity:-0.5,weirdness:0,offset:0}},{biome:'minecraft:crimson_forest',parameters:{altitude:0,temperature:0.4,humidity:0,weirdness:0,offset:0}},{biome:'minecraft:warped_forest',parameters:{altitude:0,temperature:0,humidity:0.5,weirdness:0,offset:0.375}},{biome:'minecraft:basalt_deltas',parameters:{altitude:0,temperature:-0.5,humidity:0,weirdness:0,offset:0.175}}]}\n\nconst NetherPreset18 = {type:'minecraft:multi_noise',biomes:[{biome:'minecraft:nether_wastes',parameters:{temperature:0,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:soul_sand_valley',parameters:{temperature:0,humidity:-0.5,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:crimson_forest',parameters:{temperature:0.4,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:warped_forest',parameters:{temperature:0,humidity:0.5,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0.375}},{biome:'minecraft:basalt_deltas',parameters:{temperature:-0.5,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0.175}}]}\n\nasync function OverworldPreset18() {\n\tconst overworld = await fetchPreset('1.18', 'dimension', 'overworld')\n\treturn overworld.generator.biome_source\n}\n","import { DataModel } from '@mcschema/core'\nimport type { Random } from 'deepslate'\nimport { LegacyRandom, PerlinNoise } from 'deepslate'\nimport type { VersionId } from '../services'\nimport { checkVersion } from '../services'\nimport { clamp, isObject, stringToColor } from '../Utils'\n\ntype BlockPos = [number, number, number]\ntype Placement = [BlockPos, number]\n\ntype PlacementContext = {\n\tplacements: Placement[],\n\tfeatures: string[],\n\trandom: Random,\n\tbiomeInfoNoise: PerlinNoise,\n\tseaLevel: number,\n\tversion: VersionId,\n\tnextFloat(): number,\n\tnextInt(max: number): number,\n\tnextGaussian(): number,\n\tsampleInt(provider: any): number,\n}\n\nconst terrain = [50, 50, 51, 51, 52, 52, 53, 54, 56, 57, 57, 58, 58, 59, 60, 60, 60, 59, 59, 59, 60, 61, 61, 62, 63, 63, 64, 64, 64, 65, 65, 66, 66, 65, 65, 66, 66, 67, 67, 67, 68, 69, 71, 73, 74, 76, 79, 80, 81, 81, 82, 83, 83, 82, 82, 81, 81, 80, 80, 80, 81, 81, 82, 82] \n\nconst featureColors = [\n\t[255, 77, 54],  // red\n\t[59, 118, 255], // blue\n\t[91, 207, 25],  // green\n\t[217, 32, 245], // magenta\n\t[255, 209, 41], // yellow\n\t[52, 204, 209], // cyan\n]\n\nexport type DecoratorOptions = {\n\tsize: [number, number, number],\n\tseed: bigint,\n\tversion: VersionId,\n}\nexport function decorator(state: any, img: ImageData, options: DecoratorOptions) {\n\tconst random = new LegacyRandom(options.seed)\n\tconst ctx: PlacementContext = {\n\t\tplacements: [],\n\t\tfeatures: [],\n\t\trandom,\n\t\tbiomeInfoNoise: new PerlinNoise(random.fork(), 0, [1]),\n\t\tseaLevel: 63,\n\t\tversion: options.version,\n\t\tnextFloat: () => random.nextFloat(),\n\t\tnextInt: (max: number) => random.nextInt(max),\n\t\tnextGaussian: () => Math.sqrt(-2 * Math.log(1 - random.nextFloat())) * Math.cos(2 * Math.PI * random.nextFloat()),\n\t\tsampleInt(value) { return sampleInt(value, this) },\n\t}\n\n\tfor (let x = 0; x < options.size[0] / 16; x += 1) {\n\t\tfor (let z = 0; z < options.size[2] / 16; z += 1) {\n\t\t\tif (checkVersion(options.version, undefined, '1.17')) {\n\t\t\t\tgetPlacements([x * 16, 0, z * 16], DataModel.unwrapLists(state), ctx)\n\t\t\t} else {\n\t\t\t\tmodifyPlacement([x * 16, 0, z * 16], DataModel.unwrapLists(state.placement), ctx)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = img.data\n\timg.data.fill(255)\n\n\tfor (const [pos, feature] of ctx.placements) {\n\t\tif (pos[0] < 0 || pos[1] < 0 || pos[2] < 0 || pos[0] >= options.size[0] || pos[1] >= options.size[1] || pos[2] >= options.size[2]) continue\n\t\tconst i = (pos[2] * (img.width * 4)) + (pos[0] * 4)\n\t\tconst color = feature < featureColors.length ? featureColors[feature] : stringToColor(ctx.features[feature])\n\t\tdata[i] = clamp(50, 205, color[0])\n\t\tdata[i + 1] = clamp(50, 205, color[1])\n\t\tdata[i + 2] = clamp(50, 205, color[2])\n\t\tdata[i + 3] = 255\n\t}\n\n\tfor (let x = 0; x < options.size[0]; x += 1) {\n\t\tfor (let y = 0; y < options.size[2]; y += 1) {\n\t\t\tif ((Math.floor(x / 16) + Math.floor(y / 16)) % 2 === 0) continue\n\t\t\tconst i = (y * (img.width * 4)) + (x * 4)\n\t\t\tfor (let j = 0; j < 3; j += 1) {\n\t\t\t\tdata[i + j] = 0.85 * data[i + j] \n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction normalize(id: string) {\n\treturn id.startsWith('minecraft:') ? id.slice(10) : id\n}\n\nfunction decorateY(pos: BlockPos, y: number): BlockPos[] {\n\treturn [[ pos[0], y, pos[2] ]]\n}\n\nfunction sampleInt(value: any, ctx: PlacementContext): number {\n\tif (typeof value === 'number') {\n\t\treturn value\n\t} else if (value.base) {\n\t\treturn value.base ?? 1 + ctx.nextInt(1 + (value.spread ?? 0))\n\t} else {\n\t\tswitch (normalize(value.type)) {\n\t\t\tcase 'constant': return value.value\n\t\t\tcase 'uniform': return value.value.min_inclusive + ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1)\n\t\t\tcase 'biased_to_bottom': return value.value.min_inclusive + ctx.nextInt(ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1) + 1)\n\t\t\tcase 'clamped': return clamp(ctx.sampleInt(value.value.source), value.value.min_inclusive, value.value.max_inclusive)\n\t\t\tcase 'clamped_normal':\n\t\t\t\tconst normal = value.value.mean + ctx.nextGaussian() * value.value.deviation\n\t\t\t\treturn Math.floor(clamp(value.value.min_inclusive, value.value.max_inclusive, normal))\n\t\t\tcase 'weighted_list':\n\t\t\t\tconst totalWeight = (value.distribution as any[]).reduce<number>((sum, e) => sum + e.weight, 0)\n\t\t\t\tlet i = ctx.nextInt(totalWeight)\n\t\t\t\tfor (const e of value.distribution) {\n\t\t\t\t\ti -= e.weight\n\t\t\t\t\tif (i < 0) return ctx.sampleInt(e.data)\n\t\t\t\t}\n\t\t\t\treturn 0\n\t\t}\n\t\treturn 1\n\t}\n}\n\nfunction resolveAnchor(anchor: any, _ctx: PlacementContext): number {\n\tif (!isObject(anchor)) throw new Error('Invalid vertical anchor')\n\tif (anchor.absolute) return anchor.absolute\n\tif (anchor.above_bottom) return anchor.above_bottom\n\tif (anchor.below_top) return 256 - anchor.below_top\n\tthrow new Error('Invalid vertical anchor')\n}\n\nfunction sampleHeight(height: any, ctx: PlacementContext): number {\n\tif (!isObject(height)) throw new Error('Invalid height provider')\n\tif (typeof height.type !== 'string') {\n\t\treturn resolveAnchor(height, ctx)\n\t}\n\tswitch (normalize(height.type)) {\n\t\tcase 'constant': return resolveAnchor(height.value, ctx)\n\t\tcase 'uniform': {\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\n\t\t\treturn min + ctx.nextInt(max - min + 1)\n\t\t}\n\t\tcase 'biased_to_bottom': {\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\n\t\t\tconst n = ctx.nextInt(max - min - (height.inner ?? 1) + 1)\n\t\t\treturn min + ctx.nextInt(n + (height.inner ?? 1))\n\t\t}\n\t\tcase 'very_biased_to_bottom': {\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\n\t\t\tconst inner = height.inner ?? 1\n\t\t\tconst n1 = min + inner + ctx.nextInt(max - min - inner + 1)\n\t\t\tconst n2 = min + ctx.nextInt(n1 - min)\n\t\t\treturn min + ctx.nextInt(n2 - min + inner)\n\t\t}\n\t\tcase 'trapezoid': {\n\t\t\tconst min = resolveAnchor(height.min_inclusive, ctx)\n\t\t\tconst max = resolveAnchor(height.max_inclusive, ctx)\n\t\t\tconst plateau = height.plateau ?? 0\n\t\t\tif (plateau >= max - min) {\n\t\t\t\treturn min + ctx.nextInt(max - min + 1)\n\t\t\t}\n\t\t\tconst n1 = (max - min - plateau) / 2\n\t\t\tconst n2 = (max - min) - n1\n\t\t\treturn min + ctx.nextInt(n2 + 1) + ctx.nextInt(n1 + 1)\n\t\t}\n\t\tdefault: throw new Error(`Invalid height provider ${height.type}`)\n\t}\n}\n\n// 1.17 and before\nfunction useFeature(s: string, ctx: PlacementContext) {\n\tconst i = ctx.features.indexOf(s)\n\tif (i != -1) return i\n\tctx.features.push(s)\n\treturn ctx.features.length - 1\n}\n\nfunction getPlacements(pos: BlockPos, feature: any, ctx: PlacementContext): void {\n\tif (typeof feature === 'string') {\n\t\tctx.placements.push([pos, useFeature(feature, ctx)])\n\t\treturn\n\t}\n\tconst type = normalize(feature?.type ?? 'no_op')\n\tconst featureFn = Features[type]\n\tif (featureFn) {\n\t\tfeatureFn(feature.config, pos, ctx)\n\t} else {\n\t\tctx.placements.push([pos, useFeature(JSON.stringify(feature), ctx)])\n\t}\n}\n\nfunction getPositions(pos: BlockPos, decorator: any, ctx: PlacementContext): BlockPos[] {\n\tconst type = normalize(decorator?.type ?? 'nope')\n\tconst decoratorFn = Decorators[type]\n\tif (!decoratorFn) {\n\t\treturn [pos]\n\t}\n\treturn decoratorFn(decorator?.config, pos, ctx)\n}\n\nconst Features: {\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => void,\n} = {\n\tdecorated: (config, pos, ctx) => {\n\t\tconst positions = getPositions(pos, config?.decorator, ctx)\n\t\tpositions.forEach(p => getPlacements(p, config?.feature, ctx))\n\t},\n\trandom_boolean_selector: (config, pos, ctx) => {\n\t\tconst feature = ctx.nextFloat() < 0.5 ? config?.feature_true : config?.feature_false\n\t\tgetPlacements(pos, feature, ctx)\n\t},\n\trandom_selector: (config, pos, ctx) => {\n\t\tfor (const f of config?.features ?? []) {\n\t\t\tif (ctx.nextFloat() < (f?.chance ?? 0)) {\n\t\t\t\tgetPlacements(pos, f.feature, ctx)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tgetPlacements(pos, config?.default, ctx)\n\t},\n\tsimple_random_selector: (config, pos, ctx) => {\n\t\tconst feature = config?.features?.[ctx.nextInt(config?.features?.length ?? 0)]\n\t\tgetPlacements(pos, feature, ctx)\n\t},\n}\n\nconst Decorators: {\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => BlockPos[],\n} = {\n\tchance: (config, pos, ctx) => {\n\t\treturn ctx.nextFloat() < 1 / (config?.chance ?? 1) ? [pos] : []\n\t},\n\tcount: (config, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(config?.count ?? 1)).fill(pos)\n\t},\n\tcount_extra: (config, pos, ctx) => {\n\t\tlet count = config?.count ?? 1\n\t\tif (ctx.nextFloat() < config.extra_chance ?? 0){\n\t\t\tcount += config.extra_count ?? 0\n\t\t}\n\t\treturn new Array(count).fill(pos)\n\t},\n\tcount_multilayer: (config, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(config?.count ?? 1)).fill(pos)\n\t\t\t.map(p => [\n\t\t\t\tp[0] + ctx.nextInt(16),\n\t\t\t\tp[1], \n\t\t\t\tp[2] + ctx.nextInt(16),\n\t\t\t])\n\t},\n\tcount_noise: (config, pos, ctx) => {\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / 200, 0, pos[2] / 200)\n\t\tconst count = noise < config.noise_level ? config.below_noise : config.above_noise\n\t\treturn new Array(count).fill(pos)\n\t},\n\tcount_noise_biased: (config, pos, ctx) => {\n\t\tconst factor = Math.max(1, config.noise_factor)\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / factor, 0, pos[2] / factor)\n\t\tconst count = Math.max(0, Math.ceil((noise + (config.noise_offset ?? 0)) * config.noise_to_count_ratio))\n\t\treturn new Array(count).fill(pos)\n\t},\n\tdark_oak_tree: (_config, pos, ctx) => {\n\t\treturn [...new Array(16)].map((_, i) => {\n\t\t\tconst x = Math.floor(i / 4) * 4 + 1 + ctx.nextInt(3) + pos[0]\n\t\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, x)])\n\t\t\tconst z = Math.floor(i % 4) * 4 + 1 + ctx.nextInt(3) + pos[2]\n\t\t\treturn [x, y, z]\n\t\t})\n\t},\n\tdecorated: (config, pos, ctx) => {\n\t\treturn getPositions(pos, config?.outer, ctx).flatMap(p => {\n\t\t\treturn getPositions(p, config?.inner, ctx)\n\t\t})\n\t},\n\tdepth_average: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(config?.spread ?? 0) + ctx.nextInt(config?.spread ?? 0) - (config.spread ?? 0) + (config?.baseline ?? 0)\n\t\treturn decorateY(pos, y)\n\t},\n\temerald_ore: (_config, pos, ctx) => {\n\t\tconst count = 3 + ctx.nextInt(6)\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\t4 + ctx.nextInt(28),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\tfire: (config, pos, ctx) => {\n\t\tconst count = 1 + ctx.nextInt(ctx.nextInt(ctx.sampleInt(config?.count)))\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tctx.nextInt(128),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\tglowstone: (config, pos, ctx) => {\n\t\tconst count = ctx.nextInt(1 + ctx.nextInt(ctx.sampleInt(config?.count)))\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tctx.nextInt(128),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\theightmap: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, y)\n\t},\n\theightmap_spread_double: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, ctx.nextInt(y * 2))\n\t},\n\theightmap_world_surface: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, y)\n\t},\n\ticeberg: (_config, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + 4 + ctx.nextInt(8),\n\t\t\tpos[1],\n\t\t\tpos[2] + 4 + ctx.nextInt(8),\n\t\t]]\n\t},\n\tlava_lake: (config, pos, ctx) => {\n\t\tif (ctx.nextInt((config.chance ?? 1) / 10) === 0) {\n\t\t\tconst y = ctx.nextInt(ctx.nextInt(256 - 8) + 8)\n\t\t\tif (y < ctx.seaLevel || ctx.nextInt((config?.chance ?? 1) / 8) == 0) {\n\t\t\t\tconst x = ctx.nextInt(16) + pos[0]\n\t\t\t\tconst z = ctx.nextInt(16) + pos[2]\n\t\t\t\treturn [[x, y, z]]\n\t\t\t}\n\t\t}\n\t\treturn []\n\t},\n\tnope: (_config, pos) => {\n\t\treturn [pos]\n\t},\n\trange: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)\n\t\treturn decorateY(pos, y)\n\t},\n\trange_biased: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0))\n\t\treturn decorateY(pos, y)\n\t},\n\trange_very_biased: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)) + (config?.bottom_offset ?? 0))\n\t\treturn decorateY(pos, y)\n\t},\n\tspread_32_above: (_config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(pos[1] + 32)\n\t\treturn decorateY(pos, y)\n\t},\n\ttop_solid_heightmap: (_config, pos) => {\n\t\tconst y = terrain[clamp(0, 63, pos[0])]\n\t\treturn decorateY(pos, y)\n\t},\n\tmagma: (_config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(pos[1] + 32)\n\t\treturn decorateY(pos, y)\n\t},\n\tsquare: (_config, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tpos[1],\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t]]\n\t},\n\tsurface_relative_threshold: (config, pos) => {\n\t\tconst height = terrain[clamp(0, 63, pos[0])]\n\t\tconst min = height + (config?.min_inclusive ?? -Infinity)\n\t\tconst max = height + (config?.max_inclusive ?? Infinity)\n\t\treturn (pos[1] < min || pos[1] > max) ? [pos] : []\n\t},\n\twater_lake: (config, pos, ctx) => {\n\t\tif (ctx.nextInt(config.chance ?? 1) === 0) {\n\t\t\treturn [[\n\t\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\t\tctx.nextInt(256),\n\t\t\t\tpos[2] + ctx.nextInt(16),\n\t\t\t]]\n\t\t}\n\t\treturn []\n\t},\n}\n\n// 1.18 and after\nfunction modifyPlacement(pos: BlockPos, placement: any[], ctx: PlacementContext) {\n\tlet positions = [pos]\n\tfor (const modifier of placement) {\n\t\tconst modifierFn = PlacementModifiers[normalize(modifier?.type ?? 'nope')]\n\t\tif (!modifierFn) continue\n\t\tpositions = positions.flatMap(pos =>\n\t\t\tPlacementModifiers[normalize(modifier.type)](modifier, pos, ctx)\n\t\t)\n\t}\n\tfor (const pos of positions) {\n\t\tctx.placements.push([pos, 0])\n\t}\n}\n\nconst PlacementModifiers: {\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => BlockPos[],\n} = {\n\tcount: ({ count }, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(count ?? 1)).fill(pos)\n\t},\n\tcount_on_every_layer: ({ count }, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(count ?? 1)).fill(pos)\n\t\t\t.map(p => [\n\t\t\t\tp[0] + ctx.nextInt(16),\n\t\t\t\tp[1], \n\t\t\t\tp[2] + ctx.nextInt(16),\n\t\t\t])\n\t},\n\tenvironment_scan: ({}, pos) => {\n\t\treturn [pos]\n\t},\n\theight_range: ({ height }, pos, ctx) => {\n\t\treturn decorateY(pos, sampleHeight(height, ctx))\n\t},\n\theightmap: ({}, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, y)\n\t},\n\tin_square: ({}, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tpos[1],\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t]]\n\t},\n\tnoise_based_count: ({ noise_to_count_ratio, noise_factor, noise_offset }, pos, ctx) => {\n\t\tconst factor = Math.max(1, noise_factor)\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / factor, 0, pos[2] / factor)\n\t\tconst count = Math.max(0, Math.ceil((noise + (noise_offset ?? 0)) * noise_to_count_ratio))\n\t\treturn new Array(count).fill(pos)\n\t},\n\tnoise_threshold_count: ({ noise_level, below_noise, above_noise }, pos, ctx) => {\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / 200, 0, pos[2] / 200)\n\t\tconst count = noise < noise_level ? below_noise : above_noise\n\t\treturn new Array(count).fill(pos)\n\t},\n\trandom_offset: ({ xz_spread, y_spread }, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + ctx.sampleInt(xz_spread),\n\t\t\tpos[1] + ctx.sampleInt(y_spread),\n\t\t\tpos[2] + ctx.sampleInt(xz_spread),\n\t\t]]\n\t},\n\trarity_filter: ({ chance }, pos, ctx) => {\n\t\treturn ctx.nextFloat() < 1 / (chance ?? 1) ? [pos] : []\n\t},\n}\n","import { LegacyRandom, PerlinNoise } from 'deepslate'\nimport { clampedLerp, lerp2 } from '../../Utils'\n\nexport class NoiseChunkGenerator {\n\tprivate readonly minLimitPerlinNoise: PerlinNoise\n\tprivate readonly maxLimitPerlinNoise: PerlinNoise\n\tprivate readonly mainPerlinNoise: PerlinNoise\n\tprivate readonly depthNoise: PerlinNoise\n\n\tprivate settings: any = {}\n\tprivate chunkWidth: number = 4\n\tprivate chunkHeight: number = 4\n\tprivate chunkCountY: number = 32\n\tprivate biomeDepth: number = 0.1\n\tprivate biomeScale: number = 0.2\n\n\tprivate noiseColumnCache: (number[] | null)[] = []\n\tprivate xOffset: number = 0\n\n\tconstructor(seed: bigint) {\n\t\tconst random = new LegacyRandom(seed)\n\t\tthis.minLimitPerlinNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.maxLimitPerlinNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.mainPerlinNoise = new PerlinNoise(random, -7, [1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.depthNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t}\n\n\tpublic reset(settings: any, depth: number, scale: number, xOffset: number, width: number) {\n\t\tthis.settings = settings\n\t\tthis.chunkWidth = settings.size_horizontal * 4\n\t\tthis.chunkHeight = settings.size_vertical * 4\n\t\tthis.chunkCountY = Math.floor(settings.height / this.chunkHeight)\n\n\t\tif (settings.amplified && depth > 0) {\n\t\t\tdepth = 1 + depth * 2\n\t\t\tscale = 1 + scale * 4\n\t\t}\n\t\tthis.biomeDepth = 0.265625 * (depth * 0.5 - 0.125)\n\t\tthis.biomeScale = 96.0 / (scale * 0.9 + 0.1)\n\n\t\tthis.noiseColumnCache = Array(width).fill(null)\n\t\tthis.xOffset = xOffset\n\t}\n  \n\tpublic iterateNoiseColumn(x: number): number[] {\n\t\tconst data = Array(this.chunkCountY * this.chunkHeight)\n\t\tconst cx = Math.floor(x / this.chunkWidth)\n\t\tconst ox = Math.floor(x % this.chunkWidth) / this.chunkWidth\n\t\tconst noise1 = this.fillNoiseColumn(cx)\n\t\tconst noise2 = this.fillNoiseColumn(cx + 1)\n\n\t\tfor (let y = this.chunkCountY - 1; y >= 0; y -= 1) {\n\t\t\tfor (let yy = this.chunkHeight; yy >= 0; yy -= 1) {\n\t\t\t\tconst oy = yy / this.chunkHeight\n\t\t\t\tconst i = y * this.chunkHeight + yy\n\t\t\t\tdata[i] = lerp2(oy, ox, noise1[y], noise1[y+1], noise2[y], noise2[y+1])\n\t\t\t}\n\t\t}\n\t\treturn data\n\t}\n\n\tprivate fillNoiseColumn(x: number): number[] {\n\t\tconst cachedColumn = this.noiseColumnCache[x - this.xOffset]\n\t\tif (cachedColumn) return cachedColumn\n\n\t\tconst data = Array(this.chunkCountY + 1)\n\n\t\tconst xzScale = 684.412 * this.settings.sampling.xz_scale\n\t\tconst yScale = 684.412 * this.settings.sampling.y_scale\n\t\tconst xzFactor = xzScale / this.settings.sampling.xz_factor\n\t\tconst yFactor = yScale / this.settings.sampling.y_factor\n\t\tconst randomDensity = this.settings.random_density_offset ? this.getRandomDensity(x) : 0\n\n\t\tfor (let y = 0; y <= this.chunkCountY; y += 1) {\n\t\t\tlet noise = this.sampleAndClampNoise(x, y, this.mainPerlinNoise.getOctaveNoise(0)!.zo, xzScale, yScale, xzFactor, yFactor)\n\t\t\tconst yOffset = 1 - y * 2 / this.chunkCountY + randomDensity\n\t\t\tconst density = yOffset * this.settings.density_factor + this.settings.density_offset\n\t\t\tconst falloff = (density + this.biomeDepth) * this.biomeScale\n\t\t\tnoise += falloff * (falloff > 0 ? 4 : 1)\n\n\t\t\tif (this.settings.top_slide.size > 0) {\n\t\t\t\tnoise = clampedLerp(\n\t\t\t\t\tthis.settings.top_slide.target,\n\t\t\t\t\tnoise,\n\t\t\t\t\t(this.chunkCountY - y - (this.settings.top_slide.offset)) / (this.settings.top_slide.size)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (this.settings.bottom_slide.size > 0) {\n\t\t\t\tnoise = clampedLerp(\n\t\t\t\t\tthis.settings.bottom_slide.target,\n\t\t\t\t\tnoise,\n\t\t\t\t\t(y - (this.settings.bottom_slide.offset)) / (this.settings.bottom_slide.size)\n\t\t\t\t)\n\t\t\t}\n\t\t\tdata[y] = noise\n\t\t}\n\n\t\tthis.noiseColumnCache[x - this.xOffset] = data\n\t\treturn data\n\t}\n\n\tprivate getRandomDensity(x: number): number {\n\t\tconst noise = this.depthNoise.sample(x * 200, 10, this.depthNoise.getOctaveNoise(0)!.zo, 1, 0, true)\n\t\tconst a = (noise < 0) ? -noise * 0.3 : noise\n\t\tconst b = a * 24.575625 - 2\n\t\treturn (b < 0) ? b * 0.009486607142857142 : Math.min(b, 1) * 0.006640625\n\t}\n\n\tprivate sampleAndClampNoise(x: number, y: number, z: number, xzScale: number, yScale: number, xzFactor: number, yFactor: number): number {\n\t\tlet a = 0\n\t\tlet b = 0\n\t\tlet c = 0\n\t\tlet d = 1\n\n\t\tfor (let i = 0; i < 16; i += 1) {\n\t\t\tconst x2 = PerlinNoise.wrap(x * xzScale * d)\n\t\t\tconst y2 = PerlinNoise.wrap(y * yScale * d)\n\t\t\tconst z2 = PerlinNoise.wrap(z * xzScale * d)\n\t\t\tconst e = yScale * d\n\n\t\t\tconst minLimitNoise = this.minLimitPerlinNoise.getOctaveNoise(i)\n\t\t\tif (minLimitNoise) {\n\t\t\t\ta += minLimitNoise.sample(x2, y2, z2, e, y * e) / d\n\t\t\t}\n\n\t\t\tconst maxLimitNoise = this.maxLimitPerlinNoise.getOctaveNoise(i)\n\t\t\tif (maxLimitNoise) {\n\t\t\t\tb += maxLimitNoise.sample(x2, y2, z2, e, y * e) / d\n\t\t\t}\n\n\t\t\tif (i < 8) {\n\t\t\t\tconst mainNoise = this.mainPerlinNoise.getOctaveNoise(i)\n\t\t\t\tif (mainNoise) {\n\t\t\t\t\tc += mainNoise.sample(\n\t\t\t\t\t\tPerlinNoise.wrap(x * xzFactor * d),\n\t\t\t\t\t\tPerlinNoise.wrap(y * yFactor * d),\n\t\t\t\t\t\tPerlinNoise.wrap(z * xzFactor * d),\n\t\t\t\t\t\tyFactor * d,\n\t\t\t\t\t\ty * yFactor * d \n\t\t\t\t\t) / d\n\t\t\t\t}\n\t\t\t}\n\n\t\t\td /= 2\n\t\t}\n\n\t\treturn clampedLerp(a / 512, b / 512, (c / 10 + 1) / 2)\n\t}\n}\n","import { DataModel } from '@mcschema/core'\nimport type { BlockState } from 'deepslate'\nimport { BlockPos, Chunk, ChunkPos, clampedMap, DensityFunction, FixedBiome, Identifier, NoiseChunkGenerator, NoiseGeneratorSettings, NoiseParameters, NoiseRouter, NoiseSettings, Registry, WorldgenRegistries, XoroshiroRandom } from 'deepslate'\nimport * as deepslate18 from 'deepslate-1.18'\nimport type { VersionId } from '../services'\nimport { checkVersion, fetchAllPresets } from '../services'\nimport { deepClone, deepEqual } from '../Utils'\nimport { NoiseChunkGenerator as OldNoiseChunkGenerator } from './noise/NoiseChunkGenerator'\n\nexport type NoiseSettingsOptions = {\n\tbiome?: string,\n\tbiomeScale?: number,\n\tbiomeDepth?: number,\n\toffset: number,\n\twidth: number,\n\tseed: bigint,\n\tversion: VersionId,\n}\n\nconst Z = 0\n\nconst colors: Record<string, [number, number, number]> = {\n\t'minecraft:air': [150, 160, 170],\n\t'minecraft:water': [20, 80, 170],\n\t'minecraft:lava': [200, 100, 0],\n\t'minecraft:stone': [55, 55, 55],\n\t'minecraft:deepslate': [34, 34, 36],\n\t'minecraft:bedrock': [10, 10, 10],\n\t'minecraft:grass_block': [47, 120, 23],\n\t'minecraft:dirt': [64, 40, 8],\n\t'minecraft:gravel': [70, 70, 70],\n\t'minecraft:sand': [196, 180, 77],\n\t'minecraft:sandstone': [148, 135, 52],\n\t'minecraft:netherrack': [100, 40, 40],\n\t'minecraft:crimson_nylium': [144, 22, 22],\n\t'minecraft:warped_nylium': [28, 115, 113],\n\t'minecraft:basalt': [73, 74, 85],\n\t'minecraft:end_stone': [200, 200, 140],\n}\n\nlet cacheState: any\nlet generatorCache: NoiseChunkGenerator\nlet chunkCache: Chunk[] = []\nconst registryCache = new Map<VersionId, Registry<Registry<any>>>()\n\nexport async function noiseSettings(state: any, img: ImageData, options: NoiseSettingsOptions) {\n\tif (checkVersion(options.version, '1.18')) {\n\t\tif (checkVersion(options.version, '1.18.2')) {\n\t\t\tawait initRegistries(options.version)\n\t\t}\n\n\t\tconst { settings, generator } = getCached(state, options)\n\n\t\tconst slice = new LevelSlice(-options.offset, options.width, settings.noise.minY, settings.noise.height)\n\t\tslice.generate(generator, options.biome)\n\n\t\tconst data = img.data\n\t\tfor (let x = 0; x < options.width; x += 1) {\n\t\t\tfor (let y = 0; y < settings.noise.height; y += 1) {\n\t\t\t\tconst i = x * 4 + (settings.noise.height-y-1) * 4 * img.width\n\t\t\t\tconst state = slice.getBlockState([x - options.offset, y + settings.noise.minY, Z])\n\t\t\t\tconst color = colors[state.getName().toString()] ?? [0, 0, 0]\n\t\t\t\tdata[i] = color[0]\n\t\t\t\tdata[i + 1] = color[1]\n\t\t\t\tdata[i + 2] = color[2]\n\t\t\t\tdata[i + 3] = 255\n\t\t\t}\n\t\t}\n\t\treturn\n\t}\n\n\tconst generator = new OldNoiseChunkGenerator(options.seed)\n\tgenerator.reset(state.noise, options.biomeDepth ?? 0, options.biomeScale ?? 0, options.offset, options.width)\n\tconst data = img.data\n\tconst row = img.width * 4\n\tfor (let x = 0; x < options.width; x += 1) {\n\t\tconst noise = generator.iterateNoiseColumn(x - options.offset).reverse()\n\t\tfor (let y = 0; y < state.noise.height; y += 1) {\n\t\t\tconst i = y * row + x * 4\n\t\t\tconst color = getColor(noise, y)\n\t\t\tdata[i] = color\n\t\t\tdata[i + 1] = color\n\t\t\tdata[i + 2] = color\n\t\t\tdata[i + 3] = 255\n\t\t}\n\t}\n}\n\nexport function getNoiseBlock(x: number, y: number) {\n\tconst chunk = chunkCache.find(c => ChunkPos.minBlockX(c.pos) <= x && ChunkPos.maxBlockX(c.pos) >= x)\n\tif (!chunk) {\n\t\treturn undefined\n\t}\n\treturn chunk.getBlockState(BlockPos.create(x, y, Z))\n}\n\nexport async function densityFunction(state: any, img: ImageData, options: NoiseSettingsOptions) {\n\tconst { fn, settings } = await createDensityFunction(state, options)\n\n\tconst arr = Array(options.width * settings.height)\n\tlet min = Infinity\n\tlet max = -Infinity\n\tfor (let x = 0; x < options.width; x += 1) {\n\t\tfor (let y = 0; y < settings.height; y += 1) {\n\t\t\tconst i = x + (settings.height-y-1) * options.width\n\t\t\tconst density = fn.compute(DensityFunction.context(x - options.offset, y, 0))\n\t\t\tmin = Math.min(min, density)\n\t\t\tmax = Math.max(max, density)\n\t\t\tarr[i] = density\n\t\t}\n\t}\n\n\tconst data = img.data\n\tfor (let i = 0; i < options.width * settings.height; i += 1) {\n\t\tconst color = Math.floor(clampedMap(arr[i], min, max, 0, 256))\n\t\tdata[4 * i] = color\n\t\tdata[4 * i + 1] = color\n\t\tdata[4 * i + 2] = color\n\t\tdata[4 * i + 3] = 255\n\t}\n}\n\nasync function createDensityFunction(state: any, options: NoiseSettingsOptions) {\n\tawait initRegistries(options.version)\n\n\tconst random = XoroshiroRandom.create(options.seed).forkPositional()\n\tconst settings = NoiseSettings.fromJson({\n\t\tmin_y: -64,\n\t\theight: 384,\n\t\tsize_horizontal: 1,\n\t\tsize_vertical: 2,\n\t\tsampling: { xz_scale: 1, y_scale: 1, xz_factor: 80, y_factor: 160 },\n\t\tbottom_slide: { target: 0.1171875, size: 3, offset: 0 },\n\t\ttop_slide: { target: -0.078125, size: 2, offset: 8 },\n\t\tterrain_shaper: { offset: 0.044, factor: 4, jaggedness: 0 },\n\t})\n\tconst originalFn = DensityFunction.fromJson(state)\n\tconst fn = originalFn.mapAll(new NoiseRouter.Visitor(random, settings))\n\n\treturn {\n\t\tfn,\n\t\tsettings,\n\t}\n}\n\nconst Registries: [string, { fromJson(obj: unknown): any}][] = [\n\t['worldgen/noise', NoiseParameters],\n\t['worldgen/density_function', DensityFunction],\n]\n\nasync function initRegistries(version: VersionId) {\n\tconst rootRegistries = registryCache.get(version) ?? new Registry(new Identifier('misode', 'temp'))\n\tif (!registryCache.has(version)) {\n\t\tawait Promise.all(Registries.map(([id, c]) => fetchRegistry(version, rootRegistries, id, c)))\n\t\tregistryCache.set(version, rootRegistries)\n\t}\n\tWorldgenRegistries.DENSITY_FUNCTION.clear().assign(rootRegistries.getOrThrow(Identifier.create('worldgen/density_function')))\n\tWorldgenRegistries.NOISE.clear().assign(rootRegistries.getOrThrow(Identifier.create('worldgen/noise')))\n}\n\nasync function fetchRegistry<T extends { fromJson(obj: unknown): T }>(version: VersionId, root: Registry<Registry<unknown>>, id: string, clazz: T) {\n\tconst entries = await fetchAllPresets(version, id)\n\tconst registry = new Registry<typeof clazz>(Identifier.create(id))\n\tfor (const [key, value] of entries.entries()) {\n\t\tregistry.register(Identifier.parse(key), clazz.fromJson(value))\n\t}\n\troot.register(registry.key, registry)\n}\n\nfunction getCached(state: unknown, options: NoiseSettingsOptions) {\n\tconst settings = NoiseGeneratorSettings.fromJson(DataModel.unwrapLists(state))\n\n\tconst newState = [state, `${options.seed}`, options.biome]\n\tif (!deepEqual(newState, cacheState)) {\n\t\tcacheState = deepClone(newState)\n\t\tchunkCache = []\n\t\tif (checkVersion(options.version, '1.18.2')) {\n\t\t\tconst biomeSource = new FixedBiome(Identifier.create('unknown'))\n\t\t\tgeneratorCache = new NoiseChunkGenerator(options.seed, biomeSource, settings)\n\t\t} else {\n\t\t\tconst biomeSource = new deepslate18.FixedBiome('unknown')\n\t\t\tgeneratorCache = new deepslate18.NoiseChunkGenerator(options.seed, biomeSource, settings as any) as any\n\t\t}\n\t}\n\treturn {\n\t\tsettings,\n\t\tgenerator: generatorCache,\n\t}\n}\n\nfunction getColor(noise: number[], y: number): number {\n\tif (noise[y] > 0) {\n\t\treturn 0\n\t}\n\tif (noise[y+1] > 0) {\n\t\treturn 150\n\t}\n\treturn 255\n}\n\nclass LevelSlice {\n\tprivate readonly chunks: Chunk[]\n\tprivate readonly done: boolean[]\n\n\tconstructor(\n\t\tprivate readonly minX: number,\n\t\twidth: number,\n\t\tminY: number,\n\t\theight: number,\n\t) {\n\t\tthis.done = []\n\t\tthis.chunks = [...Array(Math.ceil(width / 16) + 1)]\n\t\t\t.map((_, i) => {\n\t\t\t\tconst x = (minX >> 4) + i\n\t\t\t\tconst cached = chunkCache.find(c => c.pos[0] === x)\n\t\t\t\tif (cached) {\n\t\t\t\t\tthis.done[i] = true\n\t\t\t\t\treturn cached\n\t\t\t\t}\n\t\t\t\treturn new Chunk(minY, height, ChunkPos.create(x, Z >> 4))\n\t\t\t})\n\t}\n\n\tpublic generate(generator: NoiseChunkGenerator, forcedBiome?: string) {\n\t\tthis.chunks.forEach((chunk, i) => {\n\t\t\tif (!this.done[i]) {\n\t\t\t\tgenerator.fill(chunk, true)\n\t\t\t\tgenerator.buildSurface(chunk, forcedBiome)\n\t\t\t\tthis.done[i] = true\n\t\t\t\tchunkCache.push(chunk)\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic getBlockState(pos: BlockPos): BlockState {\n\t\tconst chunkIndex = (pos[0] >> 4) - (this.minX >> 4)\n\t\treturn this.chunks[chunkIndex].getBlockState(pos)\n\t}\n}\n","import { Path } from '@mcschema/core'\nimport type { NoiseParameters } from 'deepslate'\nimport { useEffect, useMemo, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn, BtnMenu } from '..'\nimport { useLocale } from '../../contexts'\nimport { useCanvas } from '../../hooks'\nimport { biomeMap, getBiome } from '../../previews'\nimport { newSeed, randomSeed } from '../../Utils'\n\nconst LAYERS = ['biomes', 'temperature', 'humidity', 'continentalness', 'erosion', 'weirdness'] as const\n\nexport const BiomeSourcePreview = ({ model, data, shown, version }: PreviewProps) => {\n\tconst { locale } = useLocale()\n\tconst [configuredSeed] = useState(randomSeed())\n\tconst [scale, setScale] = useState(2)\n\tconst [focused, setFocused] = useState<{[k: string]: number | string} | undefined>(undefined)\n\tconst [layers, setLayers] = useState(new Set<typeof LAYERS[number]>(['biomes']))\n\tconst offset = useRef<[number, number]>([0, 0])\n\tconst res = useRef(1)\n\tconst refineTimeout = useRef<number>(undefined)\n\n\tconst seed = BigInt(model.get(new Path(['generator', 'seed'])) ?? configuredSeed)\n\tconst octaves = useMemo(() => {\n\t\tif (!shown) return undefined\n\t\treturn getOctaves(model.get(new Path(['generator', 'settings'])))\n\t}, [shown])\n\tconst state = shown ? calculateState(data, octaves!) : ''\n\tconst type: string = data.type?.replace(/^minecraft:/, '')\n\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [200 / res.current, 200 / res.current]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { octaves: octaves!, biomeColors: {}, layers, offset: offset.current, scale, seed, res: res.current, version }\n\t\t\tawait biomeMap(data, img, options)\n\t\t\tif (res.current === 4) {\n\t\t\t\tclearTimeout(refineTimeout.current)\n\t\t\t\trefineTimeout.current = setTimeout(() => {\n\t\t\t\t\tres.current = 1\n\t\t\t\t\tredraw()\n\t\t\t\t}, 150) as any\n\t\t\t}\n\t\t},\n\t\tasync onDrag(dx, dy) {\n\t\t\toffset.current[0] = offset.current[0] + dx * 200\n\t\t\toffset.current[1] = offset.current[1] + dy * 200\n\t\t\tclearTimeout(refineTimeout.current)\n\t\t\tres.current = type === 'multi_noise' ? 4 : 1\n\t\t\tredraw()\n\t\t},\n\t\tasync onHover(x, y) {\n\t\t\tconst options = { octaves: octaves!, biomeColors: {}, layers, offset: offset.current, scale, seed: configuredSeed, res: 1, version }\n\t\t\tconst biome = await getBiome(data, Math.floor(x * 200), Math.floor(y * 200), options)\n\t\t\tsetFocused(biome)\n\t\t},\n\t\tonLeave() {\n\t\t\tsetFocused(undefined)\n\t\t},\n\t}, [state, scale, configuredSeed, layers])\n\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tres.current = type === 'multi_noise' ? 4 : 1\n\t\t\tredraw()\n\t\t}\n\t}, [state, scale, configuredSeed, layers, shown])\n\n\tconst changeScale = (newScale: number) => {\n\t\toffset.current[0] = offset.current[0] * scale / newScale\n\t\toffset.current[1] = offset.current[1] * scale / newScale\n\t\tsetScale(newScale)\n\t}\n\n\treturn <>\n\t\t<div class=\"controls preview-controls\">\n\t\t\t{focused && <Btn label={focused.biome as string} class=\"no-pointer\" />}\n\t\t\t{type === 'multi_noise' &&\n\t\t\t\t<BtnMenu icon=\"stack\" tooltip={locale('configure_layers')}>\n\t\t\t\t\t{LAYERS.map(name => {\n\t\t\t\t\t\tconst enabled = layers.has(name)\n\t\t\t\t\t\treturn <Btn label={locale(`layer.${name}`)} \n\t\t\t\t\t\t\tactive={enabled}\n\t\t\t\t\t\t\ttooltip={enabled ? locale('enabled') : locale('disabled')}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tsetLayers(new Set([name]))\n\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t}} />\n\t\t\t\t\t})}\n\t\t\t\t</BtnMenu>}\n\t\t\t{(type === 'multi_noise' || type === 'checkerboard') && <>\n\t\t\t\t<Btn icon=\"dash\" tooltip={locale('zoom_out')}\n\t\t\t\t\tonClick={() => changeScale(scale * 1.5)} />\n\t\t\t\t<Btn icon=\"plus\" tooltip={locale('zoom_in')}\n\t\t\t\t\tonClick={() => changeScale(scale / 1.5)} />\n\t\t\t</>}\n\t\t\t{type === 'multi_noise' &&\n\t\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\n\t\t\t\t\tonClick={() => newSeed(model)} />}\n\t\t</div>\n\t\t{focused?.temperature !== undefined && <div class=\"controls secondary-controls\">\n\t\t\t<Btn class=\"no-pointer\" label={Object.entries(focused)\n\t\t\t\t.filter(([k]) => k !== 'biome')\n\t\t\t\t.map(([k, v]) => `${k[0].toUpperCase()}: ${(v as number).toFixed(2)}`).join('  ')}/>\n\t\t</div>}\n\t\t<canvas ref={canvas} width=\"200\" height=\"200\"></canvas>\n\t</>\n}\n\nfunction calculateState(data: any, octaves: Record<string, NoiseParameters>) {\n\treturn JSON.stringify([data, octaves])\n}\n\nexport function getOctaves(obj: any): Record<string, NoiseParameters> {\n\tif (typeof obj !== 'string') {\n\t\tobj = obj.legacy_random_source ? 'minecraft:nether' : 'minecraft:overworld'\n\t}\n\tswitch (obj.replace(/^minecraft:/, '')) {\n\t\tcase 'overworld':\n\t\tcase 'amplified':\n\t\t\treturn {\n\t\t\t\ttemperature: { firstOctave: -9, amplitudes: [1.5, 0, 1, 0, 0, 0] },\n\t\t\t\thumidity: { firstOctave: -7, amplitudes: [1, 1, 0, 0, 0, 0] },\n\t\t\t\tcontinentalness: { firstOctave: -9, amplitudes: [1, 1, 2, 2, 2, 1, 1, 1, 1] },\n\t\t\t\terosion: { firstOctave: -9, amplitudes: [1, 1, 0, 1, 1] },\n\t\t\t\tweirdness: { firstOctave: -7, amplitudes: [1, 2, 1, 0, 0, 0] },\n\t\t\t\tshift: { firstOctave: -3, amplitudes: [1, 1, 1, 0] },\n\t\t\t}\n\t\tcase 'end':\n\t\tcase 'floating_islands':\n\t\t\treturn {\n\t\t\t\ttemperature: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\thumidity: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\tcontinentalness: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\terosion: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\tweirdness: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\tshift: { firstOctave: 0, amplitudes: [0] },\n\t\t\t}\n\t\tdefault:\n\t\t\treturn {\n\t\t\t\ttemperature: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\thumidity: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\tcontinentalness: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\terosion: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\tweirdness: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\tshift: { firstOctave: 0, amplitudes: [0] },\n\t\t\t}\n\t}\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn } from '..'\nimport { useLocale } from '../../contexts'\nimport { useCanvas } from '../../hooks'\nimport { decorator } from '../../previews'\nimport { randomSeed } from '../../Utils'\n\nexport const DecoratorPreview = ({ data, version, shown }: PreviewProps) => {\n\tconst { locale } = useLocale()\n\tconst [scale, setScale] = useState(4)\n\tconst [seed, setSeed] = useState(randomSeed())\n\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [scale * 16, scale * 16]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tdecorator(data, img, { seed, version, size: [scale * 16, 128, scale * 16] })\n\t\t},\n\t})\n\n\tconst state = JSON.stringify(data)\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tredraw()\n\t\t}\n\t}, [state, scale, seed, shown])\n\n\treturn <>\n\t\t<div class=\"controls preview-controls\">\n\t\t\t<Btn icon=\"dash\" tooltip={locale('zoom_out')}\n\t\t\t\tonClick={() => setScale(Math.min(16, scale + 1))} />\n\t\t\t<Btn icon=\"plus\" tooltip={locale('zoom_in')}\n\t\t\t\tonClick={() => setScale(Math.max(1, scale - 1))} />\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width=\"64\" height=\"64\"></canvas>\n\t</>\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn, BtnMenu } from '..'\nimport { useLocale } from '../../contexts'\nimport { useCanvas } from '../../hooks'\nimport { densityFunction } from '../../previews'\nimport { randomSeed } from '../../Utils'\n\nexport const DensityFunctionPreview = ({ data, shown, version }: PreviewProps) => {\n\tconst { locale } = useLocale()\n\tconst [seed, setSeed] = useState(randomSeed())\n\tconst [autoScroll, setAutoScroll] = useState(false)\n\tconst [focused, setFocused] = useState<string | undefined>(undefined)\n\tconst offset = useRef(0)\n\tconst scrollInterval = useRef<number | undefined>(undefined)\n\tconst state = JSON.stringify([data])\n\n\tconst size = data?.noise?.height ?? 256\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [size, size]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { offset: offset.current, width: img.width, seed, version }\n\t\t\tawait densityFunction(data, img, options)\n\t\t},\n\t\tasync onDrag(dx) {\n\t\t\toffset.current += dx * size\n\t\t\tredraw()\n\t\t},\n\t\tasync onHover(x, y) {\n\t\t\tconst worldX = Math.floor(x * size - offset.current)\n\t\t\tconst worldY = size - Math.max(1, Math.ceil(y * size)) + (data?.noise?.min_y ?? 0)\n\t\t\tsetFocused(`X=${worldX} Y=${worldY}`)\n\t\t},\n\t\tonLeave() {\n\t\t\tsetFocused(undefined)\n\t\t},\n\t}, [state, seed])\n\n\tuseEffect(() => {\n\t\tif (scrollInterval.current) {\n\t\t\tclearInterval(scrollInterval.current)\n\t\t}\n\t\tif (shown) {\n\t\t\tredraw()\n\t\t\tif (autoScroll) {\n\t\t\t\tscrollInterval.current = setInterval(() => {\n\t\t\t\t\toffset.current -= 8\n\t\t\t\t\tredraw()\n\t\t\t\t}, 100) as any\n\t\t\t}\n\t\t}\n\t}, [state, seed, shown, autoScroll])\n\n\treturn <>\n\t\t<div class=\"controls preview-controls\">\n\t\t\t{focused && <Btn label={focused} class=\"no-pointer\" />}\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('terrain_settings')}>\n\t\t\t\t<Btn icon={autoScroll ? 'square_fill' : 'square'} label={locale('preview.auto_scroll')} onClick={() => setAutoScroll(!autoScroll)} />\n\t\t\t</BtnMenu>\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width={size} height={size}></canvas>\n\t</>\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn } from '..'\nimport { useLocale } from '../../contexts'\nimport { useCanvas } from '../../hooks'\nimport { normalNoise } from '../../previews'\nimport { randomSeed } from '../../Utils'\n\nexport const NoisePreview = ({ data, shown, version }: PreviewProps) => {\n\tconst { locale } = useLocale()\n\tconst [seed, setSeed] = useState(randomSeed())\n\tconst [scale, setScale] = useState(2)\n\tconst offset = useRef<[number, number]>([0, 0])\n\tconst state = JSON.stringify([data])\n\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [256, 256]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { offset: offset.current, scale, seed, version }\n\t\t\tnormalNoise(data, img, options)\n\t\t},\n\t\tasync onDrag(dx, dy) {\n\t\t\toffset.current[0] = offset.current[0] + dx * 256\n\t\t\toffset.current[1] = offset.current[1] + dy * 256\n\t\t\tredraw()\n\t\t},\n\t}, [state, scale, seed])\n\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tredraw()\n\t\t}\n\t}, [state, scale, seed, shown])\n\n\tconst changeScale = (newScale: number) => {\n\t\toffset.current[0] = offset.current[0] * scale / newScale\n\t\toffset.current[1] = offset.current[1] * scale / newScale\n\t\tsetScale(newScale)\n\t}\n\n\treturn <>\n\t\t<div class=\"controls preview-controls\">\n\t\t\t<Btn icon=\"dash\" tooltip={locale('zoom_out')}\n\t\t\t\tonClick={() => changeScale(scale * 1.5)} />\n\t\t\t<Btn icon=\"plus\" tooltip={locale('zoom_in')}\n\t\t\t\tonClick={() => changeScale(scale / 1.5)} />\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width=\"256\" height=\"256\"></canvas>\n\t</>\n}\n","import { DataModel } from '@mcschema/core'\nimport { LegacyRandom, NoiseParameters, NormalNoise } from 'deepslate'\nimport type { VersionId } from '../services'\n\nexport type NoiseOptions = {\n\toffset: [number, number],\n\tscale: number,\n\tseed: bigint,\n\tversion: VersionId,\n}\n\nexport function normalNoise(state: any, img: ImageData, options: NoiseOptions) {\n\tconst random = new LegacyRandom(options.seed)\n\tconst params = NoiseParameters.fromJson(DataModel.unwrapLists(state))\n\tconst noise = new NormalNoise(random, params)\n\n\tconst ox = -options.offset[0] - 100\n\tconst oz = -options.offset[1] - 100\n\tconst data = img.data\n\tfor (let x = 0; x < 256; x += 1) {\n\t\tfor (let y = 0; y < 256; y += 1) {\n\t\t\tconst i = x * 4 + y * 4 * 256\n\t\t\tconst xx = (x + ox) * options.scale\n\t\t\tconst yy = (y + oz) * options.scale\n\t\t\tconst color = (noise.sample(xx, yy, 0) + 1) * 128\n\t\t\tdata[i] = color\n\t\t\tdata[i + 1] = color\n\t\t\tdata[i + 2] = color\n\t\t\tdata[i + 3] = 255\n\t\t}\n\t}\n}\n","import { useEffect, useMemo, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn, BtnInput, BtnMenu } from '..'\nimport { useLocale } from '../../contexts'\nimport { useCanvas } from '../../hooks'\nimport { getNoiseBlock, noiseSettings } from '../../previews'\nimport { CachedCollections, checkVersion } from '../../services'\nimport { randomSeed } from '../../Utils'\n\nexport const NoiseSettingsPreview = ({ data, shown, version }: PreviewProps) => {\n\tconst { locale } = useLocale()\n\tconst [seed, setSeed] = useState(randomSeed())\n\tconst [biome, setBiome] = useState('minecraft:plains')\n\tconst [biomeScale, setBiomeScale] = useState(0.2)\n\tconst [biomeDepth, setBiomeDepth] = useState(0.1)\n\tconst [autoScroll, setAutoScroll] = useState(false)\n\tconst [focused, setFocused] = useState<string | undefined>(undefined)\n\tconst offset = useRef(0)\n\tconst scrollInterval = useRef<number | undefined>(undefined)\n\tconst state = JSON.stringify([data, biomeScale, biomeDepth])\n\n\tconst size = data?.noise?.height ?? 256\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [size, size]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { biome, biomeDepth, biomeScale, offset: offset.current, width: img.width, seed, version }\n\t\t\tawait noiseSettings(data, img, options)\n\t\t},\n\t\tasync onDrag(dx) {\n\t\t\toffset.current += dx * size\n\t\t\tredraw()\n\t\t},\n\t\tasync onHover(x, y) {\n\t\t\tconst worldX = Math.floor(x * size - offset.current)\n\t\t\tconst worldY = size - Math.max(1, Math.ceil(y * size)) + (data?.noise?.min_y ?? 0)\n\t\t\tconst block = getNoiseBlock(worldX, worldY)\n\t\t\tsetFocused(block ? `Y=${worldY} (${block.getName().path})` : `Y=${worldY}`)\n\t\t},\n\t\tonLeave() {\n\t\t\tsetFocused(undefined)\n\t\t},\n\t}, [state, seed])\n\n\tuseEffect(() => {\n\t\tif (scrollInterval.current) {\n\t\t\tclearInterval(scrollInterval.current)\n\t\t}\n\t\tif (shown) {\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait redraw()\n\t\t\t\t\tif (autoScroll) {\n\t\t\t\t\t\tscrollInterval.current = setInterval(() => {\n\t\t\t\t\t\t\toffset.current -= 8\n\t\t\t\t\t\t\tredraw()\n\t\t\t\t\t\t}, 100) as any\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow e\n\t\t\t\t}\n\t\t\t})()\n\t\t}\n\t}, [state, seed, shown, biome, biomeScale, biomeDepth, autoScroll])\n\n\tconst allBiomes = useMemo(() => CachedCollections?.get('worldgen/biome') ?? [], [version])\n\n\treturn <>\n\t\t<div class=\"controls preview-controls\">\n\t\t\t{focused && <Btn label={focused} class=\"no-pointer\" />}\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('terrain_settings')}>\n\t\t\t\t{checkVersion(version, undefined, '1.17') ? <>\n\t\t\t\t\t<BtnInput label={locale('preview.scale')} value={`${biomeScale}`} onChange={v => setBiomeScale(Number(v))} />\n\t\t\t\t\t<BtnInput label={locale('preview.depth')} value={`${biomeDepth}`} onChange={v => setBiomeDepth(Number(v))} />\n\t\t\t\t</> :\n\t\t\t\t\t<BtnInput label={locale('preview.biome')} value={biome} onChange={setBiome} dataList={allBiomes} larger />\n\t\t\t\t}\n\t\t\t\t<Btn icon={autoScroll ? 'square_fill' : 'square'} label={locale('preview.auto_scroll')} onClick={() => setAutoScroll(!autoScroll)} />\n\t\t\t</BtnMenu>\n\t\t\t<Btn icon=\"sync\" tooltip={locale('generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width={size} height={size}></canvas>\n\t</>\n}\n","import type { DataModel } from '@mcschema/core'\nimport { Path } from '@mcschema/core'\nimport { useState } from 'preact/hooks'\nimport { useModel } from '../../hooks'\nimport type { VersionId } from '../../services'\nimport { checkVersion } from '../../services'\nimport { BiomeSourcePreview, DecoratorPreview, DensityFunctionPreview, NoisePreview, NoiseSettingsPreview } from '../previews'\n\nexport const HasPreview = ['dimension', 'worldgen/density_function', 'worldgen/noise', 'worldgen/noise_settings', 'worldgen/configured_feature', 'worldgen/placed_feature']\n\ntype PreviewPanelProps = {\n\tmodel: DataModel | null,\n\tversion: VersionId,\n\tid: string,\n\tshown: boolean,\n\tonError: (message: string) => unknown,\n}\nexport function PreviewPanel({ model, version, id, shown }: PreviewPanelProps) {\n\tconst [, setCount] = useState(0)\n\n\tuseModel(model, () => {\n\t\tsetCount(count => count + 1)\n\t})\n\n\tif (!model) return <></>\n\n\tif (id === 'dimension' && model.get(new Path(['generator', 'type']))?.endsWith('noise')) {\n\t\tconst data = model.get(new Path(['generator', 'biome_source']))\n\t\tif (data) return <BiomeSourcePreview {...{ model, version, shown, data }} />\n\t}\n\n\tif (id === 'worldgen/density_function') {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <DensityFunctionPreview {...{ model, version, shown, data }} />\n\t}\n\n\tif (id === 'worldgen/noise') {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <NoisePreview {...{ model, version, shown, data }} />\n\t}\n\n\tif (id === 'worldgen/noise_settings') {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <NoiseSettingsPreview {...{ model, version, shown, data }} />\n\t}\n\n\tif ((id === 'worldgen/placed_feature' ||  (id === 'worldgen/configured_feature' && checkVersion(version, '1.16', '1.17')))) {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <DecoratorPreview {...{ model, version, shown, data }} />\n\t}\n\n\treturn <></>\n}\n","import type { DataModel, Hook } from '@mcschema/core'\nimport { ModelPath, relativePath } from '@mcschema/core'\nimport type { BlockStateRegistry } from '../services'\n\nexport function getOutput(model: DataModel, blockStates: BlockStateRegistry): any {\n\treturn model.schema.hook(transformOutput, new ModelPath(model), model.data, { blockStates })\n}\n\nexport type OutputProps = {\n\tblockStates: BlockStateRegistry,\n}\nexport const transformOutput: Hook<[any, OutputProps], any> = {\n\tbase({}, _, value) {\n\t\treturn value\n\t},\n\n\tchoice({ switchNode }, path, value, props) {\n\t\treturn switchNode.hook(this, path, value, props)\n\t},\n\n\tlist({ children }, path, value, props) {\n\t\tif (!Array.isArray(value)) return value\n\t\tconst res = value.map((obj, index) =>\n\t\t\tchildren.hook(this, path.push(index), obj.node, props)\n\t\t)\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\n\t\t\tres[a as any] = value[a as any]\n\t\t}\n\t\treturn res\n\t},\n\n\tmap({ children, config }, path, value, props) {\n\t\tif (value === undefined) return undefined\n\t\tconst blockState = config.validation?.validator === 'block_state_map'? props.blockStates?.[relativePath(path, config.validation.params.id).get()] : null\n\t\tconst res: any = {}\n\t\tObject.keys(value).forEach(f => {\n\t\t\tif (blockState) {\n\t\t\t\tif (!Object.keys(blockState.properties ?? {}).includes(f)) return\n\t\t\t}\n\t\t\tres[f] = children.hook(this, path.push(f), value[f], props)\n\t\t})\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\n\t\t\tres[a as any] = value[a]\n\t\t}\n\t\treturn res\n\t},\n\n\tobject({ getActiveFields }, path, value, props) {\n\t\tif (value === undefined || value === null || typeof value !== 'object') {\n\t\t\treturn value\n\t\t}\n\t\tconst res: any = {}\n\t\tconst activeFields = getActiveFields(path)\n\t\tObject.keys(activeFields)\n\t\t\t.filter(k => activeFields[k].enabled(path))\n\t\t\t.forEach(f => {\n\t\t\t\tconst out = activeFields[f].hook(this, path.push(f), value[f], props)\n\t\t\t\tif (out !== undefined && out !== null) {\n\t\t\t\t\tres[f] = out\n\t\t\t\t}\n\t\t\t})\n\t\tfor (const a of Object.getOwnPropertySymbols(value)) {\n\t\t\tres[a as any] = value[a]\n\t\t}\n\t\treturn res\n\t},\n}\n","import { DataModel } from '@mcschema/core'\nimport brace from 'brace'\nimport 'brace/mode/json'\nimport 'brace/mode/yaml'\nimport json from 'comment-json'\nimport yaml from 'js-yaml'\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\nimport { Btn, BtnMenu } from '..'\nimport { useLocale } from '../../contexts'\nimport { useModel } from '../../hooks'\nimport { getOutput } from '../../schema/transformOutput'\nimport type { BlockStateRegistry } from '../../services'\nimport { Store } from '../../Store'\nimport { message } from '../../Utils'\n\nconst INDENT: Record<string, number | string | undefined> = {\n\t'2_spaces': 2,\n\t'4_spaces': 4,\n\ttabs: '\\t',\n\tminified: undefined,\n}\n\nconst FORMATS: Record<string, {\n\tparse: (v: string) => any,\n\tstringify: (v: any, indentation: string | number | undefined) => string,\n}> = {\n\tjson: {\n\t\tparse: json.parse,\n\t\tstringify: (v, i) => json.stringify(v, null, i) + '\\n',\n\t},\n\tyaml: {\n\t\tparse: yaml.load,\n\t\tstringify: (v, i) => yaml.dump(v, {\n\t\t\tflowLevel: i === undefined ? 0 : -1,\n\t\t\tindent: typeof i === 'string' ? 4 : i,\n\t\t}),\n\t},\n}\n\ninterface Editor {\n\tgetValue(): string\n\tsetValue(value: string): void\n\tconfigure(indent: string, format: string): void\n\tselect(): void\n}\n\ntype SourcePanelProps = {\n\tname: string,\n\tmodel: DataModel | null,\n\tblockStates: BlockStateRegistry | null,\n\tdoCopy?: number,\n\tdoDownload?: number,\n\tdoImport?: number,\n\tcopySuccess: () => unknown,\n\tonError: (message: string | Error) => unknown,\n}\nexport function SourcePanel({ name, model, blockStates, doCopy, doDownload, doImport, copySuccess, onError }: SourcePanelProps) {\n\tconst { locale } = useLocale()\n\tconst [indent, setIndent] = useState(Store.getIndent())\n\tconst [format, setFormat] = useState(Store.getFormat())\n\tconst [highlighting, setHighlighting] = useState(Store.getHighlighting())\n\tconst download = useRef<HTMLAnchorElement>(null)\n\tconst retransform = useRef<Function>()\n\tconst onImport = useRef<(e: any) => any>()\n\n\tconst textarea = useRef<HTMLTextAreaElement>()\n\tconst editor = useRef<Editor>()\n\n\tconst getSerializedOutput = useCallback((model: DataModel, blockStates: BlockStateRegistry) => {\n\t\tconst data = getOutput(model, blockStates)\n\t\treturn FORMATS[format].stringify(data, INDENT[indent])\n\t}, [indent, format])\n\n\tuseEffect(() => {\n\t\tretransform.current = () => {\n\t\t\tif (!model || !blockStates) return\n\t\t\ttry {\n\t\t\t\tconst output = getSerializedOutput(model, blockStates)\n\t\t\t\teditor.current.setValue(output)\n\t\t\t} catch (e) {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\te.message = `Error getting JSON output: ${e.message}`\n\t\t\t\t\tonError(e)\n\t\t\t\t} else {\n\t\t\t\t\tonError(`Error getting JSON output: ${message(e)}`)\n\t\t\t\t}\n\t\t\t\tconsole.error(e)\n\t\t\t\teditor.current.setValue('')\n\t\t\t}\n\t\t}\n\n\t\tonImport.current = () => {\n\t\t\tconst value = editor.current.getValue()\n\t\t\tif (value.length === 0) return\n\t\t\ttry {\n\t\t\t\tconst data = FORMATS[format].parse(value)\n\t\t\t\tmodel?.reset(DataModel.wrapLists(data), false)\n\t\t\t} catch (e) {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\te.message = `Error importing: ${e.message}`\n\t\t\t\t\tonError(e)\n\t\t\t\t} else {\n\t\t\t\t\tonError(`Error importing: ${message(e)}`)\n\t\t\t\t}\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\t}, [model, blockStates, indent, format, highlighting])\n\n\tuseEffect(() => {\n\t\tif (highlighting) {\n\t\t\tconst braceEditor = brace.edit('editor')\n\t\t\tbraceEditor.setOptions({\n\t\t\t\tfontSize: 14,\n\t\t\t\tshowFoldWidgets: false,\n\t\t\t\thighlightSelectedWord: false,\n\t\t\t})\n\t\t\tbraceEditor.$blockScrolling = Infinity\n\t\t\tbraceEditor.on('blur', e => onImport.current(e))\n\t\t\tbraceEditor.getSession().setMode('ace/mode/json')\n\n\t\t\teditor.current = {\n\t\t\t\tgetValue() {\n\t\t\t\t\treturn braceEditor.getSession().getValue()\n\t\t\t\t},\n\t\t\t\tsetValue(value) {\n\t\t\t\t\tbraceEditor.getSession().setValue(value)\n\t\t\t\t},\n\t\t\t\tconfigure(indent, format) {\n\t\t\t\t\tbraceEditor.setOption('useSoftTabs', indent !== 'tabs')\n\t\t\t\t\tbraceEditor.setOption('tabSize', indent === 'tabs' ? 4 : INDENT[indent])\n\t\t\t\t\tbraceEditor.getSession().setMode(`ace/mode/${format}`)\n\t\t\t\t},\n\t\t\t\tselect() {\n\t\t\t\t\tbraceEditor.selectAll()\n\t\t\t\t},\n\t\t\t}\n\t\t} else {\n\t\t\teditor.current = {\n\t\t\t\tgetValue() {\n\t\t\t\t\treturn textarea.current.value\n\t\t\t\t},\n\t\t\t\tsetValue(value: string) {\n\t\t\t\t\ttextarea.current.value = value\n\t\t\t\t},\n\t\t\t\tconfigure() {},\n\t\t\t\tselect() {},\n\t\t\t}\n\t\t}\n\t}, [highlighting])\n\n\tuseModel(model, () => {\n\t\tretransform.current()\n\t})\n\tuseEffect(() => {\n\t\tif (model) retransform.current()\n\t}, [model])\n\n\tuseEffect(() => {\n\t\teditor.current.configure(indent, format)\n\t\tretransform.current()\n\t}, [indent, format, highlighting])\n\n\tuseEffect(() => {\n\t\tif (doCopy && model && blockStates) {\n\t\t\tnavigator.clipboard.writeText(getSerializedOutput(model, blockStates)).then(() => {\n\t\t\t\tcopySuccess()\n\t\t\t})\n\t\t}\n\t}, [doCopy])\n\n\tuseEffect(() => {\n\t\tif (doDownload && model && blockStates && download.current) {\n\t\t\tconst content = encodeURIComponent(getSerializedOutput(model, blockStates))\n\t\t\tdownload.current.setAttribute('href', `data:text/json;charset=utf-8,${content}`)\n\t\t\tdownload.current.setAttribute('download', `${name}.${format}`)\n\t\t\tdownload.current.click()\n\t\t}\n\t}, [doDownload])\n\n\tuseEffect(() => {\n\t\tif (doImport && editor.current) {\n\t\t\teditor.current.setValue('')\n\t\t\teditor.current.select()\n\t\t}\n\t}, [doImport])\n\n\tconst changeIndent = (value: string) => {\n\t\tStore.setIndent(value)\n\t\tsetIndent(value)\n\t}\n\n\tconst changeFormat = (value: string) => {\n\t\tStore.setFormat(value)\n\t\tsetFormat(value)\n\t}\n\n\tconst changeHighlighting = (value: boolean) => {\n\t\tStore.setHighlighting(value)\n\t\tsetHighlighting(value)\n\t}\n\n\treturn <> \n\t\t<div class=\"controls source-controls\">\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale('output_settings')} data-cy=\"source-controls\">\n\t\t\t\t{Object.entries(INDENT).map(([key]) =>\n\t\t\t\t\t<Btn label={locale(`indentation.${key}`)} active={indent === key}\n\t\t\t\t\t\tonClick={() => changeIndent(key)}/>\n\t\t\t\t)}\n\t\t\t\t<hr />\n\t\t\t\t{Object.keys(FORMATS).map(key =>\n\t\t\t\t\t<Btn label={locale(`format.${key}`)} active={format === key}\n\t\t\t\t\t\tonClick={() => changeFormat(key)} />)}\n\t\t\t\t<hr />\n\t\t\t\t<Btn icon={highlighting ? 'square_fill' : 'square'} label={locale('highlighting')}\n\t\t\t\t\tonClick={() => changeHighlighting(!highlighting)} />\n\t\t\t</BtnMenu>\n\t\t</div>\n\t\t{highlighting\n\t\t\t? <pre id=\"editor\" class=\"source\"></pre>\n\t\t\t: <textarea ref={textarea} class=\"source\" spellcheck={false} autocorrect=\"off\" onBlur={onImport.current}></textarea>}\n\t\t<a ref={download} style=\"display: none;\"></a>\n\t</>\n}\n","import type { INode, Path } from '@mcschema/core'\nimport { DataModel } from '@mcschema/core'\n\nexport class ModelWrapper extends DataModel {\n\tconstructor(\n\t\tschema: INode<any>,\n\t\tprivate readonly mapper: (path: Path) => Path,\n\t\tprivate readonly getter: (path: Path) => any,\n\t\tprivate readonly setter: (path: Path, value: any, silent?: boolean) => any,\n\t) {\n\t\tsuper(schema)\n\t}\n\n\tmap(path: Path) {\n\t\treturn this.mapper(path)\n\t}\n\n\tget(path: Path) {\n\t\treturn this.getter(path)\n\t}\n\n\tset(path: Path, value: any, silent?: boolean) {\n\t\treturn this.setter(path, value, silent)\n\t}\n}\n","import type { BooleanHookParams, EnumOption, Hook, INode, NodeChildren, NumberHookParams, StringHookParams, ValidationOption } from '@mcschema/core'\nimport { DataModel, ListNode, MapNode, ModelPath, ObjectNode, Path, relativePath, StringNode } from '@mcschema/core'\nimport type { ComponentChildren, JSX } from 'preact'\nimport { memo } from 'preact/compat'\nimport { useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport { Btn, Octicon } from '../components'\nimport { localize } from '../contexts'\nimport { useFocus } from '../hooks'\nimport type { BlockStateRegistry, VersionId } from '../services'\nimport { CachedDecorator, CachedFeature } from '../services'\nimport { deepClone, deepEqual, hexId, isObject, newSeed } from '../Utils'\nimport { ModelWrapper } from './ModelWrapper'\n\nconst selectRegistries = ['loot_table.type', 'loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'recipe.type', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'dimension.generator.biome_source.preset', 'carver.type', 'feature.type', 'decorator.type', 'feature.tree.minimum_size.type', 'block_state_provider.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'int_provider.type', 'float_provider.type', 'height_provider.type', 'structure_feature.type', 'surface_builder.type', 'processor.processor_type', 'rule_test.predicate_type', 'pos_rule_test.predicate_type', 'template_element.element_type', 'block_placer.type', 'block_predicate.type', 'material_rule.type', 'material_condition.type', 'structure_placement.type', 'density_function.type', 'root_placer.type', 'entity.type_specific.cat.variant', 'entity.type_specific.frog.variant']\nconst hiddenFields = ['number_provider.type', 'score_provider.type', 'nbt_provider.type', 'int_provider.type', 'float_provider.type', 'height_provider.type']\nconst flattenedFields = ['feature.config', 'decorator.config', 'int_provider.value', 'float_provider.value', 'block_state_provider.simple_state_provider.state', 'block_state_provider.rotated_block_provider.state', 'block_state_provider.weighted_state_provider.entries.entry.data', 'rule_test.block_state', 'structure_feature.config', 'surface_builder.config', 'template_pool.elements.entry.element', 'decorator.block_survives_filter.state', 'material_rule.block.result_state']\nconst inlineFields = ['loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'feature.type', 'decorator.type', 'block_state_provider.type', 'feature.tree.minimum_size.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'block_placer.type', 'rule_test.predicate_type', 'processor.processor_type', 'template_element.element_type', 'nbt_operation.op', 'number_provider.value', 'score_provider.name', 'score_provider.target', 'nbt_provider.source', 'nbt_provider.target', 'generator_biome.biome', 'block_predicate.type', 'material_rule.type', 'material_condition.type', 'density_function.type', 'root_placer.type', 'entity.type_specific.type']\nconst nbtFields = ['function.set_nbt.tag', 'advancement.display.icon.nbt', 'text_component_object.nbt', 'entity.nbt', 'block.nbt', 'item.nbt']\nconst fixedLists = ['generator_biome.parameters.temperature', 'generator_biome.parameters.humidity', 'generator_biome.parameters.continentalness', 'generator_biome.parameters.erosion', 'generator_biome.parameters.depth', 'generator_biome.parameters.weirdness', 'feature.end_spike.crystal_beam_target', 'feature.end_gateway.exit', 'decorator.block_filter.offset', 'block_predicate.matching_blocks.offset', 'block_predicate.matching_fluids.offset', 'model_element.from', 'model_element.to', 'model_element.rotation.origin', 'model_element.faces.uv', 'item_transform.rotation', 'item_transform.translation', 'item_transform.scale', 'generator_structure.random_spread.locate_offset']\nconst collapsedFields = ['noise_settings.surface_rule', 'noise_settings.noise.terrain_shaper']\nconst collapsableFields = ['density_function.argument', 'density_function.argument1', 'density_function.argument2', 'density_function.input', 'density_function.when_in_range', 'density_function.when_out_of_range']\n\nconst findGenerator = (id: string) => {\n\treturn config.generators.find(g => g.id === id.replace(/^\\$/, ''))\n}\n\n/**\n * Secondary model used to remember the keys of a map\n */\nconst keysModel = new DataModel(MapNode(\n\tStringNode(),\n\tStringNode()\n), { historyMax: 0 })\n\ntype JSXTriple = [JSX.Element | null, JSX.Element | null, JSX.Element | null]\ntype RenderHook = Hook<[any, string, VersionId, BlockStateRegistry, Record<string, any>], JSXTriple>\n\ntype NodeProps<T> = T & {\n\tnode: INode<any>,\n\tpath: ModelPath,\n\tvalue: any,\n\tlang: string,\n\tversion: VersionId,\n\tstates: BlockStateRegistry,\n\tctx: Record<string, any>,\n}\n\nexport function FullNode({ model, lang, version, blockStates }: { model: DataModel, lang: string, version: VersionId, blockStates: BlockStateRegistry }) {\n\tconst path = new ModelPath(model)\n\tconst [prefix, suffix, body] = model.schema.hook(renderHtml, path, deepClone(model.data), lang, version, blockStates, {})\n\treturn suffix?.props?.children.some((c: any) => c) ? <div class={`node ${model.schema.type(path)}-node`} data-category={model.schema.category(path)}>\n\t\t<div class=\"node-header\">{prefix}{suffix}</div>\n\t\t<div class=\"node-body\">{body}</div>\n\t</div> : body\n}\n\nconst renderHtml: RenderHook = {\n\tbase() {\n\t\treturn [null, null, null]\n\t},\n\n\tboolean(params, path, value, lang, version, states, ctx) {\n\t\treturn [null, <BooleanSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\n\t},\n\n\tchoice({ choices, config, switchNode }, path, value, lang, version, states, ctx) {\n\t\tconst choice = switchNode.activeCase(path, true) as typeof choices[number]\n\t\tconst contextPath = (config?.context) ? new ModelPath(path.getModel(), new Path(path.getArray(), [config.context])) : path\n\t\tconst [prefix, suffix, body] = choice.node.hook(this, contextPath, value, lang, version, states, ctx)\n\t\tif (choices.length === 1) {\n\t\t\treturn [prefix, suffix, body]\n\t\t}\n\t\tconst choiceContextPath = config?.choiceContext ? new Path([], [config.choiceContext]) : config?.context ? new Path([], [config.context]) : path\n\t\tconst set = (type: string) => {\n\t\t\tconst c = choices.find(c => c.type === type) ?? choice\n\t\t\tconst def = c.node.default()\n\t\t\tconst newValue = c.change\n\t\t\t\t? c.change(DataModel.unwrapLists(value))\n\t\t\t\t: config.choiceContext === 'feature' && def?.type === 'minecraft:decorated' ? def.config.feature : def\n\t\t\tpath.model.set(path, DataModel.wrapLists(newValue))\n\t\t}\n\t\tconst inject = <select value={choice.type} onChange={(e) => set((e.target as HTMLSelectElement).value)}>\n\t\t\t{choices.map(c => <option value={c.type}>\n\t\t\t\t{pathLocale(lang, choiceContextPath.contextPush(c.type))}\n\t\t\t</option>)}\n\t\t</select>\n\t\treturn [prefix, <>{inject}{suffix}</>, body]\n\t},\n\n\tlist({ children, config }, path, value, lang, version, states, ctx) {\n\t\tconst { expand, collapse, isToggled } = useToggles()\n\t\tconst [maxShown, setMaxShown] = useState(50)\n\n\t\tconst context = path.getContext().join('.')\n\t\tif (fixedLists.includes(context)) {\n\t\t\tconst prefix = <>\n\t\t\t\t{[...Array(config.maxLength!)].map((_, i) =>\n\t\t\t\t\t<ErrorPopup lang={lang} path={path.modelPush(i)} />)}\n\t\t\t\t<div class=\"fixed-list\"></div>\n\t\t\t</>\n\t\t\tconst suffix = <>{[...Array(config.maxLength)].map((_, i) => {\n\t\t\t\tconst child = children.hook(this, path.modelPush(i), value?.[i]?.node, lang, version, states, ctx)\n\t\t\t\treturn child[1]\n\t\t\t})}</>\n\t\t\treturn [prefix, suffix, null]\n\t\t}\n\n\t\tconst onAdd = () => {\n\t\t\tif (!Array.isArray(value)) value = []\n\t\t\tconst node = DataModel.wrapLists(children.default())\n\t\t\tpath.model.set(path, [{ node, id: hexId() }, ...value])\n\t\t}\n\t\tconst onAddBottom = () => {\n\t\t\tif (!Array.isArray(value)) value = []\n\t\t\tconst node = DataModel.wrapLists(children.default())\n\t\t\tpath.model.set(path, [...value, { node, id: hexId() }])\n\t\t}\n\t\tconst suffix = <button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add_top')} onClick={onAdd}>{Octicon.plus_circle}</button>\n\t\tconst body = <>\n\t\t\t{(value && Array.isArray(value)) && value.map(({ node: cValue, id: cId }, index) => {\n\t\t\t\tif (index === maxShown) {\n\t\t\t\t\treturn <div class=\"node node-header\">\n\t\t\t\t\t\t<label>{localize(lang, 'entries_hidden', `${value.length - maxShown}`)}</label>\n\t\t\t\t\t\t<button onClick={() => setMaxShown(Math.min(maxShown + 50, value.length))}>{localize(lang, 'entries_hidden.more', '50')}</button>\n\t\t\t\t\t\t<button onClick={() => setMaxShown(value.length)}>{localize(lang, 'entries_hidden.all')}</button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tif (index > maxShown) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\tconst cPath = path.push(index).contextPush('entry')\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\n\t\t\t\tconst toggle = isToggled(cId)\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'expand')}\\n${localize(lang, 'expand_all', 'Ctrl')}`} onClick={expand(cId)}>{Octicon.chevron_right}</button>\n\t\t\t\t\t\t<label>{pathLocale(lang, cPath, `${index}`)}</label>\n\t\t\t\t\t\t<Collapsed key={cId} path={cPath} value={cValue} schema={children} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\n\t\t\t\tconst onMoveUp = () => {\n\t\t\t\t\tconst v = [...path.get()];\n\t\t\t\t\t[v[index - 1], v[index]] = [v[index], v[index - 1]]\n\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t}\n\t\t\t\tconst onMoveDown = () => {\n\t\t\t\t\tconst v = [...path.get()];\n\t\t\t\t\t[v[index + 1], v[index]] = [v[index], v[index + 1]]\n\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t}\n\t\t\t\tconst actions: MenuAction[] = [\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'duplicate',\n\t\t\t\t\t\tlabel: 'duplicate',\n\t\t\t\t\t\tonSelect: () => {\n\t\t\t\t\t\t\tconst v = [...path.get()]\n\t\t\t\t\t\t\tv.splice(index, 0, { id: hexId(), node: deepClone(cValue) })\n\t\t\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t\treturn <MemoedTreeNode key={cId} path={cPath} schema={children} value={cValue} {...{lang, version, states, actions}} ctx={{...ctx, index: (index === 0 ? 1 : 0) + (index === value.length - 1 ? 2 : 0)}}>\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'collapse')}\\n${localize(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(cId)}>{Octicon.chevron_down}</button>}\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\n\t\t\t\t\t{value.length > 1 && <div class=\"node-move\">\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={localize(lang, 'move_up')} onClick={onMoveUp} disabled={index === 0}>{Octicon.chevron_up}</button>\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={localize(lang, 'move_down')} onClick={onMoveDown} disabled={index === value.length - 1}>{Octicon.chevron_down}</button>\n\t\t\t\t\t</div>}\n\t\t\t\t</MemoedTreeNode>\n\t\t\t})}\n\t\t\t{(value && value.length > 0 && value.length <= maxShown) && <div class=\"node node-header\">\n\t\t\t\t<button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add_bottom')} onClick={onAddBottom}>{Octicon.plus_circle}</button>\n\t\t\t</div>}\n\t\t</>\n\t\treturn [null, suffix, body]\n\t},\n\n\tmap({ children, keys, config }, path, value, lang, version, states, ctx) {\n\t\tconst { expand, collapse, isToggled } = useToggles()\n\n\t\tconst keyPath = new ModelPath(keysModel, new Path([hashString(path.toString())]))\n\t\tconst onAdd = () => {\n\t\t\tconst key = keyPath.get()\n\t\t\tpath.model.set(path.push(key), DataModel.wrapLists(children.default()))\n\t\t}\n\t\tconst blockState = config.validation?.validator === 'block_state_map' ? states?.[relativePath(path, config.validation.params.id).get()] : null\n\t\tconst keysSchema = blockState?.properties\n\t\t\t? StringNode(null!, { enum: Object.keys(blockState.properties ?? {}) })\n\t\t\t: keys\n\t\tif (blockState && path.last() === 'Properties') {\n\t\t\tif (typeof value !== 'object') value = {}\n\t\t\tconst properties = Object.entries(blockState.properties ?? {})\n\t\t\t\t.map(([key, values]) => [key, StringNode(null!, { enum: values })])\n\t\t\tObject.entries(blockState.properties ?? {}).forEach(([key, values]) => {\n\t\t\t\tif (typeof value[key] !== 'string') {\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.expected_string')\n\t\t\t\t} else if (!values.includes(value[key])) {\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.invalid_enum_option', value[key])\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn ObjectNode(Object.fromEntries(properties)).hook(this, path, value, lang, version, states, ctx)\n\t\t}\n\t\tconst suffix = <>\n\t\t\t{keysSchema.hook(this, keyPath, keyPath.get() ?? '', lang, version, states, ctx)[1]}\n\t\t\t<button class=\"add tooltipped tip-se\" aria-label={localize(lang, 'add')} onClick={onAdd}>{Octicon.plus_circle}</button>\n\t\t</>\n\t\tconst body = <>\n\t\t\t{typeof value === 'object' && Object.entries(value).map(([key, cValue]) => {\n\n\t\t\t\tconst cPath = path.modelPush(key)\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\n\t\t\t\tconst toggle = isToggled(key)\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'expand')}\\n${localize(lang, 'expand_all', 'Ctrl')}`} onClick={expand(key)}>{Octicon.chevron_right}</button>\n\t\t\t\t\t\t<label>{key}</label>\n\t\t\t\t\t\t<Collapsed key={key} path={cPath} value={cValue} schema={children} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tconst cSchema = blockState\n\t\t\t\t\t? StringNode(null!, { enum: blockState.properties?.[key] ?? [] })\n\t\t\t\t\t: children\n\t\t\t\tif (blockState?.properties?.[key] && typeof cValue === 'string'\n\t\t\t\t\t&& !blockState.properties?.[key].includes(cValue)) {\n\t\t\t\t\tpath.model.errors.add(cPath, 'error.invalid_enum_option', cValue)\n\t\t\t\t}\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\n\t\t\t\treturn <MemoedTreeNode key={key} schema={cSchema} path={cPath} value={cValue} {...{lang, version, states, ctx}} label={key}>\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${localize(lang, 'collapse')}\\n${localize(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(key)}>{Octicon.chevron_down}</button>}\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\n\t\t\t\t</MemoedTreeNode>\n\t\t\t})}\n\t\t</>\n\t\treturn [null, suffix, body]\n\t},\n\n\tnumber(params, path, value, lang, version, states, ctx) {\n\t\treturn [null, <NumberSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\n\t},\n\n\tobject({ node, config, getActiveFields, getChildModelPath }, path, value, lang, version, states, ctx) {\n\t\tconst { expand, collapse, isToggled } = useToggles()\n\n\t\tif (path.getArray().length == 0 && isDecorated(config.context, value)) {\n\t\t\tconst { wrapper, fields } = createDecoratorsWrapper(getActiveFields(path), path, value)\n\t\t\tvalue = wrapper.data\n\t\t\tgetActiveFields = () => fields\n\t\t\tgetChildModelPath = (path, key) => new ModelPath(wrapper, new Path(path.getArray(), ['feature'])).push(key)\n\t\t}\n\n\t\tlet prefix: JSX.Element | null = null\n\t\tlet suffix: JSX.Element | null = null\n\t\tif (node.optional()) {\n\t\t\tif (value === undefined) {\n\t\t\t\tconst onExpand = () => path.set(DataModel.wrapLists(node.default()))\n\t\t\t\tsuffix = <button class=\"collapse closed tooltipped tip-se\" aria-label={localize(lang, 'expand')} onClick={onExpand}>{Octicon.plus_circle}</button>\n\t\t\t} else {\n\t\t\t\tconst onCollapse = () => path.set(undefined)\n\t\t\t\tsuffix = <button class=\"collapse open tooltipped tip-se\" aria-label={localize(lang, 'remove')} onClick={onCollapse}>{Octicon.trashcan}</button>\n\t\t\t}\n\t\t}\n\t\tconst context = path.getContext().join('.')\n\t\tif (collapsableFields.includes(context) || collapsedFields.includes(context)) {\n\t\t\tconst toggled = isToggled('')\n\t\t\tconst expanded = collapsedFields.includes(context) ? toggled : !toggled\n\t\t\tprefix = <>\n\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={localize(lang, expanded ? 'collapse' : 'expand')} onClick={toggled ? collapse('') : expand('')}>{expanded ? Octicon.chevron_down : Octicon.chevron_right}</button>\n\t\t\t</>\n\t\t\tif (!expanded) {\n\t\t\t\treturn [prefix, suffix, null]\n\t\t\t}\n\t\t}\n\n\t\tconst newCtx = (typeof value === 'object' && value !== null && node.default()?.pools)\n\t\t\t? { ...ctx, loot: value?.type } : ctx\n\t\tconst body = <>\n\t\t\t{(typeof value === 'object' && value !== null && !(node.optional() && value === undefined)) &&\n\t\t\t\tObject.entries(getActiveFields(path))\n\t\t\t\t\t.filter(([_, child]) => child.enabled(path))\n\t\t\t\t\t.map(([key, child]) => {\n\t\t\t\t\t\tconst cPath = getChildModelPath(path, key)\n\t\t\t\t\t\tconst context = cPath.getContext().join('.')\n\t\t\t\t\t\tif (hiddenFields.includes(context)) return null\n\t\t\t\t\t\tconst [cPrefix, cSuffix, cBody] = child.hook(this, cPath, value[key], lang, version, states, newCtx)\n\t\t\t\t\t\tconst isFlattened = child.type(cPath) === 'object' && flattenedFields.includes(context)\n\t\t\t\t\t\tconst isInlined = inlineFields.includes(context)\n\t\t\t\t\t\tif (isFlattened || isInlined) {\n\t\t\t\t\t\t\tprefix = <>{prefix}<ErrorPopup lang={lang} path={cPath} /><HelpPopup lang={lang} path={cPath} />{cPrefix}</>\n\t\t\t\t\t\t\tsuffix = <>{suffix}{cSuffix}</>\n\t\t\t\t\t\t\treturn isFlattened ? cBody : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn <MemoedTreeNode key={key} schema={child} path={cPath} value={value[key]} {...{lang, version, states, ctx: newCtx}} />\n\t\t\t\t\t})\n\t\t\t}\n\t\t</>\n\t\treturn [prefix, suffix, body]\n\t},\n\n\tstring(params, path, value, lang, version, states, ctx) {\n\t\treturn [null, <StringSuffix {...{...params, path, value, lang, version, states, ctx}} />, null]\n\t},\n}\n\nfunction Collapsed({ path, value }: { path: ModelPath, value: any, schema: INode<any> }) {\n\tconst context = path.getContext().join('.')\n\tswitch (context) {\n\t\tcase 'loot_table.pools.entry':\n\t\t\treturn <label>{value?.entries?.length ?? 0} entries</label>\n\t\tcase 'function.set_contents.entries.entry':\n\t\tcase 'loot_pool.entries.entry':\n\t\t\treturn <label>{value?.name?.replace(/^minecraft:/, '') ?? value?.type?.replace(/^minecraft:/, '')}</label>\n\t}\n\tfor (const child of Object.values(value ?? {})) {\n\t\tif (typeof child === 'string') {\n\t\t\treturn <label>{child.replace(/^minecraft:/, '')}</label>\n\t\t}\n\t}\n\treturn null\n}\n\nfunction useToggles() {\n\tconst [toggleState, setToggleState] = useState(new Map<string, boolean>())\n\tconst [toggleAll, setToggleAll] = useState<boolean | undefined>(undefined)\n\n\tconst expand = (key: string) => (evt: MouseEvent) => {\n\t\tif (evt.ctrlKey) {\n\t\t\tsetToggleState(new Map())\n\t\t\tsetToggleAll(true)\n\t\t} else {\n\t\t\tsetToggleState(state => new Map(state.set(key, true)))\n\t\t}\n\t}\n\tconst collapse = (key: string) => (evt: MouseEvent) => {\n\t\tif (evt.ctrlKey) {\n\t\t\tsetToggleState(new Map())\n\t\t\tsetToggleAll(false)\n\t\t} else {\n\t\t\tsetToggleState(state => new Map(state.set(key, false)))\n\t\t}\n\t}\n\t\n\tconst isToggled = (key: string) => {\n\t\tif (!(toggleState instanceof Map)) return false\n\t\treturn toggleState.get(key) ?? toggleAll\n\t}\n\n\treturn { expand, collapse, isToggled }\n}\n\nfunction BooleanSuffix({ path, node, value, lang }: NodeProps<BooleanHookParams>) {\n\tconst set = (target: boolean) => {\n\t\tpath.model.set(path, node.optional() && value === target ? undefined : target)\n\t}\n\treturn <>\n\t\t<button class={value === false ? 'selected' : ''} onClick={() => set(false)}>{localize(lang, 'false')}</button>\n\t\t<button class={value === true ? 'selected' : ''} onClick={() => set(true)}>{localize(lang, 'true')}</button>\n\t</>\n}\n\nfunction NumberSuffix({ path, config, integer, value, lang }: NodeProps<NumberHookParams>) {\n\tconst onChange = (evt: Event) => {\n\t\tconst value = (evt.target as HTMLInputElement).value\n\t\tconst parsed = integer ? parseInt(value) : parseFloat(value)\n\t\tpath.model.set(path, parsed)\n\t}\n\tconst onColor = (evt: Event) => {\n\t\tconst value = (evt.target as HTMLInputElement).value\n\t\tconst parsed = parseInt(value.slice(1), 16)\n\t\tpath.model.set(path, parsed)\n\t}\n\treturn <>\n\t\t<input type=\"text\" value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}} />\n\t\t{config?.color && <input type=\"color\" value={'#' + (value?.toString(16).padStart(6, '0') ?? '000000')} onChange={onColor} />}\n\t\t{['dimension.generator.seed', 'dimension.generator.biome_source.seed', 'world_settings.seed', 'structure_placement.salt'].includes(path.getContext().join('.')) && <button onClick={() => newSeed(path.model)} class=\"tooltipped tip-se\" aria-label={localize(lang, 'generate_new_seed')}>{Octicon.sync}</button>}\n\t</>\n}\n\nfunction StringSuffix({ path, getValues, config, node, value, lang, version, states }: NodeProps<StringHookParams>) {\n\tconst onChange = (evt: Event) => {\n\t\tevt.stopPropagation()\n\t\tconst newValue = (evt.target as HTMLSelectElement).value\n\t\tif (newValue === value) return\n\t\tpath.model.set(path, newValue.length === 0 ? undefined : newValue)\n\t}\n\tconst values = getValues()\n\tconst context = path.getContext().join('.')\n\tconst id = !isEnum(config) && config?.validator === 'resource' && typeof config.params.pool === 'string' ? config.params.pool : undefined\n\n\tif (nbtFields.includes(context)) {\n\t\treturn <textarea value={value ?? ''} onBlur={onChange}></textarea>\n\t} else if ((isEnum(config) && !config.additional) || selectRegistries.includes(context)) {\n\t\tlet context = new Path([])\n\t\tif (isEnum(config) && typeof config.enum === 'string') {\n\t\t\tcontext = context.contextPush(config.enum)\n\t\t} else if (id) {\n\t\t\tcontext = context.contextPush(id)\n\t\t} else if (isEnum(config)) {\n\t\t\tcontext = path\n\t\t}\n\t\treturn <select value={value ?? ''} onChange={onChange}>\n\t\t\t{node.optional() && <option value=\"\">{localize(lang, 'unset')}</option>}\n\t\t\t{values.map(v => <option value={v}>\n\t\t\t\t{pathLocale(lang, context.contextPush(v.replace(/^minecraft:/, '')))}\n\t\t\t</option>)}\n\t\t</select>\n\t} else if (!isEnum(config) && config?.validator === 'block_state_key') {\n\t\tconst blockState = states?.[relativePath(path, config.params.id).get()]\n\t\tconst values = Object.keys(blockState?.properties ?? {})\n\t\treturn <select value={value ?? ''} onChange={onChange}>\n\t\t\t{values.map(v => <option>{v}</option>)}\n\t\t</select>\n\t} else {\n\t\tconst datalistId = hexId()\n\t\tconst gen = id ? findGenerator(id) : undefined\n\t\treturn <>\n\t\t\t<input value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}}\n\t\t\t\tlist={values.length > 0 ? datalistId : ''} />\n\t\t\t{values.length > 0 && <datalist id={datalistId}>\n\t\t\t\t{values.map(v => <option value={v} />)}\n\t\t\t</datalist>}\n\t\t\t{gen && values.includes(value) && value.startsWith('minecraft:') &&\n\t\t\t\t<a href={`/${gen.url}/?version=${version}&preset=${value.replace(/^minecraft:/, '')}`} class=\"tooltipped tip-se\" aria-label={localize(lang, 'follow_reference')}>{Octicon.link_external}</a>}\n\t\t</>\n\t}\n}\n\ntype MenuAction = {\n\tlabel: string,\n\tdescription?: string,\n\ticon: keyof typeof Octicon,\n\tonSelect: () => unknown,\n}\n\ntype TreeNodeProps = {\n\tschema: INode<any>,\n\tpath: ModelPath,\n\tvalue: any,\n\tlang: string,\n\tversion: VersionId,\n\tstates: BlockStateRegistry,\n\tctx: Record<string, any>,\n\tcompare?: any,\n\tlabel?: string,\n\tactions?: MenuAction[],\n\tchildren?: ComponentChildren,\n}\nfunction TreeNode({ label, schema, path, value, lang, version, states, ctx, actions, children }: TreeNodeProps) {\n\tconst type = schema.type(path)\n\tconst category = schema.category(path)\n\tconst context = path.getContext().join('.')\n\n\tconst [active, setActive] = useFocus()\n\tconst onContextMenu = (evt: MouseEvent) => {\n\t\tevt.preventDefault()\n\t\tsetActive()\n\t}\n\n\tconst newCtx: Record<string, any> = { ...ctx, depth: (ctx.depth ?? 0) + 1 }\n\tdelete newCtx.index\n\tconst [prefix, suffix, body] = schema.hook(renderHtml, path, value, lang, version, states, newCtx)\n\treturn <div class={`node ${type}-node`} data-category={category}>\n\t\t<div class=\"node-header\" onContextMenu={onContextMenu}>\n\t\t\t<ErrorPopup lang={lang} path={path} />\n\t\t\t<HelpPopup lang={lang} path={path} />\n\t\t\t{children}\n\t\t\t{prefix}\n\t\t\t<label>\n\t\t\t\t{label ?? pathLocale(lang, path, `${path.last()}`)}\n\t\t\t\t{active && <div class=\"node-menu\">\n\t\t\t\t\t{actions?.map(a => <div key={a.label} class=\"menu-item\">\n\t\t\t\t\t\t<Btn icon={a.icon} tooltip={localize(lang, a.label)} tooltipLoc=\"se\" onClick={() => a.onSelect()}/>\n\t\t\t\t\t\t<span>{a.description ?? localize(lang, a.label)}</span>\n\t\t\t\t\t</div>)}\n\t\t\t\t\t<div class=\"menu-item\">\n\t\t\t\t\t\t<Btn icon=\"clippy\" tooltip={localize(lang, 'copy_context')} tooltipLoc=\"se\" onClick={() => navigator.clipboard.writeText(context)} />\n\t\t\t\t\t\t<span>{context}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t</label>\n\t\t\t{suffix}\n\t\t</div>\n\t\t{body && <div class=\"node-body\">{body}</div>}\n\t</div>\n}\n\nconst MemoedTreeNode = memo(TreeNode, (prev, next) => {\n\treturn prev.schema === next.schema\n\t\t&& prev.lang === next.lang\n\t\t&& prev.path.equals(next.path)\n\t\t&& deepEqual(prev.ctx, next.ctx)\n\t\t&& deepEqual(prev.value, next.value)\n})\n\nfunction isEnum(value?: ValidationOption | EnumOption): value is EnumOption {\n\treturn !!(value as any)?.enum\n}\n\nfunction hashString(str: string) {\n\tvar hash = 0, i, chr\n\tfor (i = 0; i < str.length; i++) {\n\t\tchr = str.charCodeAt(i)\n\t\thash = ((hash << 5) - hash) + chr\n\t\thash |= 0\n\t}\n\treturn hash\n}\n\nfunction pathLocale(lang: string, path: Path, ...params: string[]) {\n\tconst ctx = path.getContext()\n\tfor (let i = 0; i < ctx.length; i += 1) {\n\t\tconst key = ctx.slice(i).join('.')\n\t\tconst result = localize(lang, key, ...params)\n\t\tif (key !== result) {\n\t\t\treturn result\n\t\t}\n\t}\n\treturn ctx[ctx.length - 1]\n}\n\nfunction ErrorPopup({ lang, path, nested }: { lang: string, path: ModelPath, nested?: boolean }) {\n\tif (path.model instanceof ModelWrapper) {\n\t\tpath = path.model.map(path).withModel(path.model)\n\t}\n\tconst e = nested\n\t\t?\tpath.model.errors.getAll().filter(e => e.path.startsWith(path))\n\t\t: path.model.errors.get(path, true)\n\tif (e.length === 0) return null\n\tconst message = localize(lang, e[0].error, ...(e[0].params ?? []))\n\treturn popupIcon('node-error', 'issue_opened', message)\n}\n\nfunction HelpPopup({ lang, path }: { lang: string, path: Path }) {\n\tconst key = path.contextPush('help').getContext().join('.')\n\tconst message = localize(lang, key)\n\tif (message === key) return null\n\treturn popupIcon('node-help', 'info', message)\n}\n\nconst popupIcon = (type: string, icon: keyof typeof Octicon, popup: string) => {\n\tconst [active, setActive] = useFocus()\n\n\treturn <div class={`node-icon ${type}${active ? ' show' : ''}`} onClick={setActive}>\n\t\t{Octicon[icon]}\n\t\t<span class=\"icon-popup\">{popup}</span>\n\t</div>\n}\n\nfunction isDecorated(context: string | undefined, value: any) {\n\treturn context === 'feature'\n\t\t&& value?.type?.replace(/^minecraft:/, '') === 'decorated'\n\t\t&& isObject(value?.config)\n}\n\nfunction createDecoratorsWrapper(originalFields: NodeChildren, path: ModelPath, value: any) {\n\tconst decorators: any[] = []\n\tconst feature = iterateNestedDecorators(value, decorators)\n\tconst fields = {\n\t\ttype: originalFields.type,\n\t\tconfig: ObjectNode({\n\t\t\tdecorators: ListNode(CachedDecorator),\n\t\t\tfeature: CachedFeature,\n\t\t}, { context: 'feature.decorated' }),\n\t}\n\tconst schema = ObjectNode(fields, { context: 'feature' })\n\tconst featurePath = new Path(['config', 'feature'])\n\tconst decoratorsPath = new Path(['config', 'decorators'])\n\tconst model = path.getModel()\n\tconst wrapper: ModelWrapper = new ModelWrapper(schema, path => {\n\t\tif (path.startsWith(featurePath)) {\n\t\t\treturn new Path([...[...Array(decorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\n\t\t} else if (path.startsWith(decoratorsPath)) {\n\t\t\tif (path.modelArr.length === 2) {\n\t\t\t\treturn new Path([])\n\t\t\t}\n\t\t\tconst index = path.modelArr[2]\n\t\t\tif (typeof index === 'number') {\n\t\t\t\treturn new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\n\t\t\t}\n\t\t}\n\t\treturn path\n\t}, path => {\n\t\tif (path.equals(decoratorsPath)) {\n\t\t\tconst newDecorators: any[] = []\n\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\treturn newDecorators\n\t\t}\n\t\treturn model.get(wrapper.map(path))\n\t}, (path, value, silent) => {\n\t\tif (path.startsWith(featurePath)) {\n\t\t\tconst newDecorators: any[] = []\n\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\tconst newPath =new Path([...[...Array(newDecorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\n\t\t\treturn model.set(newPath, value, silent)\n\t\t} else if (path.startsWith(decoratorsPath)) {\n\t\t\tconst index = path.modelArr[2]\n\t\t\tif (path.modelArr.length === 2) {\n\t\t\t\tconst feature = wrapper.get(featurePath)\n\t\t\t\treturn model.set(new Path(), produceNestedDecorators(feature, value), silent)\n\t\t\t} else if (typeof index === 'number') {\n\t\t\t\tif (path.modelArr.length === 3 && value === undefined) {\n\t\t\t\t\tconst feature = wrapper.get(featurePath)\n\t\t\t\t\tconst newDecorators: any[] = []\n\t\t\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\t\t\tnewDecorators.splice(index, 1)\n\t\t\t\t\tconst newValue = produceNestedDecorators(feature, newDecorators)\n\t\t\t\t\treturn model.set(new Path(), newValue, silent)\n\t\t\t\t} else {\n\t\t\t\t\tconst newPath = new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\n\t\t\t\t\treturn model.set(newPath, value, silent)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmodel.set(path, value, silent)\n\t})\n\twrapper.data = {\n\t\ttype: model.data.type,\n\t\tconfig: {\n\t\t\tdecorators,\n\t\t\tfeature,\n\t\t},\n\t}\n\twrapper.errors = model.errors\n\treturn { fields, wrapper }\n}\n\nfunction iterateNestedDecorators(value: any, decorators: any[]): any {\n\tif (value?.type?.replace(/^minecraft:/, '') !== 'decorated') {\n\t\treturn value\n\t}\n\tif (!isObject(value?.config)) {\n\t\treturn value\n\t}\n\tdecorators.push({ id: decorators.length, node: value.config.decorator })\n\treturn iterateNestedDecorators(value.config.feature ?? '', decorators)\n}\n\nfunction produceNestedDecorators(feature: any, decorators: any[]): any {\n\tif (decorators.length === 0) return feature\n\treturn {\n\t\ttype: 'minecraft:decorated',\n\t\tconfig: {\n\t\t\tdecorator: decorators.shift().node,\n\t\t\tfeature: produceNestedDecorators(feature, decorators),\n\t\t},\n\t}\n}\n","import type { DataModel } from '@mcschema/core'\nimport { useErrorBoundary, useState } from 'preact/hooks'\nimport { useLocale } from '../../contexts'\nimport { useModel } from '../../hooks'\nimport { FullNode } from '../../schema/renderHtml'\nimport type { BlockStateRegistry, VersionId } from '../../services'\n\ntype TreePanelProps = {\n\tversion: VersionId,\n\tmodel: DataModel | null,\n\tblockStates: BlockStateRegistry | null,\n\tonError: (message: string) => unknown,\n}\nexport function Tree({ version, model, blockStates, onError }: TreePanelProps) {\n\tconst { lang } = useLocale()\n\tif (!model || !blockStates || lang === 'none') return <></>\n\n\tconst [error] = useErrorBoundary(e => {\n\t\tonError(`Error rendering the tree: ${e.message}`)\n\t\tconsole.error(e)\n\t})\n\tif (error) return <></>\n\n\tconst [, setState] = useState(0)\n\tuseModel(model, () => {\n\t\tsetState(state => state + 1)\n\t})\n\n\treturn <div class=\"tree\" data-cy=\"tree\">\n\t\t<FullNode {...{model, lang, version, blockStates}}/>\n\t</div>\n}\n","import { Giscus as GiscusReact } from '@giscus/react'\nimport { useTheme } from '../contexts'\n\ninterface Props {\n\tterm?: string,\n}\nexport function Giscus({ term }: Props) {\n\tconst { actualTheme } = useTheme()\n\tconst themeSuffix = actualTheme === 'light' ? '-burn' : ''\n\tconst themeUrl = (import.meta as any).env.DEV\n\t\t? `http://localhost:3000/src/styles/giscus${themeSuffix}.css`\n\t\t: `https://${location.host}/assets/giscus${themeSuffix}.css`\n\n\treturn <GiscusReact\n\t\trepo=\"misode/misode.github.io\"\n\t\trepoId=\"MDEwOlJlcG9zaXRvcnkxOTIyNTQyMzA=\"\n\t\tcategory=\"Site\"\n\t\tcategoryId=\"DIC_kwDOC3WRFs4COB8r\"\n\t\tmapping={term ? 'specific' : 'pathname'}\n\t\tterm={term}\n\t\treactionsEnabled=\"1\"\n\t\temitMetadata=\"0\"\n\t\tinputPosition=\"top\"\n\t\ttheme={themeUrl}\n\t\tlang=\"en\" />\n}\n","import { getCurrentUrl, Link, route } from 'preact-router'\nimport { Btn, BtnMenu, Icons, Octicon } from '.'\nimport config from '../../config.json'\nimport { useLocale, useTheme, useTitle, useVersion } from '../contexts'\nimport { checkVersion } from '../services'\nimport { cleanUrl, getGenerator } from '../Utils'\n\nconst Themes: Record<string, keyof typeof Octicon> = {\n\tsystem: 'device_desktop',\n\tdark: 'moon',\n\tlight: 'sun',\n}\n\nexport function Header() {\n\tconst { lang, locale, changeLanguage } = useLocale()\n\tconst { theme, changeTheme } = useTheme()\n\tconst { version } = useVersion()\n\tconst { title } = useTitle()\n\tconst gen = getGenerator(getCurrentUrl())\n\n\treturn <header>\n\t\t<div class=\"title\">\n\t\t\t<Link class=\"home-link\" href=\"/\" aria-label={locale('home')} data-cy=\"home-link\">{Icons.home}</Link>\n\t\t\t<h1>{title}</h1>\n\t\t\t{gen && <BtnMenu icon=\"chevron_down\" tooltip={locale('switch_generator')} data-cy=\"generator-switcher\">\n\t\t\t\t{config.generators\n\t\t\t\t\t.filter(g => g.category === gen?.category && checkVersion(version, g.minVersion))\n\t\t\t\t\t.map(g =>\n\t\t\t\t\t\t<Btn label={locale(g.id)} active={g.id === gen.id} onClick={() => route(cleanUrl(g.url))} />\n\t\t\t\t\t)}\n\t\t\t</BtnMenu>}\n\t\t</div>\n\t\t<nav>\n\t\t\t<ul>\n\t\t\t\t<li data-cy=\"language-switcher\">\n\t\t\t\t\t<BtnMenu icon=\"globe\" tooltip={locale('language')}>\n\t\t\t\t\t\t{config.languages.map(({ code, name }) =>\n\t\t\t\t\t\t\t<Btn label={name} active={code === lang}\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(code)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t</li>\n\t\t\t\t<li data-cy=\"theme-switcher\">\n\t\t\t\t\t<BtnMenu icon={Themes[theme]} tooltip={locale('theme')}>\n\t\t\t\t\t\t{Object.entries(Themes).map(([th, icon]) =>\n\t\t\t\t\t\t\t<Btn icon={icon} label={locale(`theme.${th}`)} active={th === theme}\n\t\t\t\t\t\t\t\tonClick={() => changeTheme(th)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t</li>\n\t\t\t\t<li class=\"dimmed\">\n\t\t\t\t\t<a href=\"https://github.com/misode/misode.github.io\" target=\"_blank\" rel=\"noreferrer\" class=\"tooltipped tip-sw\" aria-label={locale('github')}>\n\t\t\t\t\t\t{Octicon.mark_github}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t</header>\n}\n","export const Icons = {\n\thome: <svg width=\"32\" height=\"28\" viewBox=\"0 0 32 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"26\" height=\"6\" rx=\"3\" fill=\"#7CB45C\"/><rect x=\"8\" width=\"18\" height=\"6\" rx=\"3\" fill=\"#4BA041\"/><rect y=\"11\" width=\"32\" height=\"6\" rx=\"3\" fill=\"#AAA8A8\"/><rect x=\"11\" y=\"11\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#91908F\"/><rect x=\"11\" y=\"22\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#70B5C3\"/><rect x=\"17\" y=\"22\" width=\"15\" height=\"6\" rx=\"3\" fill=\"#4D989B\"/></svg>,\n\treport: <svg width=\"30\" height=\"36\" viewBox=\"0 0 30 36\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 16C0 13.7909 1.79086 12 4 12V12C6.20914 12 8 13.7909 8 16V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V16Z\" fill=\"#6ACC5D\"/><path d=\"M11 4C11 1.79086 12.7909 0 15 0V0C17.2091 0 19 1.79086 19 4V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V4Z\" fill=\"#FF4C4C\"/><path d=\"M22 10C22 7.79086 23.7909 6 26 6V6C28.2091 6 30 7.79086 30 10V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V10Z\" fill=\"#E5B442\"/><path d=\"M0 23C0 20.7909 1.79086 19 4 19V19C6.20914 19 8 20.7909 8 23V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V23Z\" fill=\"#2BAD1D\"/><path d=\"M11 15C11 12.7909 12.7909 11 15 11V11C17.2091 11 19 12.7909 19 15V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V15Z\" fill=\"#C10B0B\"/><path d=\"M22 19C22 16.7909 23.7909 15 26 15V15C28.2091 15 30 16.7909 30 19V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V19Z\" fill=\"#CC8E00\"/></svg>,\n\tsounds: <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#451475\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3.5 10C3.5 8.27609 4.18482 6.62279 5.40381 5.40381C6.62279 4.18482 8.27609 3.5 10 3.5C11.7239 3.5 13.3772 4.18482 14.5962 5.40381C15.8152 6.62279 16.5 8.27609 16.5 10C16.5 11.7239 15.8152 13.3772 14.5962 14.5962C13.3772 15.8152 11.7239 16.5 10 16.5C8.27609 16.5 6.62279 15.8152 5.40381 14.5962C4.18482 13.3772 3.5 11.7239 3.5 10V10ZM10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2V2ZM8.379 7.227C8.34101 7.20412 8.29762 7.19175 8.25327 7.19117C8.20892 7.19059 8.16522 7.20181 8.12664 7.2237C8.08807 7.24558 8.05601 7.27733 8.03375 7.3157C8.0115 7.35406 7.99985 7.39765 8 7.442V12.559C8.00003 12.6033 8.0118 12.6467 8.03413 12.685C8.05646 12.7232 8.08854 12.7548 8.12708 12.7765C8.16563 12.7983 8.20926 12.8095 8.25352 12.8088C8.29778 12.8082 8.34108 12.7958 8.379 12.773L12.643 10.214C12.6798 10.1917 12.7103 10.1604 12.7315 10.1229C12.7526 10.0854 12.7638 10.043 12.7638 10C12.7638 9.95695 12.7526 9.91463 12.7315 9.87714C12.7103 9.83965 12.6798 9.80825 12.643 9.786L8.379 7.227Z\" fill=\"#C5A5E6\"/></svg>,\n}\n","import { Howl } from 'howler'\nimport { useEffect, useRef, useState } from 'preact/hooks'\nimport { Btn, NumberInput, RangeInput, TextInput } from '..'\nimport { useLocale, useVersion } from '../../contexts'\nimport type { SoundEvents } from '../../services'\nimport { getSoundUrl } from '../../services'\n\nexport interface SoundConfig {\n\tid: string,\n\tsound: string,\n\tdelay: number,\n\tpitch: number,\n\tvolume: number,\n}\ntype SoundConfigProps = SoundConfig & {\n\tsounds: SoundEvents,\n\tonEdit: (changes: Partial<SoundConfig>) => unknown,\n\tonDelete: () => unknown,\n\tdelayedPlay?: number,\n}\nexport function SoundConfig({ sounds, sound, delay, pitch, volume, onEdit, onDelete, delayedPlay }: SoundConfigProps) {\n\tconst { locale } = useLocale()\n\tconst { version } = useVersion()\n\tconst [loading, setLoading] = useState(true)\n\tconst [playing, setPlaying] = useState(false)\n\tconst [invalid, setInvalid] = useState(false)\n\tconst howls = useRef<Howl[]>([])\n\tconst command = `playsound minecraft:${sound} master @s ~ ~ ~ ${volume} ${pitch}`\n\n\tuseEffect(() => {\n\t\tconst soundEvent = sounds[sound]\n\t\tsetInvalid((soundEvent?.sounds?.length ?? 0) === 0)\n\t\thowls.current.forEach(h => h.stop())\n\t\thowls.current = (soundEvent?.sounds ?? []).map(entry => {\n\t\t\tconst soundPath = typeof entry === 'string' ? entry : entry.name\n\t\t\tconst url = getSoundUrl(version, soundPath)\n\t\t\tconst howl = new Howl({\n\t\t\t\tsrc: [url],\n\t\t\t\tformat: ['ogg'],\n\t\t\t\tvolume,\n\t\t\t\trate: pitch,\n\t\t\t})\n\t\t\thowl.on('end', () => {\n\t\t\t\tsetPlaying(false)\n\t\t\t})\n\t\t\tconst completed = () => {\n\t\t\t\tif (loading && howls.current.every(h => h.state() === 'loaded')) {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (howl.state() === 'loaded') {\n\t\t\t\tsetTimeout(() => completed())\n\t\t\t} else {\n\t\t\t\thowl.on('load', () => {\n\t\t\t\t\tcompleted()\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn howl\n\t\t})\n\t\tsetLoading(true)\n\t}, [sound, sounds])\n\n\tuseEffect(() => {\n\t\thowls.current.forEach(h => h.rate(pitch))\n\t}, [pitch])\n\n\tuseEffect(() => {\n\t\thowls.current.forEach(h => h.volume(volume))\n\t}, [volume])\n\n\tconst play = () => {\n\t\tif (loading || invalid) return\n\t\tstop()\n\t\tconst howl = Math.floor(Math.random() * howls.current.length)\n\t\thowls.current[howl].play()\n\t\tsetPlaying(true)\n\t}\n\tconst stop = () => {\n\t\thowls.current.forEach(h => h.stop())\n\t}\n\tuseEffect(() => {\n\t\tif (delayedPlay) setTimeout(() => play(), delay * 50)\n\t}, [delayedPlay])\n\n\tuseEffect(() => {\n\t\treturn () => stop()\n\t}, [])\n\n\tconst [copyActive, setCopyActive] = useState(false)\n\tconst copyTimeout = useRef<number | undefined>(undefined)\n\tconst copy = () => {\n\t\tnavigator.clipboard.writeText(command)\n\t\tsetCopyActive(true)\n\t\tif (copyTimeout.current !== undefined) clearTimeout(copyTimeout.current)\n\t\tcopyTimeout.current = setTimeout(() => {\n\t\t\tsetCopyActive(false)\n\t\t}, 2000) as any\n\t}\n\n\treturn <div class={`sound-config${loading ? ' loading' : playing ? ' playing' : ''}${invalid ? ' invalid' : ''}`}>\n\t\t<Btn class=\"play\" icon={invalid ? 'alert' : loading ? 'sync' : 'play'} label={locale('sounds.play')} onClick={play} tooltip={invalid ? locale('sounds.unknown_sound') : loading ? locale('sounds.loading_sound') : locale('sounds.play_sound')} tooltipLoc=\"se\" />\n\t\t<TextInput class=\"btn btn-input sound\" list=\"sound-list\" spellcheck={false}\n\t\t\tvalue={sound} onChange={sound => onEdit({ sound })} />\n\t\t<label class=\"delay-label\">{locale('sounds.delay')}: </label>\n\t\t<NumberInput class=\"btn btn-input delay\" min={0}\n\t\t\tvalue={delay} onChange={delay => onEdit({ delay })} />\n\t\t<label class=\"pitch-label\">{locale('sounds.pitch')}: </label>\n\t\t<RangeInput class=\"pitch tooltipped tip-s\" min={0.5} max={2} step={0.01}\n\t\t\taria-label={pitch.toFixed(2)} style={`--x: ${(pitch - 0.5) * (100 / 1.5)}%`}\n\t\t\tvalue={pitch} onChange={pitch => onEdit({ pitch })} />\n\t\t<label class=\"volume-label\">{locale('sounds.volume')}: </label>\n\t\t<RangeInput class=\"volume tooltipped tip-s\" min={0} max={1} step={0.01}\n\t\t\taria-label={volume.toFixed(2)} style={`--x: ${volume * 100}%`}\n\t\t\tvalue={volume} onChange={volume => onEdit({ volume })} />\n\t\t<Btn class={`copy${copyActive ? ' active' : ''}`} icon={copyActive ? 'check' : 'terminal'} label={locale('copy')} tooltip={copyActive ? locale('copied') : locale('sounds.copy_command')}\n\t\t\tonClick={copy} />\n\t\t<Btn class=\"remove\" icon=\"trashcan\" tooltip={locale('sounds.remove_sound')}\n\t\t\tonClick={() => {onDelete(); stop()}} />\n\t</div>\n}\n","import type { ComponentChildren } from 'preact'\nimport { Icons } from './Icons'\n\ntype ToolCardProps = {\n\ttitle: string,\n\tdesc?: string,\n\tlink?: string,\n\ticon?: keyof typeof Icons,\n\tchildren?: ComponentChildren,\n}\nexport function ToolCard({ title, desc, link, icon, children }: ToolCardProps) {\n\tconst content = <>\n\t\t<div class=\"tool-head\">\n\t\t\t{icon && Icons[icon]}\n\t\t\t<div>\n\t\t\t\t<h3>{title}</h3>\n\t\t\t\t<p>{desc}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t{children && <div class=\"tool-body\">\n\t\t\t{children}\n\t\t</div>}\n\t</>\n\treturn link\n\t\t? <a class=\"tool-card\" href={link}>{content}</a>\n\t\t: <div class=\"tool-card\">{content}</div>\n}\n","import { useMemo, useState } from 'preact/hooks'\nimport { Octicon } from '.'\n\nconst SEPARATOR = '/'\n\ninterface Props {\n\tentries: string[],\n\tonSelect: (entry: string) => unknown,\n\tindent?: number,\n}\nexport function TreeView({ entries, onSelect, indent }: Props) {\n\tconst roots = useMemo(() => {\n\t\tconst groups: Record<string, string[]> = {}\n\t\tfor (const entry of entries) {\n\t\t\tconst i = entry.indexOf(SEPARATOR)\n\t\t\tif (i >= 0) {\n\t\t\t\tconst root = entry.slice(0, i)\n\t\t\t\t;(groups[root] ??= []).push(entry.slice(i + 1))\n\t\t\t}\n\t\t}\n\t\treturn Object.entries(groups)\n\t}, entries)\n\n\tconst leaves = useMemo(() => {\n\t\treturn entries.filter(e => !e.includes(SEPARATOR))\n\t}, entries)\n\n\tconst [hidden, setHidden] = useState(new Set<string>())\n\tconst toggle = (root: string) => {\n\t\tif (hidden.has(root)) {\n\t\t\thidden.delete(root)\n\t\t} else {\n\t\t\thidden.add(root)\n\t\t}\n\t\tsetHidden(new Set(hidden))\n\t}\n\n\treturn <div class=\"tree-view\" style={`--indent: ${indent ?? 0};`}>\n\t\t{roots.map(([r, entries]) => <div>\n\t\t\t<TreeViewEntry icon={hidden.has(r) ? 'chevron_right' : 'chevron_down'} key={r} label={r} onClick={() => toggle(r)}/>\n\t\t\t{!hidden.has(r) &&\n\t\t\t\t<TreeView entries={entries} onSelect={e => onSelect(`${r}/${e}`)} indent={(indent ?? 0) + 1} />}\n\t\t</div>)}\n\t\t{leaves.map(e => <TreeViewEntry icon=\"file\" key={e} label={e} onClick={() => onSelect(e)} />)}\n\t</div>\n}\n\ninterface TreeViewEntryProps {\n\ticon: keyof typeof Octicon,\n\tlabel: string,\n\tonClick?: () => unknown,\n}\nfunction TreeViewEntry({ icon, label, onClick }: TreeViewEntryProps) {\n\treturn <div class=\"entry\" onClick={onClick} >\n\t\t{Octicon[icon]}\n\t\t{label}\n\t</div>\n}\n","import { marked } from 'marked'\nimport { ChangelogTag } from '.'\nimport type { Change, ChangelogVersion } from '../../services'\n\ntype Props = {\n\tchange: Change,\n\tactiveTags?: string[],\n\ttoggleTag?: (tag: string) => unknown,\n}\nexport function ChangelogEntry({ change, activeTags, toggleTag }: Props) {\n\treturn <div class=\"changelog-entry\">\n\t\t<div class=\"changelog-version\">\n\t\t\t<ArticleLink {...change.version}/>\n\t\t\t<ArticleLink {...change.group}/>\n\t\t</div>\n\t\t<div class=\"changelog-tags\">\n\t\t\t{change.tags.map(tag => <ChangelogTag label={tag} onClick={toggleTag ? () => toggleTag(tag) : undefined} active={activeTags?.includes(tag)} />)}\n\t\t</div>\n\t\t<div class=\"changelog-content\" dangerouslySetInnerHTML={{ __html: marked(change.content) }} />\n\t</div>\n}\n\nfunction ArticleLink({ id, article }: ChangelogVersion) {\n\treturn article === null\n\t\t? <span>{id}</span>\n\t\t: <a href={`https://www.minecraft.net/en-us/article/${article}`} target=\"_blank\">{id}</a>\n}\n","import { Octicon } from '..'\nimport { hashString } from '../../Utils'\n\ntype TagProps = {\n\tlabel: string,\n\tactive?: boolean,\n\tonClick?: () => unknown,\n}\nexport function ChangelogTag({ label, active, onClick }: TagProps) {\n\tconst color = label === 'breaking' ? 5 : hashString(label) % 360\n\treturn <div class={`changelog-tag${active ? ' active' : ''}${onClick ? ' clickable' : ''}`} style={`--tint: ${color}`} onClick={onClick}>\n\t\t{label === 'breaking' && Octicon.alert}\n\t\t{label}\n\t</div>\n}\n","import { useMemo, useState } from 'preact/hooks'\nimport { Btn, TextInput } from '..'\nimport { useLocale } from '../../contexts'\nimport type { Change } from '../../services'\nimport { ChangelogEntry } from './ChangelogEntry'\nimport { ChangelogTag } from './ChangelogTag'\n\ninterface Props {\n\tchanges: Change[] | undefined,\n\tdefaultOrder: 'asc' | 'desc',\n}\nexport function ChangelogList({ changes, defaultOrder }: Props) {\n\tconst { locale } = useLocale()\n\t\n\tconst [search, setSearch] = useState('')\n\tconst [tags, setTags] = useState<string[]>([])\n\tconst toggleTag = (tag: string) => {\n\t\tif (!tags.includes(tag)) {\n\t\t\tsetTags([...tags, tag])\n\t\t} else {\n\t\t\tsetTags(tags.filter(t => t !== tag))\n\t\t}\n\t}\n\n\tconst filteredChangelogs = useMemo(() => {\n\t\tconst query = search.split(' ').map(q => q.trim().toLowerCase()).filter(q => q.length > 0)\n\t\tif (query.length === 0 && tags.length === 0) return changes\n\t\treturn changes?.filter(change => {\n\t\t\tif (!tags.every(tag => change.tags.includes(tag))) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst content = change.tags.join(' ') + ' ' + change.content.toLowerCase()\n\t\t\treturn query.every(q => {\n\t\t\t\tif (q.startsWith('!')) {\n\t\t\t\t\treturn q.length === 1 || !content.includes(q.slice(1))\n\t\t\t\t}\n\t\t\t\treturn content.includes(q)\n\t\t\t})\n\t\t})\n\t}, [changes, search, tags])\n\n\tconst [sort, setSort] = useState(defaultOrder === 'desc')\n\n\tconst sortedChangelogs = useMemo(() => {\n\t\treturn filteredChangelogs?.sort((a, b) => sort ? b.order - a.order : a.order - b.order)\n\t}, [filteredChangelogs, sort])\n\n\treturn <>\n\t\t<div class=\"changelog-query\">\n\t\t\t<TextInput class=\"btn btn-input changelog-search\" list=\"sound-list\" placeholder={locale('changelog.search')}\n\t\t\t\tvalue={search} onChange={setSearch} />\n\t\t\t<Btn icon={sort ? 'sort_desc' : 'sort_asc'} label={sort ? 'Newest first' : 'Oldest first'} onClick={() => setSort(!sort)} />\n\t\t</div>\n\t\t{tags.length > 0 && <div class=\"changelog-tags\">\n\t\t\t{tags.map(tag => <ChangelogTag label={tag} onClick={() => setTags(tags.filter(t => t !== tag))} />)}\n\t\t</div>}\n\t\t<div class=\"changelog-list\">\n\t\t\t{sortedChangelogs === undefined\n\t\t\t\t? <span>{locale('loading')}</span>\n\t\t\t\t: sortedChangelogs.length === 0\n\t\t\t\t\t? <span>{locale('changelog.no_results')}</span>\n\t\t\t\t\t:\tsortedChangelogs.map(change =>\n\t\t\t\t\t\t<ChangelogEntry change={change} activeTags={tags} toggleTag={toggleTag} />)}\n\t\t</div>\n\t</>\n}\n","import { useEffect, useMemo, useState } from 'preact/hooks'\nimport { VersionMetaData } from '.'\nimport { useLocale } from '../../contexts'\nimport type { Change, VersionMeta } from '../../services'\nimport { getChangelogs } from '../../services'\nimport { Giscus } from '../Giscus'\nimport { ChangelogList } from './ChangelogList'\n\ntype Tab = 'changelog' | 'discussion' \n\ninterface Props {\n\tversion: VersionMeta\n}\nexport function VersionDetail({ version }: Props) {\n\tconst { locale } = useLocale()\n\n\tconst [tab, setTab] = useState<Tab>('changelog')\n\n\tconst [changelogs, setChangelogs] = useState<Change[] | undefined>(undefined)\n\tuseEffect(() => {\n\t\tgetChangelogs()\n\t\t\t.then(changelogs => setChangelogs(\n\t\t\t\tchangelogs.map(c => ({ ...c, tags: c.tags.filter(t => t !== c.group.id) }))\n\t\t\t))\n\t\t\t.catch(e => console.error(e))\n\t}, [])\n\n\tconst filteredChangelogs = useMemo(() =>\n\t\tchangelogs?.filter(c => c.version.id === version.id || c.group.id === version.id),\n\t[version.id, changelogs])\n\n\treturn <>\n\t\t<div class=\"version-detail\">\n\t\t\t<h2>{version.name}</h2>\n\t\t\t<div class=\"version-info\">\n\t\t\t\t<VersionMetaData label={locale('versions.released')} value={releaseDate(version)} />\n\t\t\t\t<VersionMetaData label={locale('versions.release_target')} value={version.release_target} link={version.id !== version.release_target ? `/versions/?id=${version.release_target}` : undefined} />\n\t\t\t\t<VersionMetaData label={locale('versions.data_version')} value={version.data_version} />\n\t\t\t\t<VersionMetaData label={locale('versions.protocol_version')} value={version.protocol_version} />\n\t\t\t\t<VersionMetaData label={locale('versions.data_pack_format')} value={version.data_pack_version} />\n\t\t\t\t<VersionMetaData label={locale('versions.resource_pack_format')} value={version.resource_pack_version} />\n\t\t\t</div>\n\t\t\t<div class=\"version-tabs\">\n\t\t\t\t<span class={tab === 'changelog' ? 'selected' : ''} onClick={() => setTab('changelog')}>{locale('versions.technical_changes')}</span>\n\t\t\t\t<span class={tab === 'discussion' ? 'selected' : ''} onClick={() => setTab('discussion')}>{locale('versions.discussion')}</span>\n\t\t\t</div>\n\t\t\t<div class=\"version-tab\">\n\t\t\t\t{tab === 'changelog' && <ChangelogList changes={filteredChangelogs} defaultOrder=\"asc\" />}\n\t\t\t\t{tab === 'discussion' && <Giscus term={`version/${version.id}`} />}\n\t\t\t</div>\n\t\t</div>\n\t</>\n}\n\nexport function releaseDate(version: VersionMeta) {\n\treturn new Date(version.release_time).toLocaleDateString(undefined, { day: 'numeric', month: 'short', year: 'numeric' })\n}\n","import { releaseDate, VersionMetaData } from '.'\nimport { useLocale } from '../../contexts'\nimport type { VersionMeta } from '../../services'\n\ninterface Props {\n\tversion: VersionMeta,\n\tlink?: string,\n}\nexport function VersionEntry({ version, link }: Props) {\n\tconst { locale } = useLocale()\n\n\treturn <a class=\"version-entry\" href={link}>\n\t\t<span class=\"version-id\">{version.id}</span>\n\t\t<VersionMetaData label={locale('versions.released')} value={releaseDate(version)} compact />\n\t\t<VersionMetaData label={locale('versions.data_version')} value={version.data_version} optional />\n\t\t<VersionMetaData label={locale('versions.pack_format')} value={version.data_pack_version} optional />\n\t</a>\n}\n","import { useMemo, useState } from 'preact/hooks'\nimport { Checkbox, TextInput } from '..'\nimport { useLocale } from '../../contexts'\nimport type { VersionMeta } from '../../services'\nimport { VersionEntry } from './VersionEntry'\n\ninterface Props {\n\tversions: VersionMeta[]\n\tlink?: (id: string) => string\n}\nexport function VersionList({ versions, link }: Props) {\n\tconst { locale } = useLocale()\n\t\n\tconst [snapshots, setSnapshots] = useState(true)\n\tconst [search, setSearch] = useState('')\n\n\tconst filteredVersions = useMemo(() => versions.filter(v => {\n\t\tif (v.type === 'snapshot' && !snapshots) return false\n\t\treturn v.id.includes(search)\n\t}), [versions, snapshots, search])\n\n\n\treturn <>\n\t\t<div class=\"versions-controls\">\n\t\t\t<TextInput class=\"btn btn-input version-search\" list=\"sound-list\" placeholder={locale('versions.search')}\n\t\t\t\tvalue={search} onChange={setSearch} />\n\t\t\t<Checkbox label=\"Include snapshots\" value={snapshots} onChange={setSnapshots} />\n\t\t</div>\n\t\t<div class=\"version-list\">\n\t\t\t{filteredVersions.map(v => <VersionEntry version={v} link={link?.(v.id)} />)}\n\t\t\t{filteredVersions.length === 0 && <span>\n\t\t\t\t{locale('versions.no_results')}\n\t\t\t</span>}\n\t\t</div>\n\t</>\n}\n","import { Octicon } from '..'\n\ninterface Props {\n\tlabel: string,\n\tvalue: string | number,\n\tlink?: string,\n\tcompact?: boolean,\n\toptional?: boolean,\n}\nexport function VersionMetaData({ label, value, link, compact, optional }: Props) {\n\treturn <div class={`version-metadata${optional ? ' version-metadata-hide' : ''}`}>\n\t\t<span class={compact ? 'version-metadata-hide' : undefined}>{label}: </span>\n\t\t<span class=\"version-metadata-value\">{value}</span>\n\t\t{link && <a href={link} class=\"version-metadata-link\">{Octicon.link_external}</a>}\n\t</div>\n}\n","import config from '../../config.json'\nimport { ToolCard } from '../components'\nimport { useLocale, useTitle } from '../contexts'\nimport { cleanUrl } from '../Utils'\n\ninterface Props {\n\tcategory: string,\n\tpath?: string,\n}\nexport function Category({ category }: Props) {\n\tconst { locale } = useLocale()\n\tuseTitle(locale('title.generator_category', locale(category)))\n\treturn <main>\n\t\t<div class=\"category\">\n\t\t\t{config.generators.filter(g => g.category === category).map(g => \n\t\t\t\t<ToolCard title={locale(g.id)} link={cleanUrl(g.url)} />\n\t\t\t)}\n\t\t</div>\n\t</main>\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport { Ad, ChangelogList, ErrorPanel } from '../components'\nimport { useLocale, useTitle } from '../contexts'\nimport type { Change } from '../services'\nimport { getChangelogs } from '../services'\n\ninterface Props {\n\tpath?: string,\n}\nexport function Changelog({}: Props) {\n\tconst { locale } = useLocale()\n\tconst [error, setError] = useState<Error | null>(null)\n\tuseTitle(locale('title.changelog'))\n\n\tconst [changelogs, setChangelogs] = useState<Change[]>([])\n\tuseEffect(() => {\n\t\tgetChangelogs()\n\t\t\t.then(changelogs => setChangelogs(changelogs))\n\t\t\t.catch(e => { console.error(e); setError(e) })\n\t}, [])\n\n\n\treturn <main>\n\t\t<Ad type=\"text\" id=\"changelog\" />\n\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t<div class=\"changelog\">\n\t\t\t<ChangelogList changes={changelogs} defaultOrder=\"desc\" />\n\t\t</div>\n\t</main>\n}\n","import { DataModel, Path } from '@mcschema/core'\nimport { getCurrentUrl, route } from 'preact-router'\nimport { useEffect, useErrorBoundary, useMemo, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport { Analytics } from '../Analytics'\nimport { Ad, Btn, BtnMenu, ErrorPanel, HasPreview, Octicon, PreviewPanel, SearchList, SourcePanel, TextInput, Tree } from '../components'\nimport { useLocale, useProject, useTitle, useVersion } from '../contexts'\nimport { useActiveTimeout, useModel } from '../hooks'\nimport { getOutput } from '../schema/transformOutput'\nimport type { BlockStateRegistry, VersionId } from '../services'\nimport { checkVersion, fetchPreset, getBlockStates, getCollections, getModel, getSnippet, shareSnippet, SHARE_KEY } from '../services'\nimport { Store } from '../Store'\nimport { cleanUrl, deepEqual, getGenerator, getSearchParams, message, setSeachParams } from '../Utils'\n\ninterface Props {\n\tdefault?: true,\n}\nexport function Generator({}: Props) {\n\tconst { locale } = useLocale()\n\tconst { version, changeVersion } = useVersion()\n\tconst { project, file, updateFile, openFile, closeFile } = useProject()\n\tconst [error, setError] = useState<Error | string | null>(null)\n\tconst [errorBoundary, errorRetry] = useErrorBoundary()\n\tif (errorBoundary) {\n\t\terrorBoundary.message = `Something went wrong rendering the generator: ${errorBoundary.message}`\n\t\treturn <main><ErrorPanel error={errorBoundary} onDismiss={errorRetry} /></main>\n\t}\n\n\tconst gen = getGenerator(getCurrentUrl())\n\tif (!gen) {\n\t\treturn <main><ErrorPanel error={`Cannot find generator \"${getCurrentUrl()}\"`} /></main>\n\t}\n\n\tconst allowedVersions = config.versions\n\t\t.filter(v => checkVersion(v.id, gen.minVersion, gen.maxVersion))\n\t\t.map(v => v.id as VersionId)\n\n\tuseTitle(locale('title.generator', locale(gen.id)), allowedVersions)\n\n\tif (!checkVersion(version, gen.minVersion)) {\n\t\tsetError(`The minimum version for this generator is ${gen.minVersion}`)\n\t}\n\tif (!checkVersion(version, undefined, gen.maxVersion)) {\n\t\tsetError(`This generator is not available in versions above ${gen.maxVersion}`)\n\t}\n\n\tconst searchParams = getSearchParams(getCurrentUrl())\n\tconst currentPreset = searchParams.get('preset')\n\tconst sharedSnippetId = searchParams.get(SHARE_KEY)\n\tuseEffect(() => {\n\t\tif (model && currentPreset) {\n\t\t\tloadPreset(currentPreset).then(preset => {\n\t\t\t\tmodel.reset(DataModel.wrapLists(preset), false)\n\t\t\t\tsetSeachParams({ version, preset: currentPreset, [SHARE_KEY]: undefined })\n\t\t\t})\n\t\t} else if (model && sharedSnippetId) {\n\t\t\tgetSnippet(sharedSnippetId).then(s => loadSnippet(model, s))\n\t\t}\n\t}, [currentPreset, sharedSnippetId])\n\n\tconst loadSnippet = (model: DataModel, snippet: any) => {\n\t\tif (snippet.version && snippet.version !== version) {\n\t\t\tchangeVersion(snippet.version, false)\n\t\t}\n\t\tif (snippet.type && snippet.type !== gen.id) {\n\t\t\tconst snippetGen = config.generators.find(g => g.id === snippet.type)\n\t\t\tif (snippetGen) {\n\t\t\t\troute(`${cleanUrl(snippetGen.url)}?${SHARE_KEY}=${snippet.id}`)\n\t\t\t}\n\t\t}\n\t\tif (snippet.show_preview && !previewShown) {\n\t\t\tsetPreviewShown(true)\n\t\t\tsetSourceShown(false)\n\t\t}\n\t\tmodel.reset(DataModel.wrapLists(snippet.data), false)\n\t}\n\n\tconst backup = useMemo(() => Store.getBackup(gen.id), [gen.id])\n\n\tconst loadBackup = () => {\n\t\tif (backup !== undefined) {\n\t\t\tmodel?.reset(DataModel.wrapLists(backup), false)\n\t\t}\n\t}\n\n\tconst [model, setModel] = useState<DataModel | null>(null)\n\tconst [blockStates, setBlockStates] = useState<BlockStateRegistry | null>(null)\n\tuseEffect(() => {\n\t\tsetError(null)\n\t\tsetModel(null)\n\t\tgetBlockStates(version)\n\t\t\t.then(b => setBlockStates(b))\n\t\tgetModel(version, gen.id)\n\t\t\t.then(async m => {\n\t\t\t\tAnalytics.setGenerator(gen.id)\n\t\t\t\tif (currentPreset) {\n\t\t\t\t\tconst preset = await loadPreset(currentPreset)\n\t\t\t\t\tm.reset(DataModel.wrapLists(preset), false)\n\t\t\t\t} else if (sharedSnippetId) {\n\t\t\t\t\tconst snippet = await getSnippet(sharedSnippetId)\n\t\t\t\t\tloadSnippet(m, snippet)\n\t\t\t\t}\n\t\t\t\tsetModel(m)\n\t\t\t})\n\t\t\t.catch(e => { console.error(e); setError(e) })\n\t}, [version, gen.id])\n\n\tconst [dirty, setDirty] = useState(false)\n\tuseModel(model, () => {\n\t\tsetSeachParams({ version: undefined, preset: undefined, [SHARE_KEY]: undefined })\n\t\tStore.setBackup(gen.id, DataModel.unwrapLists(model?.data))\n\t\tsetError(null)\n\t\tsetDirty(true)\n\t}, [gen.id])\n\n\tconst [fileRename, setFileRename] = useState('')\n\tconst [fileSaved, doSave] = useActiveTimeout()\n\tconst [fileError, doFileError] = useActiveTimeout()\n\n\tconst doFileRename = () => {\n\t\tif (fileRename !== file?.id && fileRename && model && blockStates) {\n\t\t\tconst data = getOutput(model, blockStates)\n\t\t\tconst success = updateFile(gen.id, file?.id, { id: fileRename, data })\n\t\t\tif (success) {\n\t\t\t\tdoSave()\n\t\t\t} else {\n\t\t\t\tdoFileError()\n\t\t\t\tif (file) {\n\t\t\t\t\tsetFileRename(file?.id)\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (file) {\n\t\t\tsetFileRename(file?.id)\n\t\t}\n\t}\n\n\tconst deleteFile = () => {\n\t\tif (file) {\n\t\t\tupdateFile(gen.id, file.id, {})\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (file) {\n\t\t\tsetFileRename(file.id)\n\t\t}\n\t}, [file])\n\n\tuseEffect(() => {\n\t\tif (model) {\n\t\t\tsetFileRename(file?.id ?? '')\n\t\t\tif (file && gen.id === file.type) {\n\t\t\t\tmodel.reset(DataModel.wrapLists(file.data))\n\t\t\t}\n\t\t\tsetDirty(false)\n\t\t}\n\t}, [file, model])\n\n\tconst reset = () => {\n\t\tAnalytics.generatorEvent('reset')\n\t\tmodel?.reset(DataModel.wrapLists(model.schema.default()), true)\n\t}\n\tconst undo = (e: MouseEvent) => {\n\t\te.stopPropagation()\n\t\tAnalytics.generatorEvent('undo', 'Menu')\n\t\tmodel?.undo()\n\t}\n\tconst redo = (e: MouseEvent) => {\n\t\te.stopPropagation()\n\t\tAnalytics.generatorEvent('redo', 'Menu')\n\t\tmodel?.redo()\n\t}\n\n\tconst onKeyUp = (e: KeyboardEvent) => {\n\t\tif (e.ctrlKey && e.key === 'z') {\n\t\t\tAnalytics.generatorEvent('undo', 'Hotkey')\n\t\t\tmodel?.undo()\n\t\t} else if (e.ctrlKey && e.key === 'y') {\n\t\t\tAnalytics.generatorEvent('redo', 'Hotkey')\n\t\t\tmodel?.redo()\n\t\t}\n\t}\n\tconst onKeyDown = (e: KeyboardEvent) => {\n\t\tif (e.ctrlKey && e.key === 's') {\n\t\t\te.preventDefault()\n\t\t\tif (model && blockStates && file) {\n\t\t\t\tAnalytics.generatorEvent('save', 'Hotkey')\n\t\t\t\tconst data = getOutput(model, blockStates)\n\t\t\t\tupdateFile(gen.id, file?.id, { id: file?.id, data })\n\t\t\t\tsetDirty(false)\n\t\t\t\tdoSave()\n\t\t\t}\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keyup', onKeyUp)\n\t\tdocument.addEventListener('keydown', onKeyDown)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keyup', onKeyUp)\n\t\t\tdocument.removeEventListener('keydown', onKeyDown)\n\t\t}\n\t}, [model, blockStates, file])\n\n\tconst [presets, setPresets] = useState<string[]>([])\n\tuseEffect(() => {\n\t\tgetCollections(version).then(collections => {\n\t\t\tsetPresets(collections.get(gen.id).map(p => p.slice(10)))\n\t\t})\n\t\t\t.catch(e => { console.error(e); setError(e) })\n\t}, [version, gen.id])\n\n\tconst selectPreset = (id: string) => {\n\t\tAnalytics.generatorEvent('load-preset', id)\n\t\tsetSeachParams({ version, preset: id, [SHARE_KEY]: undefined })\n\t}\n\n\tconst loadPreset = async (id: string) => {\n\t\ttry {\n\t\t\tconst preset = await fetchPreset(version, gen.path ?? gen.id, id)\n\t\t\tconst seed = model?.get(new Path(['generator', 'seed']))\n\t\t\tif (preset?.generator?.seed !== undefined && seed !== undefined) {\n\t\t\t\tpreset.generator.seed = seed\n\t\t\t\tif (preset.generator.biome_source?.seed !== undefined) {\n\t\t\t\t\tpreset.generator.biome_source.seed = seed\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn preset\n\t\t} catch (e) {\n\t\t\tsetError(e instanceof Error ? e : message(e))\n\t\t}\n\t}\n\n\tconst selectVersion = (version: VersionId) => {\n\t\tsetSeachParams({ [SHARE_KEY]: undefined })\n\t\tchangeVersion(version)\n\t}\n\n\tconst [shareUrl, setShareUrl] = useState<string | undefined>(undefined)\n\tconst [shareShown, setShareShown] = useState(false)\n\tconst [shareCopyActive, shareCopySuccess] = useActiveTimeout({ cooldown: 3000 })\n\tconst share = () => {\n\t\tif (shareShown) {\n\t\t\tsetShareShown(false)\n\t\t\treturn\n\t\t}\n\t\tif (currentPreset) {\n\t\t\tsetShareUrl(`${location.protocol}//${location.host}/${gen.url}/?version=${version}&preset=${currentPreset}`)\n\t\t\tsetShareShown(true)\n\t\t\tcopySharedId()\n\t\t} else if (model && blockStates) {\n\t\t\tconst output = getOutput(model, blockStates)\n\t\t\tif (deepEqual(output, model.schema.default())) {\n\t\t\t\tsetShareUrl(`${location.protocol}//${location.host}/${gen.url}/?version=${version}`)\n\t\t\t\tsetShareShown(true)\n\t\t\t} else {\n\t\t\t\tshareSnippet(gen.id, version, output, previewShown)\n\t\t\t\t\t.then(url => {\n\t\t\t\t\t\tsetShareUrl(url)\n\t\t\t\t\t\tsetShareShown(true)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\t\t\tsetError(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\tconst copySharedId = () => {\n\t\tnavigator.clipboard.writeText(shareUrl ?? '')\n\t\tshareCopySuccess()\n\t}\n\tuseEffect(() => {\n\t\tif (!shareCopyActive) {\n\t\t\tsetShareUrl(undefined)\n\t\t\tsetShareShown(false)\n\t\t}\n\t}, [shareCopyActive])\n\n\tconst [sourceShown, setSourceShown] = useState(window.innerWidth > 820)\n\tconst [doCopy, setCopy] = useState(0)\n\tconst [doDownload, setDownload] = useState(0)\n\tconst [doImport, setImport] = useState(0)\n\n\tconst copySource = () => {\n\t\tAnalytics.generatorEvent('copy')\n\t\tsetCopy(doCopy + 1)\n\t}\n\tconst downloadSource = () => {\n\t\tAnalytics.generatorEvent('download')\n\t\tsetDownload(doDownload + 1)\n\t}\n\tconst importSource = () => {\n\t\tAnalytics.generatorEvent('import')\n\t\tsetSourceShown(true)\n\t\tsetImport(doImport + 1)\n\t}\n\tconst toggleSource = () => {\n\t\tAnalytics.generatorEvent('toggle-output', !sourceShown ? 'visible' : 'hidden')\n\t\tsetSourceShown(!sourceShown)\n\t\tsetCopy(0)\n\t\tsetDownload(0)\n\t\tsetImport(0)\n\t}\n\n\tconst [copyActive, copySuccess] = useActiveTimeout()\n\n\tconst [previewShown, setPreviewShown] = useState(false)\n\tconst hasPreview = HasPreview.includes(gen.id) && !(gen.id === 'worldgen/configured_feature' && checkVersion(version, '1.18'))\n\tif (previewShown && !hasPreview) setPreviewShown(false)\n\tlet actionsShown = 2\n\tif (hasPreview) actionsShown += 1\n\tif (sourceShown) actionsShown += 2\n\n\tconst togglePreview = () => {\n\t\tAnalytics.generatorEvent('toggle-preview', !previewShown ? 'visible' : 'hidden')\n\t\tsetPreviewShown(!previewShown)\n\t\tif (!previewShown && sourceShown) {\n\t\t\tsetSourceShown(false)\n\t\t}\n\t}\n\n\treturn <>\n\t\t<main class={previewShown ? 'has-preview' : ''}>\n\t\t\t<Ad id=\"data-pack-generator\" type=\"text\" />\n\t\t\t<div class=\"controls\">\n\t\t\t\t<div class={`project-controls ${file && 'has-file'}`}>\n\t\t\t\t\t<div class=\"btn-row\">\n\t\t\t\t\t\t<BtnMenu icon=\"repo\" label={project.name} relative={false}>\n\t\t\t\t\t\t\t<Btn icon=\"arrow_left\" label={locale('project.go_to')} onClick={() => route('/project')} />\n\t\t\t\t\t\t\t{file && <Btn icon=\"file\" label={locale('project.new_file')} onClick={closeFile} />}\n\t\t\t\t\t\t\t{backup !== undefined && <Btn icon=\"history\" label={locale('restore_backup')} onClick={loadBackup} />}\n\t\t\t\t\t\t\t<SearchList searchPlaceholder={locale(project.name === 'Drafts' ? 'project.search_drafts' : 'project.search')} noResults={locale('project.no_files')} values={project.files.filter(f => f.type === gen.id).map(f => f.id)} onSelect={(id) => openFile(gen.id, id)} />\n\t\t\t\t\t\t</BtnMenu>\n\t\t\t\t\t\t<TextInput class=\"btn btn-input\" placeholder={locale('project.unsaved_file')} value={fileRename} onChange={setFileRename} onEnter={doFileRename} onBlur={doFileRename} />\n\t\t\t\t\t\t{file && <Btn icon=\"trashcan\" tooltip={locale('project.delete_file')} onClick={deleteFile} />}\n\t\t\t\t\t</div>\n\t\t\t\t\t{dirty ? <div class=\"status-icon\">{Octicon.dot_fill}</div>\n\t\t\t\t\t\t: fileSaved ? <div class=\"status-icon active\">{Octicon.check}</div>\n\t\t\t\t\t\t\t: fileError && <div class=\"status-icon danger\">{Octicon.x}</div> }\n\t\t\t\t</div>\n\t\t\t\t<div class=\"generator-controls\">\n\t\t\t\t\t<Btn icon=\"upload\" label={locale('import')} onClick={importSource} />\n\t\t\t\t\t<BtnMenu icon=\"archive\" label={locale('presets')} relative={false}>\n\t\t\t\t\t\t<SearchList searchPlaceholder={locale('search')} noResults={locale('no_presets')} values={presets} onSelect={selectPreset}/>\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t\t<BtnMenu icon=\"tag\" label={version} tooltip={locale('switch_version')} data-cy=\"version-switcher\">\n\t\t\t\t\t\t{allowedVersions.reverse().map(v =>\n\t\t\t\t\t\t\t<Btn label={v} active={v === version} onClick={() => selectVersion(v)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t\t<BtnMenu icon=\"kebab_horizontal\" tooltip={locale('more')}>\n\t\t\t\t\t\t<Btn icon=\"history\" label={locale('reset')} onClick={reset} />\n\t\t\t\t\t\t<Btn icon=\"arrow_left\" label={locale('undo')} onClick={undo} />\n\t\t\t\t\t\t<Btn icon=\"arrow_right\" label={locale('redo')} onClick={redo} />\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t\t<Tree {...{model, version, blockStates}} onError={setError} />\n\t\t</main>\n\t\t<div class=\"popup-actions\" style={`--offset: -${8 + actionsShown * 50}px;`}>\n\t\t\t<div class={`popup-action action-preview${hasPreview ? ' shown' : ''} tooltipped tip-nw`} aria-label={locale(previewShown ? 'hide_preview' : 'show_preview')} onClick={togglePreview}>\n\t\t\t\t{previewShown ? Octicon.x_circle : Octicon.play}\n\t\t\t</div>\n\t\t\t<div class={'popup-action action-share shown tooltipped tip-nw'} aria-label={locale('share')} onClick={share}>\n\t\t\t\t{Octicon.link}\n\t\t\t</div>\n\t\t\t<div class={`popup-action action-download${sourceShown ? ' shown' : ''} tooltipped tip-nw`} aria-label={locale('download')} onClick={downloadSource}>\n\t\t\t\t{Octicon.download}\n\t\t\t</div>\n\t\t\t<div class={`popup-action action-copy${sourceShown ? ' shown' : ''}${copyActive ? ' active' : ''} tooltipped tip-nw`} aria-label={locale(copyActive ? 'copied' : 'copy')} onClick={copySource}>\n\t\t\t\t{copyActive ? Octicon.check : Octicon.clippy}\n\t\t\t</div>\n\t\t\t<div class={'popup-action action-code shown tooltipped tip-nw'} aria-label={locale(sourceShown ? 'hide_output' : 'show_output')} onClick={toggleSource}>\n\t\t\t\t{sourceShown ? Octicon.chevron_right : Octicon.code}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class={`popup-preview${previewShown ? ' shown' : ''}`}>\n\t\t\t<PreviewPanel {...{model, version, id: gen.id}} shown={previewShown} onError={setError} />\n\t\t</div>\n\t\t<div class={`popup-source${sourceShown ? ' shown' : ''}`}>\n\t\t\t<SourcePanel {...{model, blockStates, doCopy, doDownload, doImport}} name={gen.schema ?? 'data'} copySuccess={copySuccess} onError={setError} />\n\t\t</div>\n\t\t<div class={`popup-share${shareShown ? ' shown' : ''}`}>\n\t\t\t<TextInput value={shareUrl} readonly />\n\t\t\t<Btn icon={shareCopyActive ? 'check' : 'clippy'} onClick={copySharedId} tooltip={locale(shareCopyActive ? 'copied' : 'copy_share')} tooltipLoc=\"nw\" active={shareCopyActive} showTooltip={shareCopyActive} />\n\t\t</div>\n\t</>\n}\n","import config from '../../config.json'\nimport { Giscus, ToolCard } from '../components'\nimport { useLocale, useTitle } from '../contexts'\nimport { cleanUrl } from '../Utils'\n\ninterface Props {\n\tpath?: string,\n}\nexport function Home({}: Props) {\n\tconst { locale } = useLocale()\n\tuseTitle(locale('title.home'))\n\treturn <main>\n\t\t<div class=\"home\">\n\t\t\t<ToolCard title=\"Data packs\">\n\t\t\t\t{config.generators.filter(g => !g.category).map(g => \n\t\t\t\t\t<ToolCard title={locale(g.id)} link={cleanUrl(g.url)} />\n\t\t\t\t)}\n\t\t\t\t<ToolCard title={locale('worldgen')} link=\"/worldgen/\" />\n\t\t\t</ToolCard>\n\t\t\t<ToolCard title=\"Resource packs\">\n\t\t\t\t{config.generators.filter(g => g.category === 'assets').map(g =>\n\t\t\t\t\t<ToolCard title={locale(g.id)} link={cleanUrl(g.url)} />\n\t\t\t\t)}\n\t\t\t</ToolCard>\n\t\t\t<ToolCard title=\"Report Inspector\" icon=\"report\"\n\t\t\t\tlink=\"https://misode.github.io/report/\"\n\t\t\t\tdesc=\"Analyse your performance reports\" />\n\t\t\t<ToolCard title=\"Minecraft Sounds\" icon=\"sounds\"\n\t\t\t\tlink=\"/sounds/\"\n\t\t\t\tdesc=\"Browse through and mix all the vanilla sounds\" />\n\t\t\t<ToolCard title=\"Data Pack Upgrader\"\n\t\t\t\tlink=\"https://misode.github.io/upgrader/\"\n\t\t\t\tdesc=\"Convert your data packs from 1.16 to 1.17 to 1.18\" />\n\t\t\t<ToolCard title=\"Technical Changelog\" link=\"/changelog/\" />\n\t\t\t<ToolCard title=\"Minecraft Versions\" link=\"/versions/\" />\n\t\t\t<Giscus />\n\t\t</div>\n\t</main>\n}\n","import { useMemo } from 'preact/hooks'\nimport { Ad, TreeView } from '../components'\nimport { getFilePath, useLocale, useProject, useTitle } from '../contexts'\n\ninterface Props {\n\tpath?: string,\n}\nexport function Project({}: Props) {\n\tconst { locale } = useLocale()\n\tconst { project, openFile } = useProject()\n\tuseTitle(locale('title.project', project.name))\n\tconst entries = useMemo(() => project.files.map(getFilePath), project.files)\n\n\tconst selectFile = (entry: string) => {\n\t\tconst [, namespace, type, ...id] = entry.split('/')\n\t\topenFile(type, `${namespace}:${id}`)\n\t}\n\n\treturn <main>\n\t\t<Ad id=\"data-pack-project\" type=\"text\" />\n\t\t<div class=\"project\">\n\t\t\t<h2>{project.name}</h2>\n\t\t\t<div class=\"file-view\">\n\t\t\t\t<TreeView entries={entries} onSelect={selectFile}/>\n\t\t\t</div>\n\t\t</div>\n\t</main>\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport { Btn, BtnMenu, ErrorPanel, SoundConfig, TextInput } from '../components'\nimport { useLocale, useTitle, useVersion } from '../contexts'\nimport type { SoundEvents, VersionId } from '../services'\nimport { fetchSounds } from '../services'\nimport { hexId } from '../Utils'\n\ninterface Props {\n\tpath?: string,\n}\nexport function Sounds({}: Props) {\n\tconst { locale } = useLocale()\n\tconst { version, changeVersion } = useVersion()\n\tconst [error, setError] = useState<Error | null>(null)\n\tuseTitle(locale('title.sounds'))\n\n\tconst [sounds, setSounds] = useState<SoundEvents>({})\n\tconst soundKeys = Object.keys(sounds ?? {})\n\tuseEffect(() => {\n\t\tfetchSounds(version)\n\t\t\t.then(setSounds)\n\t\t\t.catch(e => { console.error(e); setError(e) })\n\t}, [version])\n\n\tconst [search, setSearch] = useState('')\n\tconst [configs, setConfigs] = useState<SoundConfig[]>([])\n\tconst addConfig = () => {\n\t\tsetConfigs([{ id: hexId(), sound: search, delay: 0, pitch: 1, volume: 1 }, ...configs])\n\t}\n\tconst editConfig = (id: string) => (changes: Partial<SoundConfig>) => {\n\t\tsetConfigs(configs.map(c => c.id === id ? { ...c, ...changes } : c))\n\t}\n\tconst deleteConfig = (id: string) => () => {\n\t\tsetConfigs(configs.filter(c => c.id !== id))\n\t}\n\n\tconst [delayedPlay, setDelayedPlay] = useState(0)\n\tconst playAll = () => {\n\t\tsetDelayedPlay(delayedPlay + 1)\n\t}\n\n\tconst download = useRef<HTMLAnchorElement>(null)\n\tconst downloadFunction = () => {\n\t\tconst hasDelay = configs.some(c => c.delay > 0)\n\t\tconst content = configs\n\t\t\t.sort((a, b) => a.delay - b.delay)\n\t\t\t.map(c => `${hasDelay ? `execute if score @s delay matches ${c.delay} run ` : ''}playsound minecraft:${c.sound} master @s ~ ~ ~ ${c.volume} ${c.pitch}`)\n\t\t\t.join('\\n')\n\t\tdownload.current.setAttribute('href', 'data:text/plain;charset=utf-8,' + content + '%0A')\n\t\tdownload.current.setAttribute('download', 'sounds.mcfunction')\n\t\tdownload.current.click()\n\t}\n\n\treturn <main>\n\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t{soundKeys.length > 0 && <>\n\t\t\t<div class=\"controls sounds-controls\">\n\t\t\t\t<div class=\"sound-search-group\">\n\t\t\t\t\t<TextInput class=\"btn btn-input sound-search\" list=\"sound-list\" placeholder={locale('sounds.search')}\n\t\t\t\t\t\tvalue={search} onChange={setSearch} onEnter={addConfig} />\n\t\t\t\t\t<Btn icon=\"plus\" tooltip={locale('sounds.add_sound')} class=\"add-sound\" onClick={addConfig} />\n\t\t\t\t</div>\n\t\t\t\t{configs.length > 1 && <Btn icon=\"play\" label={ locale('sounds.play_all')} class=\"play-all-sounds\" onClick={playAll} />}\n\t\t\t\t<div class=\"spacer\"></div>\n\t\t\t\t<Btn icon=\"download\" label={locale('download')} tooltip={locale('sounds.download_function')} class=\"download-sounds\" onClick={downloadFunction} />\n\t\t\t\t<BtnMenu icon=\"tag\" label={version}>\n\t\t\t\t\t{config.versions.reverse().map(v =>\n\t\t\t\t\t\t<Btn label={v.id} active={v.id === version} onClick={() => changeVersion(v.id as VersionId)} />\n\t\t\t\t\t)}\n\t\t\t\t</BtnMenu>\n\t\t\t</div>\n\t\t\t<div class=\"sounds\">\n\t\t\t\t{configs.map(c => <SoundConfig key={c.id} {...c} {...{ sounds, delayedPlay }} onEdit={editConfig(c.id)} onDelete={deleteConfig(c.id)} />)}\n\t\t\t</div>\n\t\t\t<a ref={download} style=\"display: none;\"></a>\n\t\t</>}\n\t\t<datalist id=\"sound-list\">\n\t\t\t{soundKeys.map(s => <option key={s} value={s} />)}\n\t\t</datalist>\n\t</main>\n}\n","import { getCurrentUrl } from 'preact-router'\nimport { useEffect, useState } from 'preact/hooks'\nimport { Ad, ErrorPanel, Octicon, VersionDetail, VersionList } from '../components'\nimport { useLocale, useTitle } from '../contexts'\nimport type { VersionMeta } from '../services'\nimport { fetchVersions } from '../services'\nimport { getSearchParams } from '../Utils'\n\ninterface Props {\n\tpath?: string,\n}\nexport function Versions({}: Props) {\n\tconst { locale } = useLocale()\n\tconst [error, setError] = useState<Error | null>(null)\n\tuseTitle(locale('title.versions'))\n\n\tconst [versions, setVersions] = useState<VersionMeta[]>([])\n\tuseEffect(() => {\n\t\tfetchVersions()\n\t\t\t.then(versions => setVersions(versions))\n\t\t\t.catch(e => { console.error(e); setError(e) })\n\t}, [])\n\n\tconst selectedId = getSearchParams(getCurrentUrl()).get('id')\n\tconst selected = versions.find(v => v.id === selectedId)\n\n\tuseTitle(selected ? selected.name : 'Versions Explorer', selected ? [] : undefined)\n\n\tconst nextVersion = selected && getOffsetVersion(versions, selected, -1)\n\tconst previousVersion = selected && getOffsetVersion(versions, selected, 1)\n\n\treturn <main>\n\t\t<Ad type=\"text\" id=\"versions\" />\n\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t<div class=\"versions\">\n\t\t\t{selectedId ? <>\n\t\t\t\t<div class=\"version-navigation\">\n\t\t\t\t\t<a class=\"btn btn-link\" href=\"/versions/\">\n\t\t\t\t\t\t{Octicon.three_bars}\n\t\t\t\t\t\t{locale('versions.all')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"btn btn-link\" {...previousVersion ? {href: `/versions/?id=${previousVersion.id}`} : {disabled: true}}>\n\t\t\t\t\t\t{Octicon.arrow_left}\n\t\t\t\t\t\t{locale('versions.previous')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"btn btn-link\" {...nextVersion ? {href: `/versions/?id=${nextVersion.id}`} : {disabled: true}}>\n\t\t\t\t\t\t{locale('versions.next')}\n\t\t\t\t\t\t{Octicon.arrow_right}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t{selected ? <VersionDetail version={selected} />\n\t\t\t\t\t: <div class=\"version-detail\">\n\t\t\t\t\t\t<h2>{selectedId}</h2>\n\t\t\t\t\t\t<div class=\"version-info\">\n\t\t\t\t\t\t\t<p>This version does not exist. Only versions since 1.14 are tracked, or it may be too recent.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>}\n\t\t\t</> : <VersionList versions={versions} link={id => `/versions/?id=${id}`} />}\n\t\t</div>\n\t</main>\n}\n\nfunction getOffsetVersion(versions: VersionMeta[], current: VersionMeta, offset: number) {\n\tconst currentIndex = versions.findIndex(v => v.id === current.id)\n\tconst offsetIndex = currentIndex + offset\n\tif (offsetIndex < 0 || offsetIndex >= versions.length) {\n\t\treturn undefined\n\t}\n\treturn versions[offsetIndex]\n}\n","import type { RouterOnChangeArgs } from 'preact-router'\nimport { Router } from 'preact-router'\nimport '../styles/global.css'\nimport '../styles/nodes.css'\nimport { Analytics } from './Analytics'\nimport { Header } from './components'\nimport { Category, Changelog, Generator, Home, Project, Sounds, Versions } from './pages'\nimport { cleanUrl } from './Utils'\n\nexport function App() {\n\tconst changeRoute = (e: RouterOnChangeArgs) => {\n\t\t// Needs a timeout to ensure the title is set correctly\n\t\tsetTimeout(() => Analytics.pageview(cleanUrl(e.url)))\n\t}\n\n\treturn <>\n\t\t<Header />\n\t\t<Router onChange={changeRoute}>\n\t\t\t<Home path=\"/\" />\n\t\t\t<Category path=\"/worldgen\" category=\"worldgen\" />\n\t\t\t<Category path=\"/assets\" category=\"assets\" />\n\t\t\t<Sounds path=\"/sounds\" />\n\t\t\t<Changelog path=\"/changelog\" />\n\t\t\t<Versions path=\"/versions\" />\n\t\t\t<Project path=\"/project\" />\n\t\t\t<Generator default />\n\t\t</Router>\n\t</>\n}\n","import { render } from 'preact'\nimport '../styles/global.css'\nimport '../styles/nodes.css'\nimport { App } from './App'\nimport { LocaleProvider, ProjectProvider, ThemeProvider, TitleProvider, VersionProvider } from './contexts'\n\nfunction Main() {\n\treturn <LocaleProvider>\n\t\t<ThemeProvider>\n\t\t\t<VersionProvider>\n\t\t\t\t<TitleProvider>\n\t\t\t\t\t<ProjectProvider>\n\t\t\t\t\t\t<App />\n\t\t\t\t\t</ProjectProvider>\n\t\t\t\t</TitleProvider>\n\t\t\t</VersionProvider>\n\t\t</ThemeProvider>\n\t</LocaleProvider>\n}\n\nrender(<Main />, document.body)\n"],"names":["Analytics","type","id","getElementById","remove","window","load","data-ea-publisher","data-ea-type","class","icon","label","active","clazz","tooltip","tooltipLoc","onClick","aria-label","Octicon","Analytics2","ID_SITE","ID_GENERATOR","category","action","index","value","pageview","page","setLanguage","language","setTheme","theme","setVersion","version","setPreview","preview","setGenerator","generator","setPrefersColorScheme","colorScheme","generatorEvent","obj","dec2hex","dec","toString","substr","length","arr","Uint8Array","crypto","getRandomValues","Array","from","join","BigInt","Math","floor","random","Number","MAX_SAFE_INTEGER","model","seed","dimensions","get","Path","set","isObject","keys","forEach","abs","s2","h","i","imul","charCodeAt","url","replaceAll","searchIndex","indexOf","slice","cleanUrl","trimmedUrl","getPath","replace","config","generators","find","g2","Map","split","map","param","decodeURIComponent","modifications","newPath","getCurrentUrl","searchParams","getSearchParams","entries","key","delete","search","encodeURIComponent","str","hashString","a2","b2","c","max","min","lerp","e","Error","message","deepClone","rfdc","constructor","isArray","deepEqual","valueOf","Object","prototype","hasOwnProperty","call","[object Object]","forward","backward","this","defaultValue","large","larger","doSelect","placeholder","dataList","onChange","onInput","value2","target","ref","useRef","current","select","dataListId","hexId","stopPropagation","list","cooldown","invert","initial","setActive","useState","timeout","setTimeout","size","draw","onDrag","onHover","onLeave","inputs","canvas","dragStart","dragRequest","dragPending","dragBusy","onMouseDown","offsetX","offsetY","onMouseMove","x","clientWidth","y2","clientHeight","dx","dy","requestAnimationFrame","async","dx2","dy2","onMouseUp","onMouseLeave","addEventListener","body","removeEventListener","redraw","redrawCount","ctx","getContext","width","height","img","getImageData","ownCount","putImageData","hider","query","prefers","setPrefers","matchMedia","matches","mediaQuery","invalidated","listener","addListener","removeListener","props","relative","children","useFocus","__spreadValues","Btn","__spreadProps","alert","xmlns","viewBox","fill-rule","d","archive","arrow_left","arrow_right","check","chevron_down","chevron_right","chevron_up","clippy","code","dash","device_desktop","dot_fill","download","duplicate","eye","eye_closed","file","file_directory","gear","globe","history","info","issue_opened","kebab_horizontal","link","link_external","mark_github","moon","play","plus","plus_circle","repo","sort_asc","sort_desc","square","square_fill","stack","sun","sync","tag","terminal","three_bars","trashcan","unfold","upload","x_circle","error","onDismiss","stackVisible","setStackVisible","setStack","stack2","line","mapped","mappedStack","useMemo","url2","name","href","checked","component","evt","fn","onKeyDown","onEnter","displayName","TextInput","BaseInput","v","NumberInput","RangeInput","values","onSelect","searchPlaceholder","noResults","setSearch","results","terms","trim","filter","every","includes","t","BtnInput","Changelogs","fetch","json","Promise","all","group","groupIndex","versionIndex","text","entry","tags","substring","content","parseChangelog","order","change","fetchChangelog","parseVersion","flat","fetchGroup","article","match","localStorage","removeItem","caches","mcmetaUrl","dynamic","getItem","cache","open","debug","promises","request","push","warn","deleteMatching","startsWith","setItem","data","getData","mcmeta","register","properties","default","versionId","registry","versions","cacheResponse","ok","fetchResponse","responseData","put","Response","JSON","stringify","VersionIds","Versions","Models","versionGetter","1.15","java15","1.16","java16","1.17","java17","1.18","java18","1.18.2","java182","1.19","java19","CachedDecorator","CachedFeature","CachedCollections","collections","getCollections","blockStates","collectionTarget","blockStateTarget","validateCache","fetchRegistries","fetchBlockStateMap","fetchData","schemas","getSchemas","minVersionId","maxVersionId","findIndex","minVersion","maxVersion","ShareCache","snippet","fetchApi","parse","decompressFromBase64","res","method","headers","Content-Type","errors","scriptRel","seen","__vitePreload","baseModule","deps","relList","document","createElement","supports","dep","isCss","endsWith","cssSelector","querySelector","rel","as","crossOrigin","head","appendChild","rej","then","Store","Store2","getLanguage","getTheme","getVersion","getIndent","getFormat","getHighlighting","getSoundsVersion","getProjects","projects","DRAFT_PROJECT","getBackup","setIndent","indent","setFormat","format","setHighlighting","highlighting","setSoundsVersion","setProjects","setBackup","backups","Locale","createContext","lang","locale","changeLanguage","Locales","fallback","English","params","parseInt","resolveLocaleParams","en","langConfig","languages","__variableDynamicImportRuntime0__","schema","__variableDynamicImportRuntime1__","useContext","useCallback","localize","lang2","loadLocale","Provider","namespace","files","Project","project","changeProject","updateProject","updateFile","openFile","closeFile","projectName","setProjectName","p","fileId","setFileId","f","changeProjects","projects2","edits","newId","exists","some","gen","path","Theme","actualTheme","changeTheme","prefersLight","useMediaQuery","prefersDark","documentElement","setAttribute","theme2","Title","title","changeTitle","context","useLocale","setTitle","title2","titleVersions","Version","changeVersion","targetVersion","version2","store","has","ready","LAYERS","temperature","humidity","continentalness","erosion","weirdness","offset","factor","jaggedness","cacheState","biomeSourceCache","state","options","newState","octaves","FixedBiome","Identifier","biome","shift","scale","numBiomes","biomes","_y","z","node","preset","checkVersion","NetherPreset18","NetherPreset","fetchPreset","biome_source","OverworldPreset18","DataModel","unwrapLists","init","wasm","loadWasm","BiomeIds","BiMap","t0","t1","h0","h1","c0","c1","e0","e1","w0","w1","d0","d1","o","depth","parameters","getOrPut","biome_parameters","Float64Array","Int32Array","sampler","climate_sampler","firstOctave","amplitudes","ids","multi_noise","getA","getBiomes","xFrom","xTo","xStep","yFrom","yTo","yStep","zFrom","zTo","zStep","climate","climate_noise","w","result","noise","config2","clamp","NormalNoise","LegacyRandom","n","n2","sample","minDist","Infinity","minBiome","dist","altitude","create","getBiomeSource","biomeSource","biomeColors","color","VanillaColors","stringToColor","minecraft:badlands","minecraft:badlands_plateau","minecraft:bamboo_jungle","minecraft:bamboo_jungle_hills","minecraft:basalt_deltas","minecraft:beach","minecraft:birch_forest","minecraft:birch_forest_hills","minecraft:cold_ocean","minecraft:crimson_forest","minecraft:dark_forest","minecraft:dark_forest_hills","minecraft:deep_cold_ocean","minecraft:deep_frozen_ocean","minecraft:deep_lukewarm_ocean","minecraft:deep_ocean","minecraft:deep_warm_ocean","minecraft:desert","minecraft:desert_hills","minecraft:desert_lakes","minecraft:end_barrens","minecraft:end_highlands","minecraft:end_midlands","minecraft:eroded_badlands","minecraft:flower_forest","minecraft:forest","minecraft:frozen_ocean","minecraft:frozen_river","minecraft:giant_spruce_taiga","minecraft:old_growth_spruce_taiga","minecraft:giant_spruce_taiga_hills","minecraft:giant_tree_taiga","minecraft:old_growth_pine_taiga","minecraft:giant_tree_taiga_hills","minecraft:gravelly_hills","minecraft:gravelly_mountains","minecraft:windswept_gravelly_hills","minecraft:ice_spikes","minecraft:jungle","minecraft:jungle_edge","minecraft:sparse_jungle","minecraft:jungle_hills","minecraft:lukewarm_ocean","minecraft:modified_badlands_plateau","minecraft:modified_gravelly_mountains","minecraft:modified_jungle","minecraft:modified_jungle_edge","minecraft:modified_wooded_badlands_plateau","minecraft:mountain_edge","minecraft:extreme_hills","minecraft:mountains","minecraft:windswept_hills","minecraft:mushroom_field_shore","minecraft:mushroom_fields","minecraft:nether_wastes","minecraft:ocean","minecraft:plains","minecraft:river","minecraft:savanna","minecraft:savanna_plateau","minecraft:shattered_savanna","minecraft:windswept_savanna","minecraft:shattered_savanna_plateau","minecraft:small_end_islands","minecraft:snowy_beach","minecraft:snowy_mountains","minecraft:snowy_taiga","minecraft:snowy_taiga_hills","minecraft:snowy_taiga_mountains","minecraft:snowy_tundra","minecraft:snowy_plains","minecraft:soul_sand_valley","minecraft:stone_shore","minecraft:stony_shore","minecraft:sunflower_plains","minecraft:swamp","minecraft:swamp_hills","minecraft:taiga","minecraft:taiga_hills","minecraft:taiga_mountains","minecraft:tall_birch_forest","minecraft:old_growth_birch_forest","minecraft:tall_birch_hills","minecraft:the_end","minecraft:the_void","minecraft:warm_ocean","minecraft:warped_forest","minecraft:wooded_badlands_plateau","minecraft:wooded_badlands","minecraft:wooded_hills","minecraft:wooded_mountains","minecraft:windswept_forest","minecraft:snowy_slopes","minecraft:lofty_peaks","minecraft:jagged_peaks","minecraft:snowcapped_peaks","minecraft:frozen_peaks","minecraft:stony_peaks","minecraft:grove","minecraft:meadow","minecraft:lush_caves","minecraft:dripstone_caves","altitude_noise","temperature_noise","humidity_noise","weirdness_noise","terrain","featureColors","placements","features","biomeInfoNoise","PerlinNoise","fork","seaLevel","nextFloat","nextInt","nextGaussian","sqrt","log","cos","PI","base","spread","normalize","min_inclusive","max_inclusive","sampleInt","source","normal","mean","deviation","totalWeight","distribution","reduce","sum","weight","placement","fill","pos","feature","j","anchor","_ctx","absolute","above_bottom","below_top","useFeature","featureFn","Features","decorator2","decoratorFn","Decorators","decorated","getPositions","decorator","getPlacements","random_boolean_selector","feature_true","feature_false","random_selector","chance","simple_random_selector","count","count_extra","extra_chance","extra_count","count_multilayer","count_noise","noise_level","below_noise","above_noise","count_noise_biased","noise_factor","ceil","noise_offset","noise_to_count_ratio","dark_oak_tree","_config","_","outer","flatMap","inner","depth_average","decorateY","baseline","emerald_ore","fire","glowstone","heightmap","heightmap_spread_double","heightmap_world_surface","iceberg","lava_lake","nope","range","maximum","top_offset","bottom_offset","range_biased","range_very_biased","spread_32_above","top_solid_heightmap","magma","surface_relative_threshold","water_lake","positions","modifier","PlacementModifiers","pos2","count_on_every_layer","environment_scan","height_range","resolveAnchor","n1","plateau","sampleHeight","in_square","noise_based_count","noise_threshold_count","random_offset","xz_spread","y_spread","rarity_filter","minLimitPerlinNoise","maxLimitPerlinNoise","mainPerlinNoise","depthNoise","settings","xOffset","chunkWidth","size_horizontal","chunkHeight","size_vertical","chunkCountY","amplified","biomeDepth","biomeScale","noiseColumnCache","cx","ox","noise1","fillNoiseColumn","noise2","yy","oy","d2","cachedColumn","xzScale","sampling","xz_scale","yScale","y_scale","xzFactor","xz_factor","yFactor","y_factor","randomDensity","random_density_offset","getRandomDensity","sampleAndClampNoise","getOctaveNoise","zo","falloff","density_factor","density_offset","top_slide","clampedLerp","bottom_slide","x2","wrap","y22","z2","minLimitNoise","maxLimitNoise","mainNoise","colors","minecraft:air","minecraft:water","minecraft:lava","minecraft:stone","minecraft:deepslate","minecraft:bedrock","minecraft:grass_block","minecraft:dirt","minecraft:gravel","minecraft:sand","minecraft:sandstone","minecraft:netherrack","minecraft:crimson_nylium","minecraft:warped_nylium","minecraft:basalt","minecraft:end_stone","generatorCache","chunkCache","registryCache","initRegistries","NoiseGeneratorSettings","fromJson","NoiseChunkGenerator","deepslate18.FixedBiome","deepslate18.NoiseChunkGenerator","getCached","LevelSlice","minY","generate","generator2","data2","state2","getBlockState","getName","OldNoiseChunkGenerator","reset","row","iterateNoiseColumn","reverse","getColor","XoroshiroRandom","forkPositional","NoiseSettings","min_y","terrain_shaper","originalFn","DensityFunction","mapAll","NoiseRouter","Visitor","createDensityFunction","density","compute","clampedMap","Registries","NoiseParameters","rootRegistries","Registry","root","fetchAllPresets","fetchRegistry","DENSITY_FUNCTION","clear","assign","getOrThrow","NOISE","minX","done","chunks","cached","Chunk","ChunkPos","Z","forcedBiome","chunk","buildSurface","chunkIndex","BiomeSourcePreview","shown","configuredSeed","randomSeed","setScale","focused","setFocused","layers","setLayers","Set","refineTimeout","legacy_random_source","getOctaves","calculateState","useCanvas","round","oz","col","xRange","zRange","l2","getClimates","worldX","worldZ","getBiomeColor","getBiome","brightness","biomeMap","xx","zz","toWorld","getClimate","changeScale","newScale","BtnMenu","enabled","newSeed","k","toUpperCase","toFixed","DecoratorPreview","setSeed","DensityFunctionPreview","autoScroll","setAutoScroll","scrollInterval","densityFunction","worldY","setInterval","NoisePreview","NoiseSettingsPreview","setBiome","setBiomeScale","setBiomeDepth","noiseSettings","block","minBlockX","maxBlockX","BlockPos","getNoiseBlock","allBiomes","HasPreview","setCount","hook","transformOutput","ModelPath","switchNode","getOwnPropertySymbols","blockState","validation","validator","relativePath","getActiveFields","activeFields","out","INDENT","2_spaces","4_spaces","tabs","minified","FORMATS","yaml","dump","flowLevel","doCopy","doDownload","doImport","copySuccess","onError","retransform","onImport","textarea","editor","getSerializedOutput","model2","blockStates2","getOutput","output","setValue","getValue","wrapLists","braceEditor","brace","edit","setOptions","fontSize","showFoldWidgets","highlightSelectedWord","$blockScrolling","on","getSession","setMode","indent2","format2","setOption","selectAll","configure","clipboard","writeText","click","data-cy","changeIndent","changeFormat","changeHighlighting","spellcheck","autocorrect","onBlur","style","mapper","getter","setter","silent","selectRegistries","hiddenFields","flattenedFields","inlineFields","nbtFields","fixedLists","collapsedFields","collapsableFields","keysModel","MapNode","StringNode","historyMax","prefix","suffix","renderHtml","data-category","boolean","states","BooleanSuffix","choices","choice","activeCase","contextPath","getModel","getArray","choiceContextPath","choiceContext","inject","c2","def","newValue","pathLocale","contextPush","expand","collapse","isToggled","useToggles","maxShown","setMaxShown","maxLength","ErrorPopup","modelPush","cValue","cId","cPath","canToggle","toggle","nested","Collapsed","MemoedTreeNode","actions","splice","disabled","keyPath","keysSchema","enum","last","add","ObjectNode","fromEntries","cSchema","number","NumberSuffix","getChildModelPath","isDecorated","wrapper","fields","originalFields","decorators","iterateNestedDecorators","ListNode","featurePath","decoratorsPath","ModelWrapper","path2","modelArr","equals","newDecorators","feature2","produceNestedDecorators","createDecoratorsWrapper","optional","onExpand","onCollapse","toggled","expanded","newCtx","pools","loot","child","context2","cPrefix","cSuffix","cBody","isFlattened","isInlined","HelpPopup","string","StringSuffix","toggleState","setToggleState","toggleAll","setToggleAll","ctrlKey","integer","parsed","parseFloat","padStart","getValues","isEnum","pool","additional","datalistId","findGenerator","values2","memo","onContextMenu","preventDefault","a","description","navigator","prev","next","hash","withModel","getAll","e2","message2","popupIcon","popup","useErrorBoundary","setState","FullNode","term","useTheme","themeSuffix","themeUrl","location","host","GiscusReact","repoId","categoryId","mapping","reactionsEnabled","emitMetadata","inputPosition","Themes","system","dark","light","useVersion","useTitle","getGenerator","Link","Icons","home","route","th","rx","y","report","sounds","cy","r","clip-rule","sound","delay","pitch","volume","onEdit","onDelete","delayedPlay","loading","setLoading","playing","setPlaying","invalid","setInvalid","howls","command","soundEvent","h2","stop","soundPath","howl","Howl","src","rate","completed","copyActive","setCopyActive","copyTimeout","step","desc","roots","groups","leaves","hidden","setHidden","entries2","TreeViewEntry","TreeView","activeTags","toggleTag","ArticleLink","ChangelogTag","dangerouslySetInnerHTML","__html","marked","changes","defaultOrder","setTags","filteredChangelogs","q2","toLowerCase","sort","setSort","sortedChangelogs","ChangelogEntry","tab","setTab","changelogs","setChangelogs","changelogs2","catch","console","VersionMetaData","releaseDate","release_target","data_version","protocol_version","data_pack_version","resource_pack_version","ChangelogList","Giscus","Date","release_time","toLocaleDateString","day","month","year","compact","snapshots","setSnapshots","filteredVersions","Checkbox","VersionEntry","ToolCard","setError","Ad","ErrorPanel","useProject","errorBoundary","errorRetry","allowedVersions","currentPreset","sharedSnippetId","loadSnippet","snippetGen","show_preview","previewShown","backup","setModel","setBlockStates","versionData","Reference","ChoiceNode","schemaName","validate","err","m","loadPreset","getSnippet","dirty","setDirty","fileRename","setFileRename","fileSaved","doSave","useActiveTimeout","fileError","doFileError","doFileRename","onKeyUp","undo","redo","presets","setPresets","shareUrl","setShareUrl","shareShown","setShareShown","shareCopyActive","shareCopySuccess","copySharedId","sourceShown","setSourceShown","innerWidth","setCopy","setDownload","setImport","setPreviewShown","hasPreview","actionsShown","SearchList","selectVersion","Tree","protocol","jsonData","lz","compressToBase64","raw","btoa","PreviewPanel","SourcePanel","readonly","showTooltip","getFilePath","setSounds","soundKeys","configs","setConfigs","addConfig","deleteConfig","setDelayedPlay","hasDelay","SoundConfig","setVersions","versions2","selectedId","selected","nextVersion","getOffsetVersion","previousVersion","VersionDetail","VersionList","offsetIndex","Header","Router","Home","Category","Sounds","Changelog","Generator","LocaleProvider","ThemeProvider","VersionProvider","TitleProvider","ProjectProvider","App","render","Main"],"mappings":"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"}