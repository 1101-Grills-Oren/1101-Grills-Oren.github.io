{"version":3,"file":"index.f31edd76.js","sources":["../../src/app/Analytics.ts","../../src/app/components/Ad.tsx","../../src/app/components/Btn.tsx","../../src/app/components/BtnInput.tsx","../../src/app/hooks/useCanvas.ts","../../src/app/hooks/useFocus.ts","../../src/app/hooks/useModel.ts","../../src/app/components/BtnMenu.tsx","../../src/app/components/Octicon.tsx","../../src/app/components/ErrorPanel.tsx","../../src/app/components/forms/Input.tsx","../../vite/preload-helper","../../src/app/Locales.ts","../../src/app/Utils.ts","../../src/app/Schemas.ts","../../src/app/DataFetcher.ts","../../src/app/previews/BiomeSource.ts","../../src/app/previews/Decorator.ts","../../src/app/previews/noise/NoiseChunkGenerator.ts","../../src/app/previews/NoiseSettings.ts","../../src/app/components/previews/BiomeSourcePreview.tsx","../../src/app/components/previews/DecoratorPreview.tsx","../../src/app/components/previews/NoiseSettingsPreview.tsx","../../src/app/components/generator/PreviewPanel.tsx","../../src/app/schema/transformOutput.ts","../../src/app/Store.ts","../../src/app/components/generator/SourcePanel.tsx","../../src/app/schema/ModelWrapper.ts","../../src/app/schema/renderHtml.tsx","../../src/app/components/generator/Tree.tsx","../../src/app/components/Header.tsx","../../src/app/components/Icons.tsx","../../src/app/components/sounds/SoundConfig.tsx","../../src/app/components/ToolCard.tsx","../../src/app/pages/Generator.tsx","../../src/app/pages/Home.tsx","../../src/app/Manifest.ts","../../src/app/pages/Sounds.tsx","../../src/app/pages/Worldgen.tsx","../../src/app/Main.tsx"],"sourcesContent":["export namespace Analytics {\n\tconst ID_SITE = 'Site'\n\tconst ID_GENERATOR = 'Generator'\n\n\tconst DIM_THEME = 1\n\tconst DIM_VERSION = 3\n\tconst DIM_LANGUAGE = 4\n\tconst DIM_PREVIEW = 5\n\n\tfunction event(category: string, action: string, label?: string) {\n\t\tga('send', 'event', category, action, label)\n\t}\n\n\tfunction dimension(index: number, value: string) {\n\t\tga('set', `dimension${index}`, value)\n\t}\n\n\texport function pageview(page: string) {\n\t\tga('set', 'page', page)\n\t\tga('send', 'pageview')\n\t}\n\n\texport function setLanguage(language: string) {\n\t\tdimension(DIM_LANGUAGE, language)\n\t\tevent(ID_SITE, 'set-language', language)\n\t}\n\n\texport function setTheme(theme: string) {\n\t\tdimension(DIM_THEME, theme)\n\t\tevent(ID_SITE, 'set-theme', theme)\n\t}\n\n\texport function setVersion(version: string) {\n\t\tdimension(DIM_VERSION, version)\n\t\tevent(ID_GENERATOR, 'set-version', version)\n\t}\n\n\texport function setPreview(preview: string) {\n\t\tdimension(DIM_PREVIEW, preview)\n\t\tevent(ID_GENERATOR, 'set-preview', preview)\n\t}\n\n\texport function generatorEvent(action: string, label?: string) {\n\t\tevent(ID_GENERATOR, action, label)\n\t}\n}\n","import { useEffect } from 'preact/hooks'\n\ndeclare const ethicalads: any\n\ntype AdProps = {\n\ttype: 'text' | 'image',\n\tid: string,\n}\nexport function Ad({ type, id }: AdProps) {\n\tuseEffect(() => {\n\t\tdocument.getElementById('ad-placeholder')?.remove()\n\t\tif ('ethicalads' in window) {\n\t\t\tethicalads.load()\n\t\t}\n\t}, [])\n\n\treturn <div data-ea-publisher=\"misode-github-io\" data-ea-type={type} class=\"ad dark flat\" id={id}></div>\n}\n","import { Octicon } from '.'\n\ntype BtnProps = {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\tactive?: boolean,\n\ttooltip?: string,\n\ttooltipLoc?: 'se' | 'sw' | 'nw',\n\tclass?: string,\n\tonClick?: (event: MouseEvent) => unknown,\n}\nexport function Btn({ icon, label, active, class: clazz, tooltip, tooltipLoc, onClick }: BtnProps) {\n\treturn <div class={`btn${active ? ' active' : ''}${clazz ? ` ${clazz}` : ''}${tooltip ? ` tooltipped tip-${tooltipLoc ?? 'sw'}` : ''}`} onClick={onClick} aria-label={tooltip}>\n\t\t{icon && Octicon[icon]}\n\t\t{label && <span>{label}</span>}\n\t</div>\n}\n","import { useEffect, useRef } from 'preact/hooks'\nimport { Octicon } from '.'\n\ntype BtnInputProps = {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\tlarge?: boolean,\n\tdoSelect?: number,\n\tvalue?: string,\n\tplaceholder?: string,\n\tonChange?: (value: string) => unknown,\n}\nexport function BtnInput({ icon, label, large, doSelect, value, placeholder, onChange }: BtnInputProps) {\n\tconst onInput = onChange === undefined ? () => {} : (e: any) => {\n\t\tconst value = (e.target as HTMLInputElement).value\n\t\tonChange?.(value)\n\t}\n\n\tconst ref = useRef<HTMLInputElement>(null)\n\tuseEffect(() => {\n\t\tif (doSelect && ref.current) {\n\t\t\tref.current.select()\n\t\t}\n\t}, [doSelect])\n\n\treturn <div class={`btn btn-input ${large ? 'large-input' : ''}`} onClick={e => e.stopPropagation()}>\n\t\t{icon && Octicon[icon]}\n\t\t{label && <span>{label}</span>}\n\t\t<input ref={ref} type=\"text\" value={value} onChange={onInput} placeholder={placeholder} />\n\t</div>\n}\n","import type { Inputs } from 'preact/hooks'\nimport { useEffect, useRef } from 'preact/hooks'\n\ntype Vec2 = [number, number]\n\nexport function useCanvas({ size, draw, onDrag, onHover, onLeave }: {\n\tsize: () => Vec2,\n\tdraw: (img: ImageData) => Promise<unknown>,\n\tonDrag?: (dx: number, dy: number) => Promise<unknown>,\n\tonHover?: (x: number, y: number) => unknown,\n\tonLeave?: () => unknown,\n}, inputs?: Inputs) {\n\tconst canvas = useRef<HTMLCanvasElement>(null)\n\n\tconst dragStart = useRef<Vec2 | undefined>()\n\tconst dragRequest = useRef<number>()\n\tconst dragPending = useRef<Vec2>([0, 0])\n\tconst dragBusy = useRef(false)\n\n\tuseEffect(() => {\n\t\tconst onMouseDown = (e: MouseEvent) => {\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\n\t\t}\n\t\tconst onMouseMove = (e: MouseEvent) => {\n\t\t\tif (dragStart.current === undefined) {\n\t\t\t\tconst x = e.offsetX  / canvas.current.clientWidth\n\t\t\t\tconst y = e.offsetY  / canvas.current.clientHeight\n\t\t\t\tonHover?.(x, y)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!onDrag) return\n\t\t\tconst dx = e.offsetX - dragStart.current[0]\n\t\t\tconst dy = e.offsetY - dragStart.current[1]\n\t\t\tif (!(dx === 0 && dy === 0)) {\n\t\t\t\tdragPending.current = [dragPending.current[0] + dx, dragPending.current[1] + dy]\n\t\t\t\tif (!dragBusy.current) {\n\t\t\t\t\tcancelAnimationFrame(dragRequest.current)\n\t\t\t\t\tdragRequest.current = requestAnimationFrame(async () => {\n\t\t\t\t\t\tdragBusy.current = true\n\t\t\t\t\t\tconst dx = dragPending.current[0] / canvas.current.clientWidth\n\t\t\t\t\t\tconst dy = dragPending.current[1] / canvas.current.clientHeight\n\t\t\t\t\t\tdragPending.current = [0, 0]\n\t\t\t\t\t\tawait onDrag?.(dx, dy)\n\t\t\t\t\t\tdragBusy.current = false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tdragStart.current = [e.offsetX, e.offsetY]\n\t\t}\n\t\tconst onMouseUp = () => {\n\t\t\tdragStart.current = undefined\n\t\t}\n\t\tconst onMouseLeave = () => {\n\t\t\tonLeave?.()\n\t\t}\n\n\t\tcanvas.current.addEventListener('mousedown', onMouseDown)\n\t\tcanvas.current.addEventListener('mousemove', onMouseMove)\n\t\tcanvas.current.addEventListener('mouseleave', onMouseLeave)\n\t\tdocument.body.addEventListener('mouseup', onMouseUp)\n\n\t\treturn () => {\n\t\t\tcanvas.current?.removeEventListener('mousedown', onMouseDown)\n\t\t\tcanvas.current?.removeEventListener('mousemove', onMouseMove)\n\t\t\tcanvas.current?.removeEventListener('mouseleave', onMouseLeave)\n\t\t\tdocument.body.removeEventListener('mouseup', onMouseUp)\n\t\t}\n\t}, [...inputs ?? [], canvas.current])\n\n\tconst redraw = useRef<() => Promise<unknown>>()\n\tconst redrawCount = useRef(0)\n\tredraw.current = async () => {\n\t\tconst ctx = canvas.current.getContext('2d')!\n\t\tconst s = size()\n\t\tcanvas.current.width = s[0]\n\t\tcanvas.current.height = s[1]\n\t\tconst img = ctx.getImageData(0, 0, s[0], s[1])\n\t\tconst ownCount = redrawCount.current += 1\n\t\tawait draw(img)\n\t\tif (ownCount === redrawCount.current) {\n\t\t\tctx.putImageData(img, 0, 0)\n\t\t}\n\t}\n\n\treturn {\n\t\tcanvas,\n\t\tredraw: redraw.current,\n\t}\n}\n","import { useEffect, useState } from 'preact/hooks'\n\nexport function useFocus(): [boolean, () => unknown] {\n\tconst [active, setActive] = useState(false)\n\n\tconst hider = () => {\n\t\tsetActive(false)\n\t}\n\n\tuseEffect(() => {\n\t\tif (active) {\n\t\t\tdocument.body.addEventListener('click', hider)\n\t\t\tdocument.body.addEventListener('contextmenu', hider)\n\t\t}\n\t\treturn () => {\n\t\t\tdocument.body.removeEventListener('click', hider)\n\t\t\tdocument.body.removeEventListener('contextmenu', hider)\n\t\t}\n\t}, [active])\n\n\treturn [active, () => setActive(true)]\n}\n","import type { DataModel } from '@mcschema/core'\nimport { useEffect } from 'preact/hooks'\n\nexport function useModel(model: DataModel | undefined | null, invalidated: (model: DataModel) => unknown) {\n\tconst listener = {\n\t\tinvalidated() {\n\t\t\tif (model) {\n\t\t\t\tinvalidated(model)\n\t\t\t}\n\t\t},\n\t}\n\n\tuseEffect(() => {\n\t\tmodel?.addListener(listener)\n\t\treturn () => {\n\t\t\tmodel?.removeListener(listener)\n\t\t}\n\t}, [model])\n}\n","import type { ComponentChildren } from 'preact'\nimport type { Octicon } from '.'\nimport { Btn } from '.'\nimport { useFocus } from '../hooks'\n\ntype BtnMenuProps = {\n\ticon?: keyof typeof Octicon,\n\tlabel?: string,\n\trelative?: boolean,\n\ttooltip?: string,\n\tchildren: ComponentChildren,\n}\nexport function BtnMenu({ icon, label, relative, tooltip, children }: BtnMenuProps) {\n\tconst [active, setActive] = useFocus()\n\n\treturn <div class={`btn-menu${relative === false ? ' no-relative' : ''}`}>\n\t\t<Btn {...{icon, label, tooltip}} onClick={setActive} />\n\t\t{active && <div class=\"btn-group\">\n\t\t\t{children}\n\t\t</div>}\n\t</div>\n}\n","export const Octicon = {\n\talert: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path></svg>,\n\tarchive: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5a.25.25 0 00-.25.25v1.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-1.5a.25.25 0 00-.25-.25H1.75zM0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v1.5A1.75 1.75 0 0114.25 6H1.75A1.75 1.75 0 010 4.25v-1.5zM1.75 7a.75.75 0 01.75.75v5.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25v-5.5a.75.75 0 111.5 0v5.5A1.75 1.75 0 0113.25 15H2.75A1.75 1.75 0 011 13.25v-5.5A.75.75 0 011.75 7zm4.5 1a.75.75 0 000 1.5h3.5a.75.75 0 100-1.5h-3.5z\"></path></svg>,\n\tarrow_left: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z\"></path></svg>,\n\tarrow_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z\"></path></svg>,\n\tcheck: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z\"></path></svg>,\n\tchevron_down: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>,\n\tchevron_right: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z\"></path></svg>,\n\tchevron_up: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z\"></path></svg>,\n\tclippy: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z\"></path></svg>,\n\tcode: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z\"></path></svg>,\n\tdash: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2 8a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H2.75A.75.75 0 012 8z\"></path></svg>,\n\tdevice_desktop: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.75 2.5h12.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25zM14.25 1H1.75A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z\"></path></svg>,\n\tdownload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tduplicate: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M10.5 3a.75.75 0 01.75.75v1h1a.75.75 0 010 1.5h-1v1a.75.75 0 01-1.5 0v-1h-1a.75.75 0 010-1.5h1v-1A.75.75 0 0110.5 3z\"></path><path fill-rule=\"evenodd\" d=\"M6.75 0A1.75 1.75 0 005 1.75v7.5c0 .966.784 1.75 1.75 1.75h7.5A1.75 1.75 0 0016 9.25v-7.5A1.75 1.75 0 0014.25 0h-7.5zM6.5 1.75a.25.25 0 01.25-.25h7.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5z\"></path><path d=\"M1.75 5A1.75 1.75 0 000 6.75v7.5C0 15.216.784 16 1.75 16h7.5A1.75 1.75 0 0011 14.25v-1.5a.75.75 0 00-1.5 0v1.5a.25.25 0 01-.25.25h-7.5a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25h1.5a.75.75 0 000-1.5h-1.5z\"></path></svg>,\n\teye: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z\"></path></svg>,\n\teye_closed: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M.143 2.31a.75.75 0 011.047-.167l14.5 10.5a.75.75 0 11-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.618 1.618 0 010-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 01.143 2.31zm3.386 3.378a14.21 14.21 0 00-1.85 2.244.12.12 0 00-.022.068c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 016.058 7.52l-2.53-1.832zM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 11-.473-1.423A6.23 6.23 0 018 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.619 1.619 0 010 1.798c-.11.166-.248.365-.41.587a.75.75 0 11-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 000-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5z\"></path></svg>,\n\tgear: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z\"></path></svg>,\n\tglobe: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.543 7.25h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.506 6.506 0 00-4.666 5.5zm2.733 1.5H1.543a6.506 6.506 0 004.666 5.5 11.13 11.13 0 01-.352-.552c-.715-1.192-1.437-2.874-1.581-4.948zm1.504 0h4.44a9.637 9.637 0 01-1.363 4.177c-.306.51-.612.919-.857 1.215a9.978 9.978 0 01-.857-1.215A9.637 9.637 0 015.78 8.75zm4.44-1.5H5.78a9.637 9.637 0 011.363-4.177c.306-.51.612-.919.857-1.215.245.296.55.705.857 1.215A9.638 9.638 0 0110.22 7.25zm1.504 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.506 6.506 0 004.666-5.5h-2.733zm2.733-1.5h-2.733c-.144-2.074-.866-3.756-1.58-4.948a11.738 11.738 0 00-.353-.552 6.506 6.506 0 014.666 5.5zM8 0a8 8 0 100 16A8 8 0 008 0z\"></path></svg>,\n\thistory: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.643 3.143L.427 1.927A.25.25 0 000 2.104V5.75c0 .138.112.25.25.25h3.646a.25.25 0 00.177-.427L2.715 4.215a6.5 6.5 0 11-1.18 4.458.75.75 0 10-1.493.154 8.001 8.001 0 101.6-5.684zM7.75 4a.75.75 0 01.75.75v2.992l2.028.812a.75.75 0 01-.557 1.392l-2.5-1A.75.75 0 017 8.25v-3.5A.75.75 0 017.75 4z\"></path></svg>,\n\tinfo: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path></svg>,\n\tissue_opened: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z\"></path></svg>,\n\tkebab_horizontal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z\"></path></svg>,\n\tlink: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z\"></path></svg>,\n\tmark_github: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>,\n\tmoon: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z\"></path></svg>,\n\tplay: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM6.379 5.227A.25.25 0 006 5.442v5.117a.25.25 0 00.379.214l4.264-2.559a.25.25 0 000-.428L6.379 5.227z\"></path></svg>,\n\tplus: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2a.75.75 0 01.75.75v4.5h4.5a.75.75 0 010 1.5h-4.5v4.5a.75.75 0 01-1.5 0v-4.5h-4.5a.75.75 0 010-1.5h4.5v-4.5A.75.75 0 018 2z\"></path></svg>,\n\tplus_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zm.75 4.75a.75.75 0 00-1.5 0v2.5h-2.5a.75.75 0 000 1.5h2.5v2.5a.75.75 0 001.5 0v-2.5h2.5a.75.75 0 000-1.5h-2.5v-2.5z\"></path></svg>,\n\tsearch: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z\"></path></svg>,\n\tsun: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z\"></path></svg>,\n\tsync: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z\"></path></svg>,\n\ttag: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z\"></path></svg>,\n\tterminal: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0114.25 15H1.75A1.75 1.75 0 010 13.25V2.75zm1.75-.25a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25H1.75zM7.25 8a.75.75 0 01-.22.53l-2.25 2.25a.75.75 0 11-1.06-1.06L5.44 8 3.72 6.28a.75.75 0 111.06-1.06l2.25 2.25c.141.14.22.331.22.53zm1.5 1.5a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z\"></path></svg>,\n\tthree_bars: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z\"></path></svg>,\n\ttrashcan: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z\"></path></svg>,\n\tunfold: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path d=\"M8.177.677l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25a.75.75 0 01-1.5 0V4H5.104a.25.25 0 01-.177-.427L7.823.677a.25.25 0 01.354 0zM7.25 10.75a.75.75 0 011.5 0V12h2.146a.25.25 0 01.177.427l-2.896 2.896a.25.25 0 01-.354 0l-2.896-2.896A.25.25 0 015.104 12H7.25v-1.25zm-5-2a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z\"></path></svg>,\n\tupload: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M8.53 1.22a.75.75 0 00-1.06 0L3.72 4.97a.75.75 0 001.06 1.06l2.47-2.47v6.69a.75.75 0 001.5 0V3.56l2.47 2.47a.75.75 0 101.06-1.06L8.53 1.22zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z\"></path></svg>,\n\tx: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z\"></path></svg>,\n\tx_circle: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M3.404 12.596a6.5 6.5 0 119.192-9.192 6.5 6.5 0 01-9.192 9.192zM2.344 2.343a8 8 0 1011.313 11.314A8 8 0 002.343 2.343zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z\"></path></svg>,\n}\n","import { Octicon } from './Octicon'\n\ntype ErrorPanelProps = {\n\terror: string,\n\tonDismiss?: () => unknown,\n}\nexport function ErrorPanel({ error, onDismiss }: ErrorPanelProps) {\n\treturn <div class=\"error\">\n\t\t{onDismiss && <div class=\"error-dismiss\" onClick={onDismiss}>{Octicon.x}</div>}\n\t\t<h3>{error}</h3>\n\t\t<p>If you think this is a bug, you can report it <a href=\"https://github.com/misode/misode.github.io/issues/new\" target=\"_blank\">on GitHub</a></p>\n\t</div>\n}\n","import type { JSXInternal } from 'preact/src/jsx'\n\ntype InputProps = JSXInternal.HTMLAttributes<HTMLInputElement>\n\ntype BaseInputProps<T> = Omit<InputProps, 'onChange' | 'type'> & {\n\tonChange?: (value: T) => unknown,\n\tonEnter?: (value: T) => unknown,\n}\nfunction BaseInput<T>(name: string, type: string, fn: (value: string) => T) {\n\tconst component = (props: BaseInputProps<T>) => {\n\t\tconst onChange = props.onChange && ((evt: Event) => {\n\t\t\tconst value = (evt.target as HTMLInputElement).value\n\t\t\tprops.onChange?.(fn(value))\n\t\t})\n\t\tconst onKeyDown = props.onEnter && ((evt: KeyboardEvent) => {\n\t\t\tif (evt.key === 'Enter') {\n\t\t\t\tconst value = (evt.target as HTMLInputElement).value\n\t\t\t\tprops.onEnter?.(fn(value))\n\t\t\t}\n\t\t})\n\t\treturn <input {...props} {...{ type, onChange, onKeyDown }} />\n\t}\n\tcomponent.displayName = name\n\treturn component\n}\n\nexport const TextInput = BaseInput('TextInput', 'text', v => v)\n\nexport const NumberInput = BaseInput('NumberInput', 'number', v => Number(v))\n\nexport const RangeInput = BaseInput('RangeInput', 'range', v => Number(v))\n","let scriptRel;const seen = {};export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps) {\n        return baseModule();\n    }\n    // @ts-ignore\n    if (scriptRel === undefined) {\n        // @ts-ignore\n        const relList = document.createElement('link').relList;\n        // @ts-ignore\n        scriptRel =\n            relList && relList.supports && relList.supports('modulepreload')\n                ? 'modulepreload'\n                : 'preload';\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","import config from '../config.json'\nimport English from '../locales/en.json'\n\nexport type Localize = (key: string, ...params: string[]) => string\n\ninterface Locale {\n\t[key: string]: string\n}\n\nexport const Locales: {\n\t[key: string]: Locale,\n} = {\n\tfallback: English,\n}\n\nfunction resolveLocaleParams(value: string, params?: string[]): string {\n\treturn value.replace(/%\\d+%/g, match => {\n\t\tconst index = parseInt(match.slice(1, -1))\n\t\treturn params?.[index] !== undefined ? params[index] : match\n\t})\n}\n\nexport function locale(language: string, key: string, ...params: string[]): string {\n\tconst value: string | undefined = Locales[language]?.[key]\n\t\t?? Locales.en?.[key] ?? Locales.fallback[key] ?? key\n\treturn resolveLocaleParams(value, params)\n}\n\nexport async function loadLocale(language: string) {\n\tconst langConfig = config.languages.find(lang => lang.code === language)\n\tif (!langConfig) return\n\tconst data = await import(`../locales/${language}.json`)\n\tconst schema = langConfig.schemas !== false\n\t\t&& await import(`../../node_modules/@mcschema/locales/src/${language}.json`)\n\tLocales[language] = { ...data.default, ...schema.default }\n}\n","import type { DataModel } from '@mcschema/core'\nimport { Path } from '@mcschema/core'\nimport rfdc from 'rfdc'\nimport config from '../config.json'\n\nexport function isPromise(obj: any): obj is Promise<any> {\n\treturn typeof (obj as any)?.then === 'function' \n}\n\nexport function isObject(obj: any) {\n\treturn typeof obj === 'object' && obj !== null\n}\n\nconst dec2hex = (dec: number) => ('0' + dec.toString(16)).substr(-2)\n\nexport function hexId(length = 12) {\n\tvar arr = new Uint8Array(length / 2)\n\twindow.crypto.getRandomValues(arr)\n\treturn Array.from(arr, dec2hex).join('')\n}\n\nexport function randomSeed() {\n\treturn BigInt(Math.floor(Math.random() * Number.MAX_SAFE_INTEGER))\n}\n\nexport function newSeed(model: DataModel) {\n\tconst seed = Math.floor(Math.random() * (4294967296)) - 2147483648\n\tconst dimensions = model.get(new Path(['dimensions']))\n\tmodel.set(new Path(['seed']), seed, true)\n\tif (typeof dimensions === 'object' && dimensions !== null) {\n\t\tObject.keys(dimensions).forEach(id => {\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'seed']), seed, true)\n\t\t\tmodel.set(new Path(['dimensions', id, 'generator', 'biome_source', 'seed']), seed, true)\n\t\t})\n\t}\n\tmodel.set(new Path(['generator', 'seed']), seed, true)\n\tmodel.set(new Path(['generator', 'biome_source', 'seed']), seed)\n}\n\nexport function htmlEncode(str: string) {\n\treturn str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\\//g, '&#x2F;')\n}\n\nexport function hashString(s: string) {\n\tlet h = 0\n\tfor(let i = 0; i < s.length; i++)\n\t\th = Math.imul(31, h) + s.charCodeAt(i) | 0\n\treturn h\n}\n\nexport function cleanUrl(url: string) {\n\treturn `/${url}/`.replaceAll('//', '/')\n}\n\nexport function getGenerator(url: string) {\n\tconst trimmedUrl = url.replace(/^\\//, '').replace(/\\/$/, '')\n\treturn config.generators.find(g => g.url === trimmedUrl)\n}\n\nexport function stringToColor(str: string): [number, number, number] {\n\tconst h = Math.abs(hashString(str))\n\treturn [h % 256, (h >> 8) % 256, (h >> 16) % 256]\n}\n\nexport function square(a: number) {\n\treturn a * a\n}\n\nexport function clamp(a: number, b: number, c: number) {\n\treturn Math.max(a, Math.min(b, c))\n}\n\nexport function clampedLerp(a: number, b: number, c: number): number {\n\tif (c < 0) {\n\t\treturn a\n\t} else if (c > 1) {\n\t\treturn b\n\t} else {\n\t\treturn lerp(c, a, b)\n\t}\n}\n\nexport function lerp(a: number, b: number, c: number): number {\n\treturn b + a * (c - b)\n}\n\nexport function lerp2(a: number, b: number, c: number, d: number, e: number, f: number): number {\n\treturn lerp(b, lerp(a, c, d), lerp(a, e, f))\n}\n\nexport function lerp3(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number, j: number, k: number) {\n\treturn lerp(c, lerp2(a, b, d, e, f, g), lerp2(a, b, h, i, j, k))\n}\n\nexport function smoothstep(x: number): number {\n\treturn x * x * x * (x * (x * 6 - 15) + 10)\n}\n\nexport function message(e: unknown): string {\n\tif (e instanceof Error) return e.message\n\treturn `${e}`\n}\n\nexport const deepClone = rfdc()\n\n/**\n * MIT License\n * \n * Copyright (c) 2017 Evgeny Poberezkin\n * \n * https://github.com/epoberezkin/fast-deep-equal/blob/master/LICENSE\n */\nexport function deepEqual(a: any, b: any) {\n\tif (a === b) return true\n\n\tif (a && b && typeof a == 'object' && typeof b == 'object') {\n\t\tif (a.constructor !== b.constructor) return false\n\t\tlet length, i\n\t\tif (Array.isArray(a)) {\n\t\t\tlength = a.length\n\t\t\tif (length != b.length) return false\n\t\t\tfor (i = 0; i < length; i++) {\n\t\t\t\tif (!deepEqual(a[i], b[i])) return false\n\t\t\t}\n\t\t\treturn true\n\t\t}\n\t\tif (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf()\n\t\tif (a.toString !== Object.prototype.toString) return a.toString() === b.toString()\n\t\tconst keys = Object.keys(a)\n\t\tlength = keys.length\n\t\tif (length !== Object.keys(b).length) return false\n\t\tfor (i = length; i-- !== 0;)\n\t\t\tif (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\t\tfor (i = length; i-- !== 0;) {\n\t\t\tconst key = keys[i]\n\t\t\tif (!deepEqual(a[key], b[key])) return false\n\t\t}\n\t\treturn true\n\t}\n\treturn a !== a && b !== b\n}\n","import type { CollectionRegistry, INode, SchemaRegistry } from '@mcschema/core'\nimport { ChoiceNode, DataModel, Reference, StringNode } from '@mcschema/core'\nimport * as java15 from '@mcschema/java-1.15'\nimport * as java16 from '@mcschema/java-1.16'\nimport * as java17 from '@mcschema/java-1.17'\nimport * as java18 from '@mcschema/java-1.18'\nimport config from '../config.json'\nimport { fetchData } from './DataFetcher'\nimport { message } from './Utils'\n\nexport const VersionIds = ['1.15', '1.16', '1.17', '1.18'] as const\nexport type VersionId = typeof VersionIds[number]\n\nexport type BlockStateRegistry = {\n\t[block: string]: {\n\t\tproperties?: {\n\t\t\t[key: string]: string[],\n\t\t},\n\t\tdefault?: {\n\t\t\t[key: string]: string,\n\t\t},\n\t},\n}\n\ntype VersionData = {\n\tcollections: CollectionRegistry,\n\tschemas: SchemaRegistry,\n\tblockStates: BlockStateRegistry,\n}\nconst Versions: Record<string, VersionData | Promise<VersionData>> = {}\n\ntype ModelData = {\n\tmodel: DataModel,\n\tversion: VersionId,\n}\nconst Models: Record<string, ModelData> = {}\n\nconst versionGetter: {\n\t[versionId in VersionId]: {\n\t\tgetCollections: () => CollectionRegistry,\n\t\tgetSchemas: (collections: CollectionRegistry) => SchemaRegistry,\n\t}\n} = {\n\t1.15: java15,\n\t1.16: java16,\n\t1.17: java17,\n\t1.18: java18,\n}\n\nexport let CachedDecorator: INode<any>\nexport let CachedFeature: INode<any>\n\nasync function getVersion(id: VersionId): Promise<VersionData> {\n\tif (!Versions[id]) {\n\t\tVersions[id] = (async () => {\n\t\t\ttry {\n\t\t\t\tconst collections = versionGetter[id].getCollections()\n\t\t\t\tconst blockStates: BlockStateRegistry = {}\n\t\t\t\tawait fetchData(id, collections, blockStates)\n\t\t\t\tconst schemas = versionGetter[id].getSchemas(collections)\n\t\t\t\tVersions[id] = { collections, schemas, blockStates }\n\t\t\t\treturn Versions[id]\n\t\t\t} catch (e) {\n\t\t\t\tthrow new Error(`Cannot get version \"${id}\": ${message(e)}`)\n\t\t\t}\n\t\t})()\n\t\treturn Versions[id]\n\t}\n\treturn Versions[id]\n}\n\nexport async function getModel(version: VersionId, id: string): Promise<DataModel> {\n\tif (!Models[id] || Models[id].version !== version) {\n\t\tconst versionData = await getVersion(version)\n\t\t\n\t\tCachedDecorator = Reference(versionData.schemas, 'configured_decorator')\n\t\tCachedFeature = ChoiceNode([\n\t\t\t{\n\t\t\t\ttype: 'string',\n\t\t\t\tnode: StringNode(versionData.collections, { validator: 'resource', params: { pool: '$worldgen/configured_feature' } }),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'object',\n\t\t\t\tnode: Reference(versionData.schemas, 'configured_feature'),\n\t\t\t},\n\t\t], { choiceContext: 'feature' })\n\n\t\tconst schemaName = config.generators.find(g => g.id === id)?.schema\n\t\tif (!schemaName) {\n\t\t\tthrow new Error(`Cannot find model ${id}`)\n\t\t}\n\t\ttry {\n\t\t\tconst schema = versionData.schemas.get(schemaName)\n\t\t\tconst model = new DataModel(schema, { wrapLists: true })\n\t\t\tif (Models[id]) {\n\t\t\t\tmodel.reset(Models[id].model.data, false)\n\t\t\t} else {\n\t\t\t\tmodel.validate(true)\n\t\t\t\tmodel.history = [JSON.stringify(model.data)]\n\t\t\t}\n\t\t\tModels[id] = { model, version }\n\t\t} catch (e) {\n\t\t\tthrow new Error(`Cannot get generator \"${id}\" for version \"${version}\": ${message(e)}`)\n\t\t}\n\t}\n\treturn Models[id].model\n}\n\nexport async function getCollections(version: VersionId): Promise<CollectionRegistry> {\n\tconst versionData = await getVersion(version)\n\treturn versionData.collections\n}\n\nexport async function getBlockStates(version: VersionId): Promise<BlockStateRegistry> {\n\tconst versionData = await getVersion(version)\n\treturn versionData.blockStates\n}\n\nexport function checkVersion(versionId: string, minVersionId: string | undefined, maxVersionId?: string) {\n\tconst version = config.versions.findIndex(v => v.id === versionId)\n\tconst minVersion = minVersionId ? config.versions.findIndex(v => v.id === minVersionId) : 0\n\tconst maxVersion = maxVersionId ? config.versions.findIndex(v => v.id === maxVersionId) : config.versions.length - 1\n\treturn minVersion <= version && version <= maxVersion\n}\n","import type { CollectionRegistry } from '@mcschema/core'\nimport config from '../config.json'\nimport type { VersionAssets, VersionManifest } from './Manifest'\nimport type { BlockStateRegistry, VersionId } from './Schemas'\nimport { checkVersion } from './Schemas'\nimport { message } from './Utils'\n\n['1.15', '1.16', '1.17'].forEach(v => localStorage.removeItem(`cache_${v}`))\n\nconst CACHE_NAME = 'misode-v1'\n\ntype VersionRef = 'mcdata_master' | 'vanilla_datapack_summary' | 'vanilla_datapack_data'\n\ntype Version = {\n\tid: string,\n\trefs: Partial<{ [key in VersionRef]: string }>,\n\tdynamic?: boolean,\n}\n\ndeclare var __MCDATA_MASTER_HASH__: string\ndeclare var __VANILLA_DATAPACK_SUMMARY_HASH__: string\n\nconst mcdataUrl = 'https://raw.githubusercontent.com/Arcensoth/mcdata'\nconst vanillaDatapackUrl = 'https://raw.githubusercontent.com/SPGoding/vanilla-datapack'\nconst manifestUrl = 'https://launchermeta.mojang.com/mc/game/version_manifest.json'\nconst resourceUrl = 'https://resources.download.minecraft.net/'\nconst corsUrl = 'https://misode-cors-anywhere.herokuapp.com/'\n\nconst refs: {\n\tid: VersionRef,\n\thash: string,\n\turl: string,\n}[] = [\n\t{\n\t\tid: 'mcdata_master',\n\t\thash: __MCDATA_MASTER_HASH__,\n\t\turl: mcdataUrl,\n\t},\n\t{\n\t\tid: 'vanilla_datapack_summary',\n\t\thash: __VANILLA_DATAPACK_SUMMARY_HASH__,\n\t\turl: vanillaDatapackUrl,\n\t},\n]\n\nexport async function fetchData(versionId: string, collectionTarget: CollectionRegistry, blockStateTarget: BlockStateRegistry) {\n\tconst version = config.versions.find(v => v.id === versionId) as Version | undefined\n\tif (!version) {\n\t\tconsole.error(`[fetchData] Unknown version ${version} in ${JSON.stringify(config.versions)}`)\n\t\treturn\n\t}\n\tconsole.debug(`[fetchData] ${JSON.stringify(version)}`)\n\n\tif (version.dynamic) {\n\t\tawait Promise.all(refs\n\t\t\t.filter(r => localStorage.getItem(`cached_${r.id}`) !== r.hash)\n\t\t\t.map(async r => {\n\t\t\t\tconsole.debug(`[deleteMatching] ${r.id} '${localStorage.getItem(`cached_${r.id}`)}' < '${r.hash}' ${r.url}/${version.refs[r.id]}`)\n\t\t\t\tawait deleteMatching(url => url.startsWith(`${r.url}/${version.refs[r.id]}`))\n\t\t\t\tconsole.debug(`[deleteMatching] Done! ${r.id} ${r.hash} '${localStorage.getItem(`cached_${r.id}`)}'`)\n\t\t\t\tlocalStorage.setItem(`cached_${r.id}`, r.hash)\n\t\t\t\tconsole.debug(`[deleteMatching] Set! ${r.id} ${r.hash} '${localStorage.getItem(`cached_${r.id}`)}'`)\n\t\t\t}))\n\t}\n\n\tawait Promise.all([\n\t\tfetchRegistries(version, collectionTarget),\n\t\tfetchBlockStateMap(version, blockStateTarget),\n\t\tfetchDynamicRegistries(version, collectionTarget),\n\t])\n}\n\nasync function fetchRegistries(version: Version, target: CollectionRegistry) {\n\tconsole.debug(`[fetchRegistries] ${version.id}`)\n\tconst registries = config.registries\n\t\t.filter(r => !r.dynamic)\n\t\t.filter(r => checkVersion(version.id, r.minVersion, r.maxVersion))\n\n\tif (checkVersion(version.id, undefined, '1.15')) {\n\t\tconst url = `${mcdataUrl}/${version.refs.mcdata_master}/generated/reports/registries.json`\n\t\ttry {\n\t\t\tconst data = await getData(url, (data) => {\n\t\t\t\tconst res: {[id: string]: string[]} = {}\n\t\t\t\tObject.keys(data).forEach(k => {\n\t\t\t\t\tres[k.slice(10)] = Object.keys(data[k].entries)\n\t\t\t\t})\n\t\t\t\treturn res\n\t\t\t})\n\t\t\tregistries.forEach(r => {\n\t\t\t\ttarget.register(r.id, data[r.id] ?? [])\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.warn('Error occurred while fetching registries:', message(e))\n\t\t}\n\t} else {\n\t\tawait Promise.all(registries.map(async r => {\n\t\t\ttry {\n\t\t\t\tconst url = r.path\n\t\t\t\t\t? `${mcdataUrl}/${version.refs.mcdata_master}/${r.path}/data.min.json`\n\t\t\t\t\t: `${mcdataUrl}/${version.refs.mcdata_master}/processed/reports/registries/${r.id}/data.min.json`\n\t\t\t\ttarget.register(r.id, await getData(url, v => v.values))\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(`Error occurred while fetching registry ${r.id}:`, message(e))\n\t\t\t}\n\t\t}))\n\t}\n}\n\nasync function fetchBlockStateMap(version: Version, target: BlockStateRegistry) {\n\tconsole.debug(`[fetchBlockStateMap] ${version.id}`)\n\tif (checkVersion(version.id, undefined, '1.16')) {\n\t\tconst url = (checkVersion(version.id, undefined, '1.15'))\n\t\t\t? `${mcdataUrl}/${version.refs.mcdata_master}/generated/reports/blocks.json`\n\t\t\t: `${mcdataUrl}/${version.refs.mcdata_master}/processed/reports/blocks/data.min.json`\n\n\t\ttry {\n\t\t\tconst data = await getData(url, (data) => {\n\t\t\t\tconst res: BlockStateRegistry = {}\n\t\t\t\tObject.keys(data).forEach(b => {\n\t\t\t\t\tres[b] = {\n\t\t\t\t\t\tproperties: data[b].properties,\n\t\t\t\t\t\tdefault: data[b].states.find((s: any) => s.default).properties,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn res\n\t\t\t})\n\t\t\tObject.assign(target, data)\n\t\t} catch (e) {\n\t\t\tconsole.warn('Error occurred while fetching block state map:', message(e))\n\t\t}\n\t} else {\n\t\tconst url = `${mcdataUrl}/${version.refs.mcdata_master}/processed/reports/blocks/simplified/data.min.json`\n\t\ttry {\n\t\t\tconst data = await getData(url)\n\t\t\tObject.assign(target, data)\n\t\t} catch (e) {\n\t\t\tconsole.warn('Error occurred while fetching block state map:', message(e))\n\t\t}\n\t}\n}\n\nasync function fetchDynamicRegistries(version: Version, target: CollectionRegistry) {\n\tconsole.debug(`[fetchDynamicRegistries] ${version.id}`)\n\tconst registries = config.registries\n\t\t.filter(r => r.dynamic)\n\t\t.filter(r => checkVersion(version.id, r.minVersion, r.maxVersion))\n\n\tif (checkVersion(version.id, '1.16')) {\n\t\tconst url = `${vanillaDatapackUrl}/${version.refs.vanilla_datapack_summary}/summary/flattened.min.json`\n\t\ttry {\n\t\t\tconst data = await getData(url)\n\t\t\tregistries.forEach(r => {\n\t\t\t\ttarget.register(r.id, data[r.id])\n\t\t\t})\n\t\t} catch (e) {\n\t\t\tconsole.warn('Error occurred while fetching dynamic registries:', message(e))\n\t\t}\n\t}\n}\n\nexport async function fetchPreset(version: VersionId, registry: string, id: string) {\n\tconsole.debug(`[fetchPreset] ${registry} ${id}`)\n\tconst versionData = config.versions.find(v => v.id === version)!\n\ttry {\n\t\tconst url = `${vanillaDatapackUrl}/${versionData.refs.vanilla_datapack_data}/data/minecraft/${registry}/${id}.json`\n\t\tconst res = await fetch(url)\n\t\treturn await res.json()\n\t} catch (e) {\n\t\tconsole.warn(`Error occurred while fetching ${registry} preset ${id}:`, message(e))\n\t}\n}\n\nexport async function fetchManifest() {\n\ttry {\n\t\tconst res = await fetch(manifestUrl)\n\t\treturn await res.json()\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching version manifest: ${message(e)}`)\n\t}\n}\n\nexport async function fetchAssets(versionId: VersionId, manifest: VersionManifest) {\n\tconst version = config.versions.find(v => v.id === versionId)\n\tconst id = version?.latest ?? manifest.latest.snapshot\n\ttry {\n\t\tconst versionMeta = await getData(manifest.versions.find(v => v.id === id)!.url)\n\t\n\t\treturn (await getData(versionMeta.assetIndex.url)).objects\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching assets for ${version}: ${message(e)}`)\n\t}\n}\n\nexport async function fetchSounds(version: VersionId, assets: VersionAssets) {\n\ttry {\n\t\tconst hash = assets['minecraft/sounds.json'].hash\n\t\treturn await getData(getResourceUrl(hash))\n\t} catch (e) {\n\t\tthrow new Error(`Error occurred while fetching sounds for ${version}: ${message(e)}`)\n\t}\n}\n\nexport function getResourceUrl(hash: string) {\n\treturn `${corsUrl}${resourceUrl}${hash.slice(0, 2)}/${hash}`\n}\n\nasync function getData<T = any>(url: string, fn: (v: any) => T = (v: any) => v): Promise<T> {\n\ttry {\n\t\tconst cache = await caches.open(CACHE_NAME)\n\t\tconsole.debug(`[getData] Opened cache ${CACHE_NAME} ${url}`)\n\t\tconst cacheResponse = await cache.match(url)\n    \n\t\tif (cacheResponse && cacheResponse.ok) {\n\t\t\tconsole.debug(`[getData] Retrieving cached data ${url}`)\n\t\t\treturn await cacheResponse.json()\n\t\t}\n  \n\t\tconsole.debug(`[getData] fetching data ${url}`)\n\t\tconst fetchResponse = await fetch(url)\n\t\tconst responseData = fn(await fetchResponse.json())\n\t\tawait cache.put(url, new Response(JSON.stringify(responseData)))\n\t\treturn responseData\n\t} catch (e) {\n\t\tconsole.warn(`[getData] Failed to open cache ${CACHE_NAME}: ${message(e)}`)\n\n\t\tconsole.debug(`[getData] fetching data ${url}`)\n\t\tconst fetchResponse = await fetch(url)\n\t\tconst responseData = fn(await fetchResponse.json())\n\t\treturn responseData\n\t}\n}\n\nasync function deleteMatching(matches: (url: string) => boolean) {\n\ttry {\n\t\tconst cache = await caches.open(CACHE_NAME)\n\t\tconsole.debug(`[deleteMatching] Opened cache ${CACHE_NAME}`)\n\t\tconst promises: Promise<boolean>[] = []\n  \n\t\tfor (const request of await cache.keys()) {\n\t\t\tif (matches(request.url)) {\n\t\t\t\tpromises.push(cache.delete(request))\n\t\t\t}\n\t\t}\n\t\tconsole.debug(`[deleteMatching] Removing ${promises.length} cache objects...`)\n\t\tawait Promise.all(promises)\n\t} catch (e) {\n\t\tconsole.warn(`[deleteMatching] Failed to open cache ${CACHE_NAME}: ${message(e)}`)\n\t}\n}\n","import { DataModel } from '@mcschema/core'\nimport type { BiomeSource, Climate, NoiseOctaves } from 'deepslate'\nimport { FixedBiome, MultiNoise, NoiseGeneratorSettings, NoiseSampler, NormalNoise, Random } from 'deepslate'\nimport { fetchPreset } from '../DataFetcher'\nimport type { VersionId } from '../Schemas'\nimport { clamp, deepClone, deepEqual, square, stringToColor } from '../Utils'\n\ntype BiomeColors = Record<string, number[]>\ntype BiomeSourceOptions = {\n\toctaves: NoiseOctaves,\n\tbiomeColors: BiomeColors,\n\toffset: [number, number],\n\tscale: number,\n\tres: number,\n\tseed: bigint,\n\tversion: VersionId,\n}\n\nlet cacheState: any\nlet biomeSourceCache: BiomeSource\nlet climateSamplerCache: Climate.Sampler\n\nexport async function biomeMap(state: any, img: ImageData, options: BiomeSourceOptions) {\n\tconst { biomeSource, climateSampler } = await getCached(state, options)\n\n\tconst data = img.data\n\tconst ox = -options.offset[0] - 100 + options.res / 2\n\tconst oz = -options.offset[1] - 100 + options.res / 2\n\tconst row = img.width * 4 / options.res\n\tconst col = 4 / options.res\n\tfor (let x = 0; x < 200; x += options.res) {\n\t\tfor (let z = 0; z < 200; z += options.res) {\n\t\t\tconst i = z * row + x * col\n\t\t\tconst worldX = (x + ox) * options.scale\n\t\t\tconst worldZ = (z + oz) * options.scale\n\t\t\tconst b = biomeSource.getBiome(worldX, 64, worldZ, climateSampler)\n\t\t\tconst color = getBiomeColor(b, options.biomeColors)\n\t\t\tdata[i] = color[0]\n\t\t\tdata[i + 1] = color[1]\n\t\t\tdata[i + 2] = color[2]\n\t\t\tdata[i + 3] = 255\n\t\t}\n\t}\n}\n\nexport async function getBiome(state: any, x: number, z: number, options: BiomeSourceOptions): Promise<string | undefined> {\n\tconst { biomeSource, climateSampler } = await getCached(state, options)\n\n\tconst [xx, zz] = toWorld([x, z], options)\n\treturn biomeSource.getBiome(xx, 64, zz, climateSampler)\n}\n\nasync function getCached(state: any, options: BiomeSourceOptions): Promise<{ biomeSource: BiomeSource, climateSampler: Climate.Sampler }> {\n\tconst newState = [state, options.octaves, `${options.seed}`, options.version]\n\tif (!deepEqual(newState, cacheState)) {\n\t\tcacheState = deepClone(newState)\n\n\t\tbiomeSourceCache = await getBiomeSource(state, options)\n\n\t\tconst settings = NoiseGeneratorSettings.fromJson({ octaves: options.octaves })\n\t\tconst noiseSampler = new NoiseSampler(4, 4, 32, biomeSourceCache, settings.noise, options.octaves, options.seed)\n\t\tclimateSamplerCache = noiseSampler.getClimate.bind(noiseSampler)\n\t}\n\treturn {\n\t\tbiomeSource: biomeSourceCache,\n\t\tclimateSampler: climateSamplerCache,\n\t} \n}\n\nasync function getBiomeSource(state: any, options: BiomeSourceOptions): Promise<BiomeSource> {\n\tswitch (state?.type?.replace(/^minecraft:/, '')) {\n\t\tcase 'fixed':\n\t\t\treturn new FixedBiome(state.biome as string)\n\n\t\tcase 'checkerboard':\n\t\t\tconst shift = (state.scale ?? 2) + 2\n\t\t\tconst numBiomes = state.biomes?.length ?? 0\n\t\t\treturn {\n\t\t\t\tgetBiome(x: number, _y: number, z: number) {\n\t\t\t\t\tconst i = (((x >> shift) + (z >> shift)) % numBiomes + numBiomes) % numBiomes\n\t\t\t\t\treturn (state.biomes?.[i].node as string)\n\t\t\t\t},\n\t\t\t}\n\n\t\tcase 'multi_noise':\n\t\t\tswitch(state.preset?.replace(/^minecraft:/, '')) {\n\t\t\t\tcase 'nether':\n\t\t\t\t\tstate = options.version === '1.18' ? NetherPreset18 : NetherPreset\n\t\t\t\t\tbreak\n\t\t\t\tcase 'overworld':\n\t\t\t\t\tstate = options.version === '1.18' ? await OverworldPreset18() : state\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tstate = DataModel.unwrapLists(state)\n\t\t\tif (options.version === '1.18') {\n\t\t\t\treturn MultiNoise.fromJson(state)\n\t\t\t} else {\n\t\t\t\tconst noise = ['altitude', 'temperature', 'humidity', 'weirdness']\n\t\t\t\t\t.map((id, i) => {\n\t\t\t\t\t\tconst config = state[`${id}_noise`]\n\t\t\t\t\t\tconfig.firstOctave = clamp(config.firstOctave ?? -7, -100, -1)\n\t\t\t\t\t\treturn new NormalNoise(new Random(options.seed + BigInt(i)), config)\n\t\t\t\t\t})\n\t\t\t\tif (!Array.isArray(state.biomes) || state.biomes.length === 0) {\n\t\t\t\t\treturn new FixedBiome('unknown')\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tgetBiome(x: number, _y: number, z: number): string {\n\t\t\t\t\t\tconst n = noise.map(n => n.sample(x, z, 0))\n\t\t\t\t\t\tlet minDist = Infinity\n\t\t\t\t\t\tlet minBiome = ''\n\t\t\t\t\t\tfor (const { biome, parameters: p } of state.biomes) {\n\t\t\t\t\t\t\tconst dist = square(p.altitude - n[0]) + square(p.temperature - n[1]) + square(p.humidity - n[2]) + square(p.weirdness - n[3]) + square(p.offset)\n\t\t\t\t\t\t\tif (dist < minDist) {\n\t\t\t\t\t\t\t\tminDist = dist\n\t\t\t\t\t\t\t\tminBiome = biome\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn minBiome\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t}\n\tthrow new Error('Unknown biome source')\n}\n\nfunction getBiomeColor(biome: string, biomeColors: BiomeColors) {\n\tif (!biome) {\n\t\treturn [128, 128, 128]\n\t}\n\tconst color = biomeColors[biome] ?? VanillaColors[biome]\n\tif (color === undefined) {\n\t\treturn stringToColor(biome)\n\t}\n\treturn color\n}\n\nfunction toWorld([x, z]: [number, number], options: BiomeSourceOptions) {\n\tconst xx = (x - options.offset[0] - 100 + options.res / 2) * options.scale\n\tconst zz = (z - options.offset[1] - 100 + options.res / 2) * options.scale\n\treturn [xx, zz]\n}\n\nconst VanillaColors: Record<string, [number, number, number]> = {\n\t'minecraft:badlands': [217,69,21],\n\t'minecraft:badlands_plateau': [202,140,101],\n\t'minecraft:bamboo_jungle': [118,142,20],\n\t'minecraft:bamboo_jungle_hills': [59,71,10],\n\t'minecraft:basalt_deltas': [64,54,54],\n\t'minecraft:beach': [250,222,85],\n\t'minecraft:birch_forest': [48,116,68],\n\t'minecraft:birch_forest_hills': [31,95,50],\n\t'minecraft:cold_ocean': [32,32,112],\n\t'minecraft:crimson_forest': [221,8,8],\n\t'minecraft:dark_forest': [64,81,26],\n\t'minecraft:dark_forest_hills': [104,121,66],\n\t'minecraft:deep_cold_ocean': [32,32,56],\n\t'minecraft:deep_frozen_ocean': [64,64,144],\n\t'minecraft:deep_lukewarm_ocean': [0,0,64],\n\t'minecraft:deep_ocean': [0,0,48],\n\t'minecraft:deep_warm_ocean': [0,0,80],\n\t'minecraft:desert': [250,148,24],\n\t'minecraft:desert_hills': [210,95,18],\n\t'minecraft:desert_lakes': [255,188,64],\n\t'minecraft:end_barrens': [128,128,255],\n\t'minecraft:end_highlands': [128,128,255],\n\t'minecraft:end_midlands': [128,128,255],\n\t'minecraft:eroded_badlands': [255,109,61],\n\t'minecraft:flower_forest': [45,142,73],\n\t'minecraft:forest': [5,102,33],\n\t'minecraft:frozen_ocean': [112,112,214],\n\t'minecraft:frozen_river': [160,160,255],\n\t'minecraft:giant_spruce_taiga': [129,142,121],\n\t'minecraft:giant_spruce_taiga_hills': [109,119,102],\n\t'minecraft:giant_tree_taiga': [89,102,81],\n\t'minecraft:giant_tree_taiga_hills': [69,79,62],\n\t'minecraft:gravelly_mountains': [136,136,136],\n\t'minecraft:ice_spikes': [180,220,220],\n\t'minecraft:jungle': [83,123,9],\n\t'minecraft:jungle_edge': [98,139,23],\n\t'minecraft:jungle_hills': [44,66,5],\n\t'minecraft:lukewarm_ocean': [0,0,144],\n\t'minecraft:modified_badlands_plateau': [242,180,141],\n\t'minecraft:modified_gravelly_mountains': [120,152,120],\n\t'minecraft:modified_jungle': [123,163,49],\n\t'minecraft:modified_jungle_edge': [138,179,63],\n\t'minecraft:modified_wooded_badlands_plateau': [216,191,141],\n\t'minecraft:mountain_edge': [114,120,154],\n\t'minecraft:mountains': [96,96,96],\n\t'minecraft:mushroom_field_shore': [160,0,255],\n\t'minecraft:mushroom_fields': [255,0,255],\n\t'minecraft:nether_wastes': [191,59,59],\n\t'minecraft:ocean': [0,0,112],\n\t'minecraft:plains': [141,179,96],\n\t'minecraft:river': [0,0,255],\n\t'minecraft:savanna': [189,178,95],\n\t'minecraft:savanna_plateau': [167,157,100],\n\t'minecraft:shattered_savanna': [229,218,135],\n\t'minecraft:shattered_savanna_plateau': [207,197,140],\n\t'minecraft:small_end_islands': [128,128,255],\n\t'minecraft:snowy_beach': [250,240,192],\n\t'minecraft:snowy_mountains': [160,160,160],\n\t'minecraft:snowy_taiga': [49,85,74],\n\t'minecraft:snowy_taiga_hills': [36,63,54],\n\t'minecraft:snowy_taiga_mountains': [89,125,114],\n\t'minecraft:snowy_tundra': [255,255,255],\n\t'minecraft:soul_sand_valley': [94,56,48],\n\t'minecraft:stone_shore': [162,162,132],\n\t'minecraft:sunflower_plains': [181,219,136],\n\t'minecraft:swamp': [7,249,178],\n\t'minecraft:swamp_hills': [47,255,218],\n\t'minecraft:taiga': [11,102,89],\n\t'minecraft:taiga_hills': [22,57,51],\n\t'minecraft:taiga_mountains': [51,142,129],\n\t'minecraft:tall_birch_forest': [88,156,108],\n\t'minecraft:tall_birch_hills': [71,135,90],\n\t'minecraft:the_end': [128,128,255],\n\t'minecraft:the_void': [0,0,0],\n\t'minecraft:warm_ocean': [0,0,172],\n\t'minecraft:warped_forest': [73,144,123],\n\t'minecraft:wooded_badlands_plateau': [176,151,101],\n\t'minecraft:wooded_hills': [34,85,28],\n\t'minecraft:wooded_mountains': [80,112,80],\n\t'minecraft:snowy_slopes': [140, 195, 222],\n\t'minecraft:lofty_peaks': [196, 168, 193],\n\t'minecraft:snowcapped_peaks': [200, 198, 200],\n\t'minecraft:stony_peaks': [82, 92, 103],\n\t'minecraft:grove': [150, 150, 189],\n\t'minecraft:meadow': [169, 197, 80],\n\t'minecraft:lush_caves': [112, 255, 79],\n\t'minecraft:dripstone_caves': [140, 124, 0],\n}\n\nconst NetherPreset = {type:'minecraft:multi_noise',seed:0,altitude_noise:{firstOctave:-7,amplitudes:[1,1]},temperature_noise:{firstOctave:-7,amplitudes:[1,1]},humidity_noise:{firstOctave:-7,amplitudes:[1,1]},weirdness_noise:{firstOctave:-7,amplitudes:[1,1]},biomes:[{biome:'minecraft:nether_wastes',parameters:{altitude:0,temperature:0,humidity:0,weirdness:0,offset:0}},{biome:'minecraft:soul_sand_valley',parameters:{altitude:0,temperature:0,humidity:-0.5,weirdness:0,offset:0}},{biome:'minecraft:crimson_forest',parameters:{altitude:0,temperature:0.4,humidity:0,weirdness:0,offset:0}},{biome:'minecraft:warped_forest',parameters:{altitude:0,temperature:0,humidity:0.5,weirdness:0,offset:0.375}},{biome:'minecraft:basalt_deltas',parameters:{altitude:0,temperature:-0.5,humidity:0,weirdness:0,offset:0.175}}]}\n\nconst NetherPreset18 = {type:'minecraft:multi_noise',biomes:[{biome:'minecraft:nether_wastes',parameters:{temperature:0,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:soul_sand_valley',parameters:{temperature:0,humidity:-0.5,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:crimson_forest',parameters:{temperature:0.4,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0}},{biome:'minecraft:warped_forest',parameters:{temperature:0,humidity:0.5,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0.375}},{biome:'minecraft:basalt_deltas',parameters:{temperature:-0.5,humidity:0,continentalness:0,erosion:0,depth:0,weirdness:0,offset:0.175}}]}\n\nasync function OverworldPreset18() {\n\tconst overworld = await fetchPreset('1.18', 'dimension', 'overworld')\n\treturn overworld.generator.biome_source\n}\n","import { DataModel } from '@mcschema/core'\nimport { PerlinNoise, Random } from 'deepslate'\nimport type { VersionId } from '../Schemas'\nimport { clamp, stringToColor } from '../Utils'\n\ntype BlockPos = [number, number, number]\ntype Placement = [BlockPos, number]\n\ntype PlacementContext = {\n\tplacements: Placement[],\n\tfeatures: string[],\n\trandom: Random,\n\tbiomeInfoNoise: PerlinNoise,\n\tseaLevel: number,\n\tversion: VersionId,\n\tnextFloat(): number,\n\tnextInt(max: number): number,\n\tsampleInt(provider: any): number,\n}\n\nconst terrain = [50, 50, 51, 51, 52, 52, 53, 54, 56, 57, 57, 58, 58, 59, 60, 60, 60, 59, 59, 59, 60, 61, 61, 62, 63, 63, 64, 64, 64, 65, 65, 66, 66, 65, 65, 66, 66, 67, 67, 67, 68, 69, 71, 73, 74, 76, 79, 80, 81, 81, 82, 83, 83, 82, 82, 81, 81, 80, 80, 80, 81, 81, 82, 82] \n\nconst featureColors = [\n\t[255, 77, 54],  // red\n\t[59, 118, 255], // blue\n\t[91, 207, 25],  // green\n\t[217, 32, 245], // magenta\n\t[255, 209, 41], // yellow\n\t[52, 204, 209], // cyan\n]\n\nexport type DecoratorOptions = {\n\tsize: [number, number, number],\n\tseed: bigint,\n\tversion: VersionId,\n}\nexport function decorator(state: any, img: ImageData, options: DecoratorOptions) {\n\tconst random = new Random(options.seed)\n\tconst ctx: PlacementContext = {\n\t\tplacements: [],\n\t\tfeatures: [],\n\t\trandom,\n\t\tbiomeInfoNoise: new PerlinNoise(random.fork(), 0, [1]),\n\t\tseaLevel: 63,\n\t\tversion: options.version,\n\t\tnextFloat: () => random.nextFloat(),\n\t\tnextInt: (max: number) => random.nextInt(max),\n\t\tsampleInt(value) { return sampleInt(value, this) },\n\t}\n\n\tfor (let x = 0; x < options.size[0] / 16; x += 1) {\n\t\tfor (let z = 0; z < options.size[2] / 16; z += 1) {\n\t\t\tgetPlacements([x * 16, 0, z * 16], DataModel.unwrapLists(state), ctx)\n\t\t}\n\t}\n\n\tconst data = img.data\n\timg.data.fill(255)\n\n\tfor (const [pos, feature] of ctx.placements) {\n\t\tif (pos[0] < 0 || pos[1] < 0 || pos[2] < 0 || pos[0] >= options.size[0] || pos[1] >= options.size[1] || pos[2] >= options.size[2]) continue\n\t\tconst i = (pos[2] * (img.width * 4)) + (pos[0] * 4)\n\t\tconst color = feature < featureColors.length ? featureColors[feature] : stringToColor(ctx.features[feature])\n\t\tdata[i] = clamp(50, 205, color[0])\n\t\tdata[i + 1] = clamp(50, 205, color[1])\n\t\tdata[i + 2] = clamp(50, 205, color[2])\n\t\tdata[i + 3] = 255\n\t}\n\n\tfor (let x = 0; x < options.size[0]; x += 1) {\n\t\tfor (let y = 0; y < options.size[2]; y += 1) {\n\t\t\tif ((Math.floor(x / 16) + Math.floor(y / 16)) % 2 === 0) continue\n\t\t\tconst i = (y * (img.width * 4)) + (x * 4)\n\t\t\tfor (let j = 0; j < 3; j += 1) {\n\t\t\t\tdata[i + j] = 0.85 * data[i + j] \n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction normalize(id: string) {\n\treturn id.startsWith('minecraft:') ? id.slice(10) : id\n}\n\nfunction decorateY(pos: BlockPos, y: number): BlockPos[] {\n\treturn [[ pos[0], y, pos[2] ]]\n}\n\nfunction sampleInt(value: any, ctx: PlacementContext): number {\n\tif (typeof value === 'number') {\n\t\treturn value\n\t} else if (value.base) {\n\t\treturn value.base ?? 1 + ctx.nextInt(1 + (value.spread ?? 0))\n\t} else {\n\t\tswitch (normalize(value.type)) {\n\t\t\tcase 'constant': return value.value\n\t\t\tcase 'uniform': return value.value.min_inclusive + ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1)\n\t\t\tcase 'biased_to_bottom': return value.value.min_inclusive + ctx.nextInt(ctx.nextInt(value.value.max_inclusive - value.value.min_inclusive + 1) + 1)\n\t\t\tcase 'clamped': return Math.max(value.value.min_inclusive, Math.min(value.value.max_inclusive, sampleInt(value.value.source, ctx)))\n\t\t}\n\t\treturn 1\n\t}\n}\n\nfunction useFeature(s: string, ctx: PlacementContext) {\n\tconst i = ctx.features.indexOf(s)\n\tif (i != -1) return i\n\tctx.features.push(s)\n\treturn ctx.features.length - 1\n}\n\nfunction getPlacements(pos: BlockPos, feature: any, ctx: PlacementContext): void {\n\tif (typeof feature === 'string') {\n\t\tctx.placements.push([pos, useFeature(feature, ctx)])\n\t\treturn\n\t}\n\tconst type = normalize(feature?.type ?? 'no_op')\n\tconst featureFn = Features[type]\n\tif (featureFn) {\n\t\tfeatureFn(feature.config, pos, ctx)\n\t} else {\n\t\tctx.placements.push([pos, useFeature(JSON.stringify(feature), ctx)])\n\t}\n}\n\nfunction getPositions(pos: BlockPos, decorator: any, ctx: PlacementContext): BlockPos[] {\n\tconst type = normalize(decorator?.type ?? 'nope')\n\tconst decoratorFn = Decorators[type]\n\tif (!decoratorFn) {\n\t\treturn [pos]\n\t}\n\treturn decoratorFn(decorator?.config, pos, ctx)\n}\n\nconst Features: {\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => void,\n} = {\n\tdecorated: (config, pos, ctx) => {\n\t\tconst positions = getPositions(pos, config?.decorator, ctx)\n\t\tpositions.forEach(p => getPlacements(p, config?.feature, ctx))\n\t},\n\trandom_boolean_selector: (config, pos, ctx) => {\n\t\tconst feature = ctx.nextFloat() < 0.5 ? config?.feature_true : config?.feature_false\n\t\tgetPlacements(pos, feature, ctx)\n\t},\n\trandom_selector: (config, pos, ctx) => {\n\t\tfor (const f of config?.features ?? []) {\n\t\t\tif (ctx.nextFloat() < (f?.chance ?? 0)) {\n\t\t\t\tgetPlacements(pos, f.feature, ctx)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t\tgetPlacements(pos, config?.default, ctx)\n\t},\n\tsimple_random_selector: (config, pos, ctx) => {\n\t\tconst feature = config?.features?.[ctx.nextInt(config?.features?.length ?? 0)]\n\t\tgetPlacements(pos, feature, ctx)\n\t},\n}\n\nconst Decorators: {\n\t[key: string]: (config: any, pos: BlockPos, ctx: PlacementContext) => BlockPos[],\n} = {\n\tchance: (config, pos, ctx) => {\n\t\treturn ctx.nextFloat() < 1 / (config?.chance ?? 1) ? [pos] : []\n\t},\n\tcount: (config, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(config?.count ?? 1)).fill(pos)\n\t},\n\tcount_extra: (config, pos, ctx) => {\n\t\tlet count = config?.count ?? 1\n\t\tif (ctx.nextFloat() < config.extra_chance ?? 0){\n\t\t\tcount += config.extra_count ?? 0\n\t\t}\n\t\treturn new Array(count).fill(pos)\n\t},\n\tcount_multilayer: (config, pos, ctx) => {\n\t\treturn new Array(ctx.sampleInt(config?.count ?? 1)).fill(pos)\n\t\t\t.map(p => [\n\t\t\t\tp[0] + ctx.nextInt(16),\n\t\t\t\tp[1], \n\t\t\t\tp[2] + ctx.nextInt(16),\n\t\t\t])\n\t},\n\tcount_noise: (config, pos, ctx) => {\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / 200, 0, pos[2] / 200)\n\t\tconst count = noise < config.noise_level ? config.below_noise : config.above_noise\n\t\treturn new Array(count).fill(pos)\n\t},\n\tcount_noise_biased: (config, pos, ctx) => {\n\t\tconst factor = Math.max(1, config.noise_factor)\n\t\tconst noise = ctx.biomeInfoNoise.sample(pos[0] / factor, 0, pos[2] / factor)\n\t\tconst count = Math.max(0, Math.ceil((noise + (config.noise_offset ?? 0)) * config.noise_to_count_ratio))\n\t\treturn new Array(count).fill(pos)\n\t},\n\tdark_oak_tree: (_config, pos, ctx) => {\n\t\treturn [...new Array(16)].map((_, i) => {\n\t\t\tconst x = Math.floor(i / 4) * 4 + 1 + ctx.nextInt(3) + pos[0]\n\t\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, x)])\n\t\t\tconst z = Math.floor(i % 4) * 4 + 1 + ctx.nextInt(3) + pos[2]\n\t\t\treturn [x, y, z]\n\t\t})\n\t},\n\tdecorated: (config, pos, ctx) => {\n\t\treturn getPositions(pos, config?.outer, ctx).flatMap(p => {\n\t\t\treturn getPositions(p, config?.inner, ctx)\n\t\t})\n\t},\n\tdepth_average: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(config?.spread ?? 0) + ctx.nextInt(config?.spread ?? 0) - (config.spread ?? 0) + (config?.baseline ?? 0)\n\t\treturn decorateY(pos, y)\n\t},\n\temerald_ore: (_config, pos, ctx) => {\n\t\tconst count = 3 + ctx.nextInt(6)\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\t4 + ctx.nextInt(28),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\tfire: (config, pos, ctx) => {\n\t\tconst count = 1 + ctx.nextInt(ctx.nextInt(ctx.sampleInt(config?.count)))\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tctx.nextInt(128),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\tglowstone: (config, pos, ctx) => {\n\t\tconst count = ctx.nextInt(1 + ctx.nextInt(ctx.sampleInt(config?.count)))\n\t\treturn [...new Array(count)].map(() => [\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tctx.nextInt(128),\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t])\n\t},\n\theightmap: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, y)\n\t},\n\theightmap_spread_double: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, ctx.nextInt(y * 2))\n\t},\n\theightmap_world_surface: (_config, pos, ctx) => {\n\t\tconst y = Math.max(ctx.seaLevel, terrain[clamp(0, 63, pos[0])])\n\t\treturn decorateY(pos, y)\n\t},\n\ticeberg: (_config, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + 4 + ctx.nextInt(8),\n\t\t\tpos[1],\n\t\t\tpos[2] + 4 + ctx.nextInt(8),\n\t\t]]\n\t},\n\tlava_lake: (config, pos, ctx) => {\n\t\tif (ctx.nextInt((config.chance ?? 1) / 10) === 0) {\n\t\t\tconst y = ctx.nextInt(ctx.nextInt(256 - 8) + 8)\n\t\t\tif (y < ctx.seaLevel || ctx.nextInt((config?.chance ?? 1) / 8) == 0) {\n\t\t\t\tconst x = ctx.nextInt(16) + pos[0]\n\t\t\t\tconst z = ctx.nextInt(16) + pos[2]\n\t\t\t\treturn [[x, y, z]]\n\t\t\t}\n\t\t}\n\t\treturn []\n\t},\n\tnope: (_config, pos) => {\n\t\treturn [pos]\n\t},\n\trange: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)\n\t\treturn decorateY(pos, y)\n\t},\n\trange_biased: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0))\n\t\treturn decorateY(pos, y)\n\t},\n\trange_very_biased: (config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(ctx.nextInt(ctx.nextInt((config?.maximum ?? 1) - (config?.top_offset ?? 0)) + (config?.bottom_offset ?? 0)) + (config?.bottom_offset ?? 0))\n\t\treturn decorateY(pos, y)\n\t},\n\tspread_32_above: (_config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(pos[1] + 32)\n\t\treturn decorateY(pos, y)\n\t},\n\ttop_solid_heightmap: (_config, pos) => {\n\t\tconst y = terrain[clamp(0, 63, pos[0])]\n\t\treturn decorateY(pos, y)\n\t},\n\tmagma: (_config, pos, ctx) => {\n\t\tconst y = ctx.nextInt(pos[1] + 32)\n\t\treturn decorateY(pos, y)\n\t},\n\tsquare: (_config, pos, ctx) => {\n\t\treturn [[\n\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\tpos[1],\n\t\t\tpos[2] + ctx.nextInt(16),\n\t\t]]\n\t},\n\tsurface_relative_threshold: (config, pos) => {\n\t\tconst height = terrain[clamp(0, 63, pos[0])]\n\t\tconst min = height + (config?.min_inclusive ?? -Infinity)\n\t\tconst max = height + (config?.max_inclusive ?? Infinity)\n\t\treturn (pos[1] < min || pos[1] > max) ? [pos] : []\n\t},\n\twater_lake: (config, pos, ctx) => {\n\t\tif (ctx.nextInt(config.chance ?? 1) === 0) {\n\t\t\treturn [[\n\t\t\t\tpos[0] + ctx.nextInt(16),\n\t\t\t\tctx.nextInt(256),\n\t\t\t\tpos[2] + ctx.nextInt(16),\n\t\t\t]]\n\t\t}\n\t\treturn []\n\t},\n}\n","import { PerlinNoise, Random } from 'deepslate'\nimport { clampedLerp, lerp2 } from '../../Utils'\n\nexport class NoiseChunkGenerator {\n\tprivate readonly minLimitPerlinNoise: PerlinNoise\n\tprivate readonly maxLimitPerlinNoise: PerlinNoise\n\tprivate readonly mainPerlinNoise: PerlinNoise\n\tprivate readonly depthNoise: PerlinNoise\n\n\tprivate settings: any = {}\n\tprivate chunkWidth: number = 4\n\tprivate chunkHeight: number = 4\n\tprivate chunkCountY: number = 32\n\tprivate biomeDepth: number = 0.1\n\tprivate biomeScale: number = 0.2\n\n\tprivate noiseColumnCache: (number[] | null)[] = []\n\tprivate xOffset: number = 0\n\n\tconstructor(seed: bigint) {\n\t\tconst random = new Random(seed)\n\t\tthis.minLimitPerlinNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.maxLimitPerlinNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.mainPerlinNoise = new PerlinNoise(random, -7, [1, 1, 1, 1, 1, 1, 1, 1])\n\t\tthis.depthNoise = new PerlinNoise(random, -15, [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])\n\t}\n\n\tpublic reset(settings: any, depth: number, scale: number, xOffset: number, width: number) {\n\t\tthis.settings = settings\n\t\tthis.chunkWidth = settings.size_horizontal * 4\n\t\tthis.chunkHeight = settings.size_vertical * 4\n\t\tthis.chunkCountY = Math.floor(settings.height / this.chunkHeight)\n\n\t\tif (settings.amplified && depth > 0) {\n\t\t\tdepth = 1 + depth * 2\n\t\t\tscale = 1 + scale * 4\n\t\t}\n\t\tthis.biomeDepth = 0.265625 * (depth * 0.5 - 0.125)\n\t\tthis.biomeScale = 96.0 / (scale * 0.9 + 0.1)\n\n\t\tthis.noiseColumnCache = Array(width).fill(null)\n\t\tthis.xOffset = xOffset\n\t}\n  \n\tpublic iterateNoiseColumn(x: number): number[] {\n\t\tconst data = Array(this.chunkCountY * this.chunkHeight)\n\t\tconst cx = Math.floor(x / this.chunkWidth)\n\t\tconst ox = Math.floor(x % this.chunkWidth) / this.chunkWidth\n\t\tconst noise1 = this.fillNoiseColumn(cx)\n\t\tconst noise2 = this.fillNoiseColumn(cx + 1)\n\n\t\tfor (let y = this.chunkCountY - 1; y >= 0; y -= 1) {\n\t\t\tfor (let yy = this.chunkHeight; yy >= 0; yy -= 1) {\n\t\t\t\tconst oy = yy / this.chunkHeight\n\t\t\t\tconst i = y * this.chunkHeight + yy\n\t\t\t\tdata[i] = lerp2(oy, ox, noise1[y], noise1[y+1], noise2[y], noise2[y+1])\n\t\t\t}\n\t\t}\n\t\treturn data\n\t}\n\n\tprivate fillNoiseColumn(x: number): number[] {\n\t\tconst cachedColumn = this.noiseColumnCache[x - this.xOffset]\n\t\tif (cachedColumn) return cachedColumn\n\n\t\tconst data = Array(this.chunkCountY + 1)\n\n\t\tconst xzScale = 684.412 * this.settings.sampling.xz_scale\n\t\tconst yScale = 684.412 * this.settings.sampling.y_scale\n\t\tconst xzFactor = xzScale / this.settings.sampling.xz_factor\n\t\tconst yFactor = yScale / this.settings.sampling.y_factor\n\t\tconst randomDensity = this.settings.random_density_offset ? this.getRandomDensity(x) : 0\n\n\t\tfor (let y = 0; y <= this.chunkCountY; y += 1) {\n\t\t\tlet noise = this.sampleAndClampNoise(x, y, this.mainPerlinNoise.getOctaveNoise(0)!.zo, xzScale, yScale, xzFactor, yFactor)\n\t\t\tconst yOffset = 1 - y * 2 / this.chunkCountY + randomDensity\n\t\t\tconst density = yOffset * this.settings.density_factor + this.settings.density_offset\n\t\t\tconst falloff = (density + this.biomeDepth) * this.biomeScale\n\t\t\tnoise += falloff * (falloff > 0 ? 4 : 1)\n\n\t\t\tif (this.settings.top_slide.size > 0) {\n\t\t\t\tnoise = clampedLerp(\n\t\t\t\t\tthis.settings.top_slide.target,\n\t\t\t\t\tnoise,\n\t\t\t\t\t(this.chunkCountY - y - (this.settings.top_slide.offset)) / (this.settings.top_slide.size)\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (this.settings.bottom_slide.size > 0) {\n\t\t\t\tnoise = clampedLerp(\n\t\t\t\t\tthis.settings.bottom_slide.target,\n\t\t\t\t\tnoise,\n\t\t\t\t\t(y - (this.settings.bottom_slide.offset)) / (this.settings.bottom_slide.size)\n\t\t\t\t)\n\t\t\t}\n\t\t\tdata[y] = noise\n\t\t}\n\n\t\tthis.noiseColumnCache[x - this.xOffset] = data\n\t\treturn data\n\t}\n\n\tprivate getRandomDensity(x: number): number {\n\t\tconst noise = this.depthNoise.sample(x * 200, 10, this.depthNoise.getOctaveNoise(0)!.zo, 1, 0, true)\n\t\tconst a = (noise < 0) ? -noise * 0.3 : noise\n\t\tconst b = a * 24.575625 - 2\n\t\treturn (b < 0) ? b * 0.009486607142857142 : Math.min(b, 1) * 0.006640625\n\t}\n\n\tprivate sampleAndClampNoise(x: number, y: number, z: number, xzScale: number, yScale: number, xzFactor: number, yFactor: number): number {\n\t\tlet a = 0\n\t\tlet b = 0\n\t\tlet c = 0\n\t\tlet d = 1\n\n\t\tfor (let i = 0; i < 16; i += 1) {\n\t\t\tconst x2 = PerlinNoise.wrap(x * xzScale * d)\n\t\t\tconst y2 = PerlinNoise.wrap(y * yScale * d)\n\t\t\tconst z2 = PerlinNoise.wrap(z * xzScale * d)\n\t\t\tconst e = yScale * d\n\n\t\t\tconst minLimitNoise = this.minLimitPerlinNoise.getOctaveNoise(i)\n\t\t\tif (minLimitNoise) {\n\t\t\t\ta += minLimitNoise.sample(x2, y2, z2, e, y * e) / d\n\t\t\t}\n\n\t\t\tconst maxLimitNoise = this.maxLimitPerlinNoise.getOctaveNoise(i)\n\t\t\tif (maxLimitNoise) {\n\t\t\t\tb += maxLimitNoise.sample(x2, y2, z2, e, y * e) / d\n\t\t\t}\n\n\t\t\tif (i < 8) {\n\t\t\t\tconst mainNoise = this.mainPerlinNoise.getOctaveNoise(i)\n\t\t\t\tif (mainNoise) {\n\t\t\t\t\tc += mainNoise.sample(\n\t\t\t\t\t\tPerlinNoise.wrap(x * xzFactor * d),\n\t\t\t\t\t\tPerlinNoise.wrap(y * yFactor * d),\n\t\t\t\t\t\tPerlinNoise.wrap(z * xzFactor * d),\n\t\t\t\t\t\tyFactor * d,\n\t\t\t\t\t\ty * yFactor * d \n\t\t\t\t\t) / d\n\t\t\t\t}\n\t\t\t}\n\n\t\t\td /= 2\n\t\t}\n\n\t\treturn clampedLerp(a / 512, b / 512, (c / 10 + 1) / 2)\n\t}\n}\n","import { DataModel } from '@mcschema/core'\nimport type { BlockPos, BlockState } from 'deepslate'\nimport { Chunk, ChunkPos, FixedBiome, NoiseChunkGenerator, NoiseGeneratorSettings } from 'deepslate'\nimport type { VersionId } from '../Schemas'\nimport { checkVersion } from '../Schemas'\nimport { deepClone, deepEqual } from '../Utils'\nimport { NoiseChunkGenerator as OldNoiseChunkGenerator } from './noise/NoiseChunkGenerator'\n\nexport type NoiseSettingsOptions = {\n\tbiomeFactor: number,\n\tbiomeOffset: number,\n\tbiomePeaks: number,\n\toffset: number,\n\twidth: number,\n\tseed: bigint,\n\tversion: VersionId,\n}\n\nconst Z = 0\n\nconst colors: Record<string, [number, number, number]> = {\n\t'minecraft:air': [150, 160, 170],\n\t'minecraft:water': [20, 80, 170],\n\t'minecraft:lava': [200, 100, 0],\n\t'minecraft:stone': [50, 50, 50],\n\t'minecraft:netherrack': [100, 40, 40],\n\t'minecraft:end_stone': [200, 200, 140],\n}\n\nlet cacheState: any\nlet generatorCache: NoiseChunkGenerator\nlet chunkCache: Chunk[] = []\n\nexport function noiseSettings(state: any, img: ImageData, options: NoiseSettingsOptions) {\n\tif (checkVersion(options.version, '1.18')) {\n\t\tconst { settings, generator } = getCached(state, options)\n\n\t\tconst slice = new LevelSlice(-options.offset, options.width, settings.noise.minY, settings.noise.height)\n\t\tslice.fill(generator)\n\n\t\tconst data = img.data\n\t\tfor (let x = 0; x < options.width; x += 1) {\n\t\t\tfor (let y = 0; y < settings.noise.height; y += 1) {\n\t\t\t\tconst i = x * 4 + (settings.noise.height-y-1) * 4 * img.width\n\t\t\t\tconst state = slice.getBlockState([x - options.offset, y, Z])\n\t\t\t\tconst color = colors[state.getName()] ?? [0, 0, 0]\n\t\t\t\tdata[i] = color[0]\n\t\t\t\tdata[i + 1] = color[1]\n\t\t\t\tdata[i + 2] = color[2]\n\t\t\t\tdata[i + 3] = 255\n\t\t\t}\n\t\t}\n\t\treturn\n\t}\n\n\tconst generator = new OldNoiseChunkGenerator(options.seed)\n\tgenerator.reset(state.noise, options.biomeOffset, options.biomeFactor, options.offset, 200)\n\tconst data = img.data\n\tconst row = img.width * 4\n\tfor (let x = 0; x < options.width; x += 1) {\n\t\tconst noise = generator.iterateNoiseColumn(x - options.offset).reverse()\n\t\tfor (let y = 0; y < state.noise.height; y += 1) {\n\t\t\tconst i = y * row + x * 4\n\t\t\tconst color = getColor(noise, y)\n\t\t\tdata[i] = color\n\t\t\tdata[i + 1] = color\n\t\t\tdata[i + 2] = color\n\t\t\tdata[i + 3] = 255\n\t\t}\n\t}\n}\n\nfunction getCached(state: unknown, options: NoiseSettingsOptions) {\n\tconst settings = NoiseGeneratorSettings.fromJson(DataModel.unwrapLists(state))\n\t// Temporary fix for slides\n\tsettings.noise.bottomSlide.target *= 128\n\tsettings.noise.topSlide.target *= 128\n\tconst shape = { factor: options.biomeFactor, offset: options.biomeOffset, peaks: options.biomePeaks, nearWater: false }\n\n\tconst newState = [state, shape, `${options.seed}`]\n\tif (!deepEqual(newState, cacheState)) {\n\t\tcacheState = deepClone(newState)\n\t\tchunkCache = []\n\t\tconst biomeSource = new FixedBiome('unknown')\n\t\tgeneratorCache = new NoiseChunkGenerator(options.seed, biomeSource, settings, shape)\n\t}\n\treturn {\n\t\tsettings,\n\t\tgenerator: generatorCache,\n\t}\n}\n\nfunction getColor(noise: number[], y: number): number {\n\tif (noise[y] > 0) {\n\t\treturn 0\n\t}\n\tif (noise[y+1] > 0) {\n\t\treturn 150\n\t}\n\treturn 255\n}\n\nclass LevelSlice {\n\tprivate readonly chunks: Chunk[]\n\tprivate readonly filled: boolean[]\n\n\tconstructor(\n\t\tprivate readonly minX: number,\n\t\twidth: number,\n\t\tminY: number,\n\t\theight: number,\n\t) {\n\t\tthis.filled = []\n\t\tthis.chunks = [...Array(Math.ceil(width / 16) + 1)]\n\t\t\t.map((_, i) => {\n\t\t\t\tconst x = (minX >> 4) + i\n\t\t\t\tconst cached = chunkCache.find(c => c.pos[0] === x)\n\t\t\t\tif (cached) {\n\t\t\t\t\tthis.filled[i] = true\n\t\t\t\t\treturn cached\n\t\t\t\t}\n\t\t\t\treturn new Chunk(minY, height, ChunkPos.create(x, Z >> 4))\n\t\t\t})\n\t}\n\n\tpublic fill(generator: NoiseChunkGenerator) {\n\t\tthis.chunks.forEach((chunk, i) => {\n\t\t\tif (!this.filled[i]) {\n\t\t\t\tgenerator.fill(chunk)\n\t\t\t\tthis.filled[i] = true\n\t\t\t\tchunkCache.push(chunk)\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic getBlockState(pos: BlockPos): BlockState {\n\t\tconst chunkIndex = (pos[0] >> 4) - (this.minX >> 4)\n\t\treturn this.chunks[chunkIndex].getBlockState(pos)\n\t}\n}\n","import { Path } from '@mcschema/core'\nimport type { NoiseOctaves } from 'deepslate'\nimport { NoiseGeneratorSettings } from 'deepslate'\nimport { useEffect, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn } from '..'\nimport { useCanvas } from '../../hooks'\nimport { locale } from '../../Locales'\nimport { biomeMap, getBiome } from '../../previews'\nimport { newSeed } from '../../Utils'\n\nexport const BiomeSourcePreview = ({ model, data, shown, lang, version }: PreviewProps) => {\n\tconst [scale, setScale] = useState(2)\n\tconst [focused, setFocused] = useState<string | undefined>(undefined)\n\tconst offset = useRef<[number, number]>([0, 0])\n\tconst res = useRef(1)\n\tconst refineTimeout = useRef<number>(undefined)\n\n\tconst seed = BigInt(model.get(new Path(['generator', 'seed'])))\n\tconst octaves = getOctaves(model.get(new Path(['generator', 'settings'])))\n\tconst state = shown ? calculateState(data, octaves) : ''\n\tconst type: string = data.type?.replace(/^minecraft:/, '')\n\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [200 / res.current, 200 / res.current]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { octaves, biomeColors: {}, offset: offset.current, scale, seed, res: res.current, version }\n\t\t\tawait biomeMap(data, img, options)\n\t\t\tif (res.current === 4) {\n\t\t\t\tclearTimeout(refineTimeout.current)\n\t\t\t\trefineTimeout.current = setTimeout(() => {\n\t\t\t\t\tres.current = 1\n\t\t\t\t\tredraw()\n\t\t\t\t}, 150) as any\n\t\t\t}\n\t\t},\n\t\tasync onDrag(dx, dy) {\n\t\t\toffset.current[0] = offset.current[0] + dx * 200\n\t\t\toffset.current[1] = offset.current[1] + dy * 200\n\t\t\tclearTimeout(refineTimeout.current)\n\t\t\tres.current = type === 'multi_noise' ? 4 : 1\n\t\t\tredraw()\n\t\t},\n\t\tasync onHover(x, y) {\n\t\t\tconst options = { octaves, biomeColors: {}, offset: offset.current, scale, seed, res: 1, version }\n\t\t\tconst biome = await getBiome(data, Math.floor(x * 200), Math.floor(y * 200), options)\n\t\t\tsetFocused(biome)\n\t\t},\n\t\tonLeave() {\n\t\t\tsetFocused(undefined)\n\t\t},\n\t}, [state, scale, seed])\n\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tres.current = type === 'multi_noise' ? 4 : 1\n\t\t\tredraw()\n\t\t}\n\t}, [state, scale, seed, shown])\n\n\tconst changeScale = (newScale: number) => {\n\t\toffset.current[0] = offset.current[0] * scale / newScale\n\t\toffset.current[1] = offset.current[1] * scale / newScale\n\t\tsetScale(newScale)\n\t}\n\n\treturn <>\n\t\t<div class=\"controls\">\n\t\t\t{focused && <Btn label={focused} class=\"no-pointer\" />}\n\t\t\t{(type === 'multi_noise' || type === 'checkerboard') && <>\n\t\t\t\t<Btn icon=\"dash\" tooltip={locale(lang, 'zoom_out')}\n\t\t\t\t\tonClick={() => changeScale(scale * 1.5)} />\n\t\t\t\t<Btn icon=\"plus\" tooltip={locale(lang, 'zoom_in')}\n\t\t\t\t\tonClick={() => changeScale(scale / 1.5)} />\n\t\t\t</>}\n\t\t\t{type === 'multi_noise' &&\n\t\t\t\t<Btn icon=\"sync\" tooltip={locale(lang, 'generate_new_seed')}\n\t\t\t\t\tonClick={() => newSeed(model)} />}\n\t\t</div>\n\t\t<canvas ref={canvas} width=\"200\" height=\"200\"></canvas>\n\t</>\n}\n\nfunction calculateState(data: any, octaves: NoiseOctaves) {\n\treturn JSON.stringify([data, octaves])\n}\n\nfunction getOctaves(obj: any): NoiseOctaves {\n\tif (typeof obj === 'string') {\n\t\tswitch (obj.replace(/^minecraft:/, '')) {\n\t\t\tcase 'overworld':\n\t\t\tcase 'amplified':\n\t\t\t\treturn {\n\t\t\t\t\ttemperature: { firstOctave: -9, amplitudes: [1.5, 0, 1, 0, 0, 0] },\n\t\t\t\t\thumidity: { firstOctave: -7, amplitudes: [1, 1, 0, 0, 0, 0] },\n\t\t\t\t\tcontinentalness: { firstOctave: -9, amplitudes: [1, 1, 2, 2, 2, 1, 1, 1, 1] },\n\t\t\t\t\terosion: { firstOctave: -9, amplitudes: [1, 1, 0, 1, 1] },\n\t\t\t\t\tweirdness: { firstOctave: -7, amplitudes: [1, 2, 1, 0, 0, 0] },\n\t\t\t\t\tshift: { firstOctave: -3, amplitudes: [1, 1, 1, 0] },\n\t\t\t\t}\n\t\t\tcase 'end':\n\t\t\tcase 'floating_islands':\n\t\t\t\treturn {\n\t\t\t\t\ttemperature: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t\thumidity: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t\tcontinentalness: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t\terosion: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t\tweirdness: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t\tshift: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\ttemperature: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\t\thumidity: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\t\tcontinentalness: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\t\terosion: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\t\tweirdness: { firstOctave: -7, amplitudes: [1, 1] },\n\t\t\t\t\tshift: { firstOctave: 0, amplitudes: [0] },\n\t\t\t\t}\n\t\t}\n\t}\n\treturn NoiseGeneratorSettings.fromJson(obj).octaves\n}\n","import { useEffect, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn } from '..'\nimport { useCanvas } from '../../hooks'\nimport { locale } from '../../Locales'\nimport { decorator } from '../../previews'\nimport { randomSeed } from '../../Utils'\n\nexport const DecoratorPreview = ({ data, version, shown, lang }: PreviewProps) => {\n\tconst [scale, setScale] = useState(4)\n\tconst [seed, setSeed] = useState(randomSeed())\n\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [scale * 16, scale * 16]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tdecorator(data, img, { seed, version, size: [scale * 16, 128, scale * 16] })\n\t\t},\n\t})\n\n\tconst state = JSON.stringify(data)\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tredraw()\n\t\t}\n\t}, [state, scale, seed, shown])\n\n\treturn <>\n\t\t<div class=\"controls\">\n\t\t\t<Btn icon=\"dash\" tooltip={locale(lang, 'zoom_out')}\n\t\t\t\tonClick={() => setScale(Math.min(16, scale + 1))} />\n\t\t\t<Btn icon=\"plus\" tooltip={locale(lang, 'zoom_in')}\n\t\t\t\tonClick={() => setScale(Math.max(1, scale - 1))} />\n\t\t\t<Btn icon=\"sync\" tooltip={locale(lang, 'generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width=\"64\" height=\"64\"></canvas>\n\t</>\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport type { PreviewProps } from '.'\nimport { Btn, BtnInput, BtnMenu } from '..'\nimport { useCanvas } from '../../hooks'\nimport { locale } from '../../Locales'\nimport { noiseSettings } from '../../previews'\nimport { checkVersion } from '../../Schemas'\nimport { randomSeed } from '../../Utils'\n\nexport const NoiseSettingsPreview = ({ lang, data, shown, version }: PreviewProps) => {\n\tconst loc = locale.bind(null, lang)\n\tconst [seed, setSeed] = useState(randomSeed())\n\tconst [biomeFactor, setBiomeFactor] = useState(0.2)\n\tconst [biomeOffset, setBiomeOffset] = useState(0.1)\n\tconst [biomePeaks, setBiomePeaks] = useState(0)\n\tconst [focused, setFocused] = useState<string | undefined>(undefined)\n\tconst offset = useRef(0)\n\tconst state = JSON.stringify([data, biomeFactor, biomeOffset, biomePeaks])\n\n\tconst hasPeaks = checkVersion(version, '1.18')\n\tuseEffect(() => {\n\t\tsetBiomeFactor(hasPeaks ? 600 : 0.2)\n\t\tsetBiomeOffset(hasPeaks ? 0.05 : 0.1)\n\t}, [hasPeaks])\n\n\tconst size = data?.noise?.height ?? 256\n\tconst { canvas, redraw } = useCanvas({\n\t\tsize() {\n\t\t\treturn [size, size]\n\t\t},\n\t\tasync draw(img) {\n\t\t\tconst options = { biomeOffset, biomeFactor, biomePeaks, offset: offset.current, width: img.width, seed, version }\n\t\t\tnoiseSettings(data, img, options)\n\t\t},\n\t\tasync onDrag(dx) {\n\t\t\toffset.current += dx * size\n\t\t\tredraw()\n\t\t},\n\t\tasync onHover(_, y) {\n\t\t\tconst worldY = size - Math.max(1, Math.ceil(y * size)) + (data?.noise?.min_y ?? 0)\n\t\t\tsetFocused(`${worldY}`)\n\t\t},\n\t\tonLeave() {\n\t\t\tsetFocused(undefined)\n\t\t},\n\t}, [state, seed])\n\n\tuseEffect(() => {\n\t\tif (shown) {\n\t\t\tredraw()\n\t\t}\n\t}, [state, seed, shown])\n\n\treturn <>\n\t\t<div class=\"controls\">\n\t\t\t{focused && <Btn label={`Y = ${focused}`} class=\"no-pointer\" />}\n\t\t\t<BtnMenu icon=\"gear\" tooltip={locale(lang, 'terrain_settings')}>\n\t\t\t\t{hasPeaks ? <>\n\t\t\t\t\t<BtnInput label={loc('preview.factor')} value={`${biomeFactor}`} onChange={v => setBiomeFactor(Number(v))} />\n\t\t\t\t\t<BtnInput label={loc('preview.offset')} value={`${biomeOffset}`} onChange={v => setBiomeOffset(Number(v))} />\n\t\t\t\t\t<BtnInput label={loc('preview.peaks')} value={`${biomePeaks}`} onChange={v => setBiomePeaks(Number(v))} />\n\t\t\t\t</> : <>\n\t\t\t\t\t<BtnInput label={loc('preview.scale')} value={`${biomeFactor}`} onChange={v => setBiomeFactor(Number(v))} />\n\t\t\t\t\t<BtnInput label={loc('preview.depth')} value={`${biomeOffset}`} onChange={v => setBiomeOffset(Number(v))} />\n\t\t\t\t</>}\n\t\t\t</BtnMenu>\n\t\t\t<Btn icon=\"sync\" tooltip={locale(lang, 'generate_new_seed')}\n\t\t\t\tonClick={() => setSeed(randomSeed())} />\n\t\t</div>\n\t\t<canvas ref={canvas} width={size} height={size}></canvas>\n\t</>\n}\n","import type { DataModel } from '@mcschema/core'\nimport { Path } from '@mcschema/core'\nimport { useState } from 'preact/hooks'\nimport { useModel } from '../../hooks'\nimport type { VersionId } from '../../Schemas'\nimport { BiomeSourcePreview, DecoratorPreview, NoiseSettingsPreview } from '../previews'\n\nexport const HasPreview = ['dimension', 'worldgen/noise_settings', 'worldgen/configured_feature']\n\ntype PreviewPanelProps = {\n\tlang: string,\n\tmodel: DataModel | null,\n\tversion: VersionId,\n\tid: string,\n\tshown: boolean,\n\tonError: (message: string) => unknown,\n}\nexport function PreviewPanel({ lang, model, version, id, shown }: PreviewPanelProps) {\n\tconst [, setCount] = useState(0)\n\n\tuseModel(model, () => {\n\t\tsetCount(count => count + 1)\n\t})\n\n\tif (id === 'dimension' && model?.get(new Path(['generator', 'type']))?.endsWith('noise')) {\n\t\tconst data = model.get(new Path(['generator', 'biome_source']))\n\t\tif (data) return <BiomeSourcePreview {...{ lang, model, version, shown, data }} />\n\t}\n\n\tif (id === 'worldgen/noise_settings' && model) {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <NoiseSettingsPreview {...{ lang, model, version, shown, data }} />\n\t}\n\n\tif (id === 'worldgen/configured_feature' && model) {\n\t\tconst data = model.get(new Path([]))\n\t\tif (data) return <DecoratorPreview {...{ lang, model, version, shown, data }} />\n\t}\n\n\treturn <></>\n}\n","import type { Hook } from '@mcschema/core'\nimport { relativePath } from '@mcschema/core'\nimport type { BlockStateRegistry } from '../Schemas'\n\nexport type OutputProps = {\n\tblockStates: BlockStateRegistry,\n}\nexport const transformOutput: Hook<[any, OutputProps], any> = {\n\tbase({}, _, value) {\n\t\treturn value\n\t},\n\n\tchoice({ switchNode }, path, value, props) {\n\t\treturn switchNode.hook(this, path, value, props)\n\t},\n\n\tlist({ children }, path, value, props) {\n\t\tif (!Array.isArray(value)) return value\n\t\treturn value.map((obj, index) =>\n\t\t\tchildren.hook(this, path.push(index), obj.node, props)\n\t\t)\n\t},\n\n\tmap({ children, config }, path, value, props) {\n\t\tif (value === undefined) return undefined\n\t\tconst blockState = config.validation?.validator === 'block_state_map'? props.blockStates?.[relativePath(path, config.validation.params.id).get()] : null\n\t\tconst res: any = {}\n\t\tObject.keys(value).forEach(f => {\n\t\t\tif (blockState) {\n\t\t\t\tif (!Object.keys(blockState.properties ?? {}).includes(f)) return\n\t\t\t}\n\t\t\tres[f] = children.hook(this, path.push(f), value[f], props)\n\t\t})\n\t\treturn res\n\t},\n\n\tobject({ getActiveFields }, path, value, props) {\n\t\tif (value === undefined || value === null || typeof value !== 'object') {\n\t\t\treturn value\n\t\t}\n\t\tconst res: any = {}\n\t\tconst activeFields = getActiveFields(path)\n\t\tObject.keys(activeFields)\n\t\t\t.filter(k => activeFields[k].enabled(path))\n\t\t\t.forEach(f => {\n\t\t\t\tres[f] = activeFields[f].hook(this, path.push(f), value[f], props)\n\t\t\t})\n\t\treturn res\n\t},\n}\n","import type { VersionId } from './Schemas'\nimport { VersionIds } from './Schemas'\n\nexport namespace Store {\n\texport const ID_LANGUAGE = 'language'\n\texport const ID_THEME = 'theme'\n\texport const ID_VERSION = 'schema_version'\n\texport const ID_INDENT = 'indentation'\n\texport const ID_SOUNDS_VERSION = 'minecraft_sounds_version'\n\n\texport function getLanguage() {\n\t\treturn localStorage.getItem(ID_LANGUAGE) ?? 'en'\n\t}\n\n\texport function getTheme() {\n\t\treturn localStorage.getItem(ID_THEME) ?? 'dark'\n\t}\n\n\texport function getVersion(): VersionId {\n\t\tconst version = localStorage.getItem(ID_VERSION)\n\t\tif (version && VersionIds.includes(version as VersionId)) {\n\t\t\treturn version as VersionId\n\t\t}\n\t\treturn '1.17'\n\t}\n\n\texport function getIndent() {\n\t\treturn localStorage.getItem(ID_INDENT) ?? '2_spaces'\n\t}\n\n\texport function getSoundsVersion() {\n\t\treturn localStorage.getItem(ID_SOUNDS_VERSION) ?? 'latest'\n\t}\n\n\texport function setLanguage(language: string | undefined) {\n\t\tif (language) localStorage.setItem(ID_LANGUAGE, language)\n\t}\n\n\texport function setTheme(theme: string | undefined) {\n\t\tif (theme) localStorage.setItem(ID_THEME, theme)\n\t}\n\n\texport function setVersion(version: VersionId | undefined) {\n\t\tif (version) localStorage.setItem(ID_VERSION, version)\n\t}\n\n\texport function setIndent(indent: string | undefined) {\n\t\tif (indent) localStorage.setItem(ID_INDENT, indent)\n\t}\n\n\texport function setSoundsVersion(version: string | undefined) {\n\t\tif (version) localStorage.setItem(ID_SOUNDS_VERSION, version)\n\t}\n}\n","import { DataModel, ModelPath } from '@mcschema/core'\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks'\nimport { Btn, BtnMenu } from '..'\nimport { useModel } from '../../hooks'\nimport { locale } from '../../Locales'\nimport { transformOutput } from '../../schema/transformOutput'\nimport type { BlockStateRegistry } from '../../Schemas'\nimport { Store } from '../../Store'\nimport { message } from '../../Utils'\n\nconst OUTPUT_CHARS_LIMIT = 10000\n\nconst INDENT: Record<string, number | string> = {\n\t'2_spaces': 2,\n\t'4_spaces': 4,\n\ttabs: '\\t',\n}\n\ntype SourcePanelProps = {\n\tlang: string,\n\tname: string,\n\tmodel: DataModel | null,\n\tblockStates: BlockStateRegistry | null,\n\tdoCopy?: number,\n\tdoDownload?: number,\n\tdoImport?: number,\n\tcopySuccess: () => unknown,\n\tonError: (message: string) => unknown,\n}\nexport function SourcePanel({ lang, name, model, blockStates, doCopy, doDownload, doImport, copySuccess, onError }: SourcePanelProps) {\n\tconst loc = locale.bind(null, lang)\n\tconst [indent, setIndent] = useState(Store.getIndent())\n\tconst source = useRef<HTMLTextAreaElement>(null)\n\tconst download = useRef<HTMLAnchorElement>(null)\n\tconst retransform = useRef<Function>()\n\n\tconst getOutput = useCallback((model: DataModel, blockStates: BlockStateRegistry) => {\n\t\tconst data = model.schema.hook(transformOutput, new ModelPath(model), model.data, { blockStates })\n\t\treturn JSON.stringify(data, null, INDENT[indent]) + '\\n'\n\t}, [indent])\n\n\tuseEffect(() => {\n\t\tretransform.current = () => {\n\t\t\tif (!model || !blockStates) return\n\t\t\ttry {\n\t\t\t\tconst output = getOutput(model, blockStates)\n\t\t\t\tif (output.length >= OUTPUT_CHARS_LIMIT) {\n\t\t\t\t\tsource.current.value = output.slice(0, OUTPUT_CHARS_LIMIT) + `\\n\\nOutput is too large to display (+${OUTPUT_CHARS_LIMIT} chars)\\nExport to view complete output\\n\\n`\n\t\t\t\t} else {\n\t\t\t\t\tsource.current.value = output\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tonError(`Error getting JSON output: ${message(e)}`)\n\t\t\t\tconsole.error(e)\n\t\t\t\tsource.current.value = ''\n\t\t\t}\n\t\t}\n\t})\n\n\tuseModel(model, () => {\n\t\tretransform.current()\n\t})\n\tuseEffect(() => {\n\t\tif (model) retransform.current()\n\t}, [model])\n\n\tuseEffect(() => {\n\t\tretransform.current()\n\t}, [indent])\n\n\tconst onImport = () => {\n\t\ttry {\n\t\t\tconst data = JSON.parse(source.current.value)\n\t\t\tmodel?.reset(DataModel.wrapLists(data), false)\n\t\t} catch (e) {\n\t\t\tonError(`Error importing: ${message(e)}`)\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (doCopy && model && blockStates) {\n\t\t\tnavigator.clipboard.writeText(getOutput(model, blockStates)).then(() => {\n\t\t\t\tcopySuccess()\n\t\t\t})\n\t\t}\n\t}, [doCopy])\n\n\tuseEffect(() => {\n\t\tif (doDownload && source.current && download.current) {\n\t\t\tconst content = encodeURIComponent(source.current.value)\n\t\t\tdownload.current.setAttribute('href', `data:text/json;charset=utf-8,${content}`)\n\t\t\tdownload.current.setAttribute('download', `${name}.json`)\n\t\t\tdownload.current.click()\n\t\t}\n\t}, [doDownload])\n\n\tuseEffect(() => {\n\t\tif (doImport && source.current) {\n\t\t\tsource.current.value = ''\n\t\t\tsource.current.select()\n\t\t}\n\t}, [doImport])\n\n\tconst changeIndent = (value: string) => {\n\t\tStore.setIndent(value)\n\t\tsetIndent(value)\n\t}\n\n\treturn <> \n\t\t<div class=\"controls\">\n\t\t\t<BtnMenu icon=\"gear\" tooltip={loc('output_settings')}>\n\t\t\t\t{Object.entries(INDENT).map(([key]) =>\n\t\t\t\t\t<Btn label={loc(`indentation.${key}`)} active={indent === key}\n\t\t\t\t\t\tonClick={() => changeIndent(key)}/>\n\t\t\t\t)}\n\t\t\t</BtnMenu>\n\t\t</div>\n\t\t<textarea ref={source} class=\"source\" onBlur={onImport} spellcheck={false} autocorrect=\"off\" placeholder={loc('source_placeholder')}></textarea>\n\t\t<a ref={download} style=\"display: none;\"></a>\n\t</>\n}\n","import type { INode, Path } from '@mcschema/core'\nimport { DataModel } from '@mcschema/core'\n\nexport class ModelWrapper extends DataModel {\n\tconstructor(\n\t\tschema: INode<any>,\n\t\tprivate readonly mapper: (path: Path) => Path,\n\t\tprivate readonly getter: (path: Path) => any,\n\t\tprivate readonly setter: (path: Path, value: any, silent?: boolean) => any,\n\t) {\n\t\tsuper(schema)\n\t}\n\n\tmap(path: Path) {\n\t\treturn this.mapper(path)\n\t}\n\n\tget(path: Path) {\n\t\treturn this.getter(path)\n\t}\n\n\tset(path: Path, value: any, silent?: boolean) {\n\t\treturn this.setter(path, value, silent)\n\t}\n}\n","import type { BooleanHookParams, EnumOption, Hook, INode, NodeChildren, NumberHookParams, StringHookParams, ValidationOption } from '@mcschema/core'\nimport { DataModel, ListNode, MapNode, ModelPath, ObjectNode, Path, relativePath, StringNode } from '@mcschema/core'\nimport type { ComponentChildren, JSX } from 'preact'\nimport { memo } from 'preact/compat'\nimport { useState } from 'preact/hooks'\nimport { Btn } from '../components'\nimport { Octicon } from '../components/Octicon'\nimport { useFocus } from '../hooks'\nimport { locale } from '../Locales'\nimport type { BlockStateRegistry } from '../Schemas'\nimport { CachedDecorator, CachedFeature } from '../Schemas'\nimport { deepClone, deepEqual, hexId, isObject, newSeed } from '../Utils'\nimport { ModelWrapper } from './ModelWrapper'\n\nconst selectRegistries = ['loot_table.type', 'loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'recipe.type', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'dimension.generator.biome_source.preset', 'carver.type', 'feature.type', 'decorator.type', 'feature.tree.minimum_size.type', 'block_state_provider.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'int_provider.type', 'float_provider.type', 'height_provider.type', 'structure_feature.type', 'surface_builder.type', 'processor.processor_type', 'rule_test.predicate_type', 'pos_rule_test.predicate_type', 'template_element.element_type', 'block_placer.type', 'block_predicate.type']\nconst hiddenFields = ['number_provider.type', 'score_provider.type', 'nbt_provider.type', 'int_provider.type', 'float_provider.type', 'height_provider.type']\nconst flattenedFields = ['feature.config', 'decorator.config', 'int_provider.value', 'float_provider.value', 'block_state_provider.simple_state_provider.state', 'block_state_provider.rotated_block_provider.state', 'block_state_provider.weighted_state_provider.entries.entry.data', 'rule_test.block_state', 'structure_feature.config', 'surface_builder.config', 'template_pool.elements.entry.element', 'decorator.block_survives_filter.state']\nconst inlineFields = ['loot_entry.type', 'function.function', 'condition.condition', 'criterion.trigger', 'dimension.generator.type', 'dimension.generator.biome_source.type', 'feature.type', 'decorator.type', 'block_state_provider.type', 'feature.tree.minimum_size.type', 'trunk_placer.type', 'foliage_placer.type', 'tree_decorator.type', 'block_placer.type', 'rule_test.predicate_type', 'processor.processor_type', 'template_element.element_type', 'nbt_operation.op', 'number_provider.value', 'score_provider.name', 'score_provider.target', 'nbt_provider.source', 'nbt_provider.target', 'generator_biome.biome', 'block_predicate.type']\nconst nbtFields = ['function.set_nbt.tag', 'advancement.display.icon.nbt', 'text_component_object.nbt', 'entity.nbt', 'block.nbt', 'item.nbt']\nconst fixedLists = ['generator_biome.parameters.temperature', 'generator_biome.parameters.humidity', 'generator_biome.parameters.continentalness', 'generator_biome.parameters.erosion', 'generator_biome.parameters.depth', 'generator_biome.parameters.weirdness', 'feature.end_spike.crystal_beam_target', 'feature.end_gateway.exit', 'decorator.block_filter.offset', 'block_predicate.matching_blocks.offset', 'block_predicate.matching_fluids.offset']\n\n/**\n * Secondary model used to remember the keys of a map\n */\nconst keysModel = new DataModel(MapNode(\n\tStringNode(),\n\tStringNode()\n), { historyMax: 0 })\n\ntype JSXTriple = [JSX.Element | null, JSX.Element | null, JSX.Element | null]\ntype RenderHook = Hook<[any, string, BlockStateRegistry, Record<string, any>], JSXTriple>\n\ntype NodeProps<T> = T & {\n\tnode: INode<any>,\n\tpath: ModelPath,\n\tvalue: any,\n\tlang: string,\n\tstates: BlockStateRegistry,\n\tctx: Record<string, any>,\n}\n\nexport function FullNode({ model, lang, blockStates }: { model: DataModel, lang: string, blockStates: BlockStateRegistry }) {\n\tconst path = new ModelPath(model)\n\tconst [prefix, suffix, body] = model.schema.hook(renderHtml, path, deepClone(model.data), lang, blockStates, {})\n\treturn suffix?.props?.children.some((c: any) => c) ? <div class={`node ${model.schema.type(path)}-node`} data-category={model.schema.category(path)}>\n\t\t<div class=\"node-header\">{prefix}{suffix}</div>\n\t\t<div class=\"node-body\">{body}</div>\n\t</div> : body\n}\n\nconst renderHtml: RenderHook = {\n\tbase() {\n\t\treturn [null, null, null]\n\t},\n\n\tboolean(params, path, value, lang, states, ctx) {\n\t\treturn [null, <BooleanSuffix {...{...params, path, value, lang, states, ctx}} />, null]\n\t},\n\n\tchoice({ choices, config, switchNode }, path, value, lang, states, ctx) {\n\t\tconst choice = switchNode.activeCase(path, true) as typeof choices[number]\n\t\tconst contextPath = (config?.context) ? new ModelPath(path.getModel(), new Path(path.getArray(), [config.context])) : path\n\t\tconst [prefix, suffix, body] = choice.node.hook(this, contextPath, value, lang, states, ctx)\n\t\tif (choices.length === 1) {\n\t\t\treturn [prefix, suffix, body]\n\t\t}\n\t\tconst choiceContextPath = config?.choiceContext ? new Path([], [config.choiceContext]) : config?.context ? new Path([], [config.context]) : path\n\t\tconst set = (type: string) => {\n\t\t\tconst c = choices.find(c => c.type === type) ?? choice\n\t\t\tconst newValue = c.change\n\t\t\t\t? c.change(DataModel.unwrapLists(value))\n\t\t\t\t: config.choiceContext === 'feature' ?\tc.node.default()?.config?.feature : c.node.default()\n\t\t\tpath.model.set(path, DataModel.wrapLists(newValue))\n\t\t}\n\t\tconst inject = <select value={choice.type} onChange={(e) => set((e.target as HTMLSelectElement).value)}>\n\t\t\t{choices.map(c => <option value={c.type}>\n\t\t\t\t{pathLocale(lang, choiceContextPath.contextPush(c.type))}\n\t\t\t</option>)}\n\t\t</select>\n\t\treturn [prefix, <>{inject}{suffix}</>, body]\n\t},\n\n\tlist({ children, config }, path, value, lang, states, ctx) {\n\t\tconst { expand, collapse, isToggled } = useToggles()\n\t\tconst [maxShown, setMaxShown] = useState(50)\n\n\t\tconst context = path.getContext().join('.')\n\t\tif (fixedLists.includes(context)) {\n\t\t\tconst prefix = <>\n\t\t\t\t{[...Array(config.maxLength!)].map((_, i) =>\n\t\t\t\t\t<ErrorPopup lang={lang} path={path.modelPush(i)} />)}\n\t\t\t\t<div class=\"fixed-list\"></div>\n\t\t\t</>\n\t\t\tconst suffix = <>{[...Array(config.maxLength)].map((_, i) => {\n\t\t\t\tconst child = children.hook(this, path.modelPush(i), value?.[i]?.node, lang, states, ctx)\n\t\t\t\treturn child[1]\n\t\t\t})}</>\n\t\t\treturn [prefix, suffix, null]\n\t\t}\n\n\t\tconst onAdd = () => {\n\t\t\tif (!Array.isArray(value)) value = []\n\t\t\tconst node = DataModel.wrapLists(children.default())\n\t\t\tpath.model.set(path, [{ node, id: hexId() }, ...value])\n\t\t}\n\t\tconst onAddBottom = () => {\n\t\t\tif (!Array.isArray(value)) value = []\n\t\t\tconst node = DataModel.wrapLists(children.default())\n\t\t\tpath.model.set(path, [...value, { node, id: hexId() }])\n\t\t}\n\t\tconst suffix = <button class=\"add tooltipped tip-se\" aria-label={locale(lang, 'add_top')} onClick={onAdd}>{Octicon.plus_circle}</button>\n\t\tconst body = <>\n\t\t\t{(value && Array.isArray(value)) && value.map(({ node: cValue, id: cId }, index) => {\n\t\t\t\tif (index === maxShown) {\n\t\t\t\t\treturn <div class=\"node node-header\">\n\t\t\t\t\t\t<label>{locale(lang, 'entries_hidden', `${value.length - maxShown}`)}</label>\n\t\t\t\t\t\t<button onClick={() => setMaxShown(Math.min(maxShown + 50, value.length))}>{locale(lang, 'entries_hidden.more', '50')}</button>\n\t\t\t\t\t\t<button onClick={() => setMaxShown(value.length)}>{locale(lang, 'entries_hidden.all')}</button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tif (index > maxShown) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\tconst cPath = path.push(index).contextPush('entry')\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\n\t\t\t\tconst toggle = isToggled(cId)\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${locale(lang, 'expand')}\\n${locale(lang, 'expand_all', 'Ctrl')}`} onClick={expand(cId)}>{Octicon.chevron_right}</button>\n\t\t\t\t\t\t<label>{pathLocale(lang, cPath, `${index}`)}</label>\n\t\t\t\t\t\t<Collapsed key={cId} path={cPath} value={cValue} schema={children} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\n\t\t\t\tconst onMoveUp = () => {\n\t\t\t\t\tconst v = [...path.get()];\n\t\t\t\t\t[v[index - 1], v[index]] = [v[index], v[index - 1]]\n\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t}\n\t\t\t\tconst onMoveDown = () => {\n\t\t\t\t\tconst v = [...path.get()];\n\t\t\t\t\t[v[index + 1], v[index]] = [v[index], v[index + 1]]\n\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t}\n\t\t\t\tconst actions: MenuAction[] = [\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'duplicate',\n\t\t\t\t\t\tlabel: 'duplicate',\n\t\t\t\t\t\tonSelect: () => {\n\t\t\t\t\t\t\tconst v = [...path.get()]\n\t\t\t\t\t\t\tv.splice(index, 0, { id: hexId(), node: deepClone(cValue) })\n\t\t\t\t\t\t\tpath.model.set(path, v)\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t\treturn <MemoedTreeNode key={cId} path={cPath} schema={children} value={cValue} {...{lang, states, actions}} ctx={{...ctx, index: (index === 0 ? 1 : 0) + (index === value.length - 1 ? 2 : 0)}}>\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${locale(lang, 'collapse')}\\n${locale(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(cId)}>{Octicon.chevron_down}</button>}\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={locale(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\n\t\t\t\t\t{value.length > 1 && <div class=\"node-move\">\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={locale(lang, 'move_up')} onClick={onMoveUp} disabled={index === 0}>{Octicon.chevron_up}</button>\n\t\t\t\t\t\t<button class=\"move tooltipped tip-se\" aria-label={locale(lang, 'move_down')} onClick={onMoveDown} disabled={index === value.length - 1}>{Octicon.chevron_down}</button>\n\t\t\t\t\t</div>}\n\t\t\t\t</MemoedTreeNode>\n\t\t\t})}\n\t\t\t{(value && value.length > 0 && value.length <= maxShown) && <div class=\"node node-header\">\n\t\t\t\t<button class=\"add tooltipped tip-se\" aria-label={locale(lang, 'add_bottom')} onClick={onAddBottom}>{Octicon.plus_circle}</button>\n\t\t\t</div>}\n\t\t</>\n\t\treturn [null, suffix, body]\n\t},\n\n\tmap({ children, keys, config }, path, value, lang, states, ctx) {\n\t\tconst { expand, collapse, isToggled } = useToggles()\n\n\t\tconst keyPath = new ModelPath(keysModel, new Path([hashString(path.toString())]))\n\t\tconst onAdd = () => {\n\t\t\tconst key = keyPath.get()\n\t\t\tpath.model.set(path.push(key), DataModel.wrapLists(children.default()))\n\t\t}\n\t\tconst blockState = config.validation?.validator === 'block_state_map' ? states?.[relativePath(path, config.validation.params.id).get()] : null\n\t\tconst keysSchema = blockState?.properties\n\t\t\t? StringNode(null!, { enum: Object.keys(blockState.properties ?? {}) })\n\t\t\t: keys\n\t\tif (blockState && path.last() === 'Properties') {\n\t\t\tif (typeof value !== 'object') value = {}\n\t\t\tconst properties = Object.entries(blockState.properties ?? {})\n\t\t\t\t.map(([key, values]) => [key, StringNode(null!, { enum: values })])\n\t\t\tObject.entries(blockState.properties ?? {}).forEach(([key, values]) => {\n\t\t\t\tif (typeof value[key] !== 'string') {\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.expected_string')\n\t\t\t\t} else if (!values.includes(value[key])) {\n\t\t\t\t\tpath.model.errors.add(path.push(key), 'error.invalid_enum_option', value[key])\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn ObjectNode(Object.fromEntries(properties)).hook(this, path, value, lang, states, ctx)\n\t\t}\n\t\tconst suffix = <>\n\t\t\t{keysSchema.hook(this, keyPath, keyPath.get() ?? '', lang, states, ctx)[1]}\n\t\t\t<button class=\"add tooltipped tip-se\" aria-label={locale(lang, 'add')} onClick={onAdd}>{Octicon.plus_circle}</button>\n\t\t</>\n\t\tconst body = <>\n\t\t\t{typeof value === 'object' && Object.entries(value).map(([key, cValue]) => {\n\n\t\t\t\tconst cPath = path.modelPush(key)\n\t\t\t\tconst canToggle = children.type(cPath) === 'object'\n\t\t\t\tconst toggle = isToggled(key)\n\t\t\t\tif (canToggle && (toggle === false || (toggle === undefined && value.length > 20))) {\n\t\t\t\t\treturn <div class=\"node node-header\" data-category={children.category(cPath)}>\n\t\t\t\t\t\t<ErrorPopup lang={lang} path={cPath} nested />\n\t\t\t\t\t\t<button class=\"toggle tooltipped tip-se\" aria-label={`${locale(lang, 'expand')}\\n${locale(lang, 'expand_all', 'Ctrl')}`} onClick={expand(key)}>{Octicon.chevron_right}</button>\n\t\t\t\t\t\t<label>{key}</label>\n\t\t\t\t\t\t<Collapsed key={key} path={cPath} value={cValue} schema={children} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tconst cSchema = blockState\n\t\t\t\t\t? StringNode(null!, { enum: blockState.properties?.[key] ?? [] })\n\t\t\t\t\t: children\n\t\t\t\tif (blockState?.properties?.[key] && typeof cValue === 'string'\n\t\t\t\t\t&& !blockState.properties?.[key].includes(cValue)) {\n\t\t\t\t\tpath.model.errors.add(cPath, 'error.invalid_enum_option', cValue)\n\t\t\t\t}\n\t\t\t\tconst onRemove = () => cPath.set(undefined)\n\t\t\t\treturn <MemoedTreeNode key={key} schema={cSchema} path={cPath} value={cValue} {...{lang, states, ctx}} label={key}>\n\t\t\t\t\t{canToggle && <button class=\"toggle tooltipped tip-se\" aria-label={`${locale(lang, 'collapse')}\\n${locale(lang, 'collapse_all', 'Ctrl')}`} onClick={collapse(key)}>{Octicon.chevron_down}</button>}\n\t\t\t\t\t<button class=\"remove tooltipped tip-se\" aria-label={locale(lang, 'remove')} onClick={onRemove}>{Octicon.trashcan}</button>\n\t\t\t\t</MemoedTreeNode>\n\t\t\t})}\n\t\t</>\n\t\treturn [null, suffix, body]\n\t},\n\n\tnumber(params, path, value, lang, states, ctx) {\n\t\treturn [null, <NumberSuffix {...{...params, path, value, lang, states, ctx}} />, null]\n\t},\n\n\tobject({ node, config, getActiveFields, getChildModelPath }, path, value, lang, states, ctx) {\n\t\tif (path.getArray().length == 0 && isDecorated(config.context, value)) {\n\t\t\tconst { wrapper, fields } = createDecoratorsWrapper(getActiveFields(path), path, value)\n\t\t\tvalue = wrapper.data\n\t\t\tgetActiveFields = () => fields\n\t\t\tgetChildModelPath = (path, key) => new ModelPath(wrapper, new Path(path.getArray(), ['feature'])).push(key)\n\t\t}\n\n\t\tlet prefix: JSX.Element | null = null\n\t\tlet suffix: JSX.Element | null = null\n\t\tif (node.optional()) {\n\t\t\tif (value === undefined) {\n\t\t\t\tconst onExpand = () => path.set(DataModel.wrapLists(node.default()))\n\t\t\t\tsuffix = <button class=\"collapse closed tooltipped tip-se\" aria-label={locale(lang, 'expand')} onClick={onExpand}>{Octicon.plus_circle}</button>\n\t\t\t} else {\n\t\t\t\tconst onCollapse = () => path.set(undefined)\n\t\t\t\tsuffix = <button class=\"collapse open tooltipped tip-se\" aria-label={locale(lang, 'remove')} onClick={onCollapse}>{Octicon.trashcan}</button>\n\t\t\t}\n\t\t}\n\t\tconst newCtx = (typeof value === 'object' && value !== null && node.default()?.pools)\n\t\t\t? { ...ctx, loot: value?.type } : ctx\n\t\tconst body = <>\n\t\t\t{(typeof value === 'object' && value !== null && !(node.optional() && value === undefined)) &&\n\t\t\t\tObject.entries(getActiveFields(path))\n\t\t\t\t\t.filter(([_, child]) => child.enabled(path))\n\t\t\t\t\t.map(([key, child]) => {\n\t\t\t\t\t\tconst cPath = getChildModelPath(path, key)\n\t\t\t\t\t\tconst context = cPath.getContext().join('.')\n\t\t\t\t\t\tif (hiddenFields.includes(context)) return null\n\t\t\t\t\t\tconst [cPrefix, cSuffix, cBody] = child.hook(this, cPath, value[key], lang, states, newCtx)\n\t\t\t\t\t\tif (!cPrefix && !cSuffix && !((cBody?.props?.children?.length ?? 0) > 0)) return null\n\t\t\t\t\t\tconst isFlattened = child.type(cPath) === 'object' && flattenedFields.includes(context)\n\t\t\t\t\t\tconst isInlined = inlineFields.includes(context)\n\t\t\t\t\t\tif (isFlattened || isInlined) {\n\t\t\t\t\t\t\tprefix = <>{prefix}<ErrorPopup lang={lang} path={cPath} /><HelpPopup lang={lang} path={cPath} />{cPrefix}</>\n\t\t\t\t\t\t\tsuffix = <>{suffix}{cSuffix}</>\n\t\t\t\t\t\t\treturn isFlattened ? cBody : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn <MemoedTreeNode key={key} schema={child} path={cPath} value={value[key]} {...{lang, states, ctx: newCtx}} />\n\t\t\t\t\t})\n\t\t\t}\n\t\t</>\n\t\treturn [prefix, suffix, body]\n\t},\n\n\tstring(params, path, value, lang, states, ctx) {\n\t\treturn [null, <StringSuffix {...{...params, path, value, lang, states, ctx}} />, null]\n\t},\n}\n\nfunction Collapsed({ path, value }: { path: ModelPath, value: any, schema: INode<any> }) {\n\tconst context = path.getContext().join('.')\n\tswitch (context) {\n\t\tcase 'loot_table.pools.entry':\n\t\t\treturn <label>{value?.entries?.length ?? 0} entries</label>\n\t\tcase 'function.set_contents.entries.entry':\n\t\tcase 'loot_pool.entries.entry':\n\t\t\treturn <label>{value?.name?.replace(/^minecraft:/, '') ?? value?.type?.replace(/^minecraft:/, '')}</label>\n\t}\n\tfor (const child of Object.values(value ?? {})) {\n\t\tif (typeof child === 'string') {\n\t\t\treturn <label>{child.replace(/^minecraft:/, '')}</label>\n\t\t}\n\t}\n\treturn null\n}\n\nfunction useToggles() {\n\tconst [toggleState, setToggleState] = useState(new Map<string, boolean>())\n\tconst [toggleAll, setToggleAll] = useState<boolean | undefined>(undefined)\n\n\tconst expand = (key: string) => (evt: MouseEvent) => {\n\t\tif (evt.ctrlKey) {\n\t\t\tsetToggleState(new Map())\n\t\t\tsetToggleAll(true)\n\t\t} else {\n\t\t\tsetToggleState(state => new Map(state.set(key, true)))\n\t\t}\n\t}\n\tconst collapse = (key: string) => (evt: MouseEvent) => {\n\t\tif (evt.ctrlKey) {\n\t\t\tsetToggleState(new Map())\n\t\t\tsetToggleAll(false)\n\t\t} else {\n\t\t\tsetToggleState(state => new Map(state.set(key, false)))\n\t\t}\n\t}\n\t\n\tconst isToggled = (key: string) => {\n\t\treturn toggleState?.get(key) ?? toggleAll\n\t}\n\n\treturn { expand, collapse, isToggled }\n}\n\nfunction BooleanSuffix({ path, node, value, lang }: NodeProps<BooleanHookParams>) {\n\tconst set = (target: boolean) => {\n\t\tpath.model.set(path, node.optional() && value === target ? undefined : target)\n\t}\n\treturn <>\n\t\t<button class={value === false ? 'selected' : ''} onClick={() => set(false)}>{locale(lang, 'false')}</button>\n\t\t<button class={value === true ? 'selected' : ''} onClick={() => set(true)}>{locale(lang, 'true')}</button>\n\t</>\n}\n\nfunction NumberSuffix({ path, config, integer, value, lang }: NodeProps<NumberHookParams>) {\n\tconst onChange = (evt: Event) => {\n\t\tconst value = (evt.target as HTMLInputElement).value\n\t\tconst parsed = integer ? parseInt(value) : parseFloat(value)\n\t\tpath.model.set(path, parsed)\n\t}\n\tconst onColor = (evt: Event) => {\n\t\tconst value = (evt.target as HTMLInputElement).value\n\t\tconst parsed = parseInt(value.slice(1), 16)\n\t\tpath.model.set(path, parsed)\n\t}\n\treturn <>\n\t\t<input type=\"text\" value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}} />\n\t\t{config?.color && <input type=\"color\" value={'#' + (value?.toString(16).padStart(6, '0') ?? '000000')} onChange={onColor} />}\n\t\t{['dimension.generator.seed', 'dimension.generator.biome_source.seed', 'world_settings.seed'].includes(path.getContext().join('.')) && <button onClick={() => newSeed(path.model)} class=\"tooltipped tip-se\" aria-label={locale(lang, 'generate_new_seed')}>{Octicon.sync}</button>}\n\t</>\n}\n\nfunction StringSuffix({ path, getValues, config, node, value, lang, states }: NodeProps<StringHookParams>) {\n\tconst onChange = (evt: Event) => {\n\t\tevt.stopPropagation()\n\t\tconst newValue = (evt.target as HTMLSelectElement).value\n\t\tif (newValue === value) return\n\t\tpath.model.set(path, newValue.length === 0 ? undefined : newValue)\n\t}\n\tconst values = getValues()\n\tconst context = path.getContext().join('.')\n\tif (nbtFields.includes(context)) {\n\t\treturn <textarea value={value ?? ''} onBlur={onChange}></textarea>\n\t} else if ((isEnum(config) && !config.additional) || selectRegistries.includes(context)) {\n\t\tlet context = new Path([])\n\t\tif (isEnum(config) && typeof config.enum === 'string') {\n\t\t\tcontext = context.contextPush(config.enum)\n\t\t} else if (!isEnum(config) && config?.validator === 'resource' && typeof config.params.pool === 'string') {\n\t\t\tcontext = context.contextPush(config.params.pool)\n\t\t}\n\t\treturn <select value={value ?? ''} onChange={onChange}>\n\t\t\t{node.optional() && <option value=\"\">{locale(lang, 'unset')}</option>}\n\t\t\t{values.map(v => <option value={v}>\n\t\t\t\t{pathLocale(lang, context.contextPush(v.replace(/^minecraft:/, '')))}\n\t\t\t</option>)}\n\t\t</select>\n\t} else if (!isEnum(config) && config?.validator === 'block_state_key') {\n\t\tconst blockState = states?.[relativePath(path, config.params.id).get()]\n\t\tconst values = Object.keys(blockState?.properties ?? {})\n\t\treturn <select value={value ?? ''} onChange={onChange}>\n\t\t\t{values.map(v => <option>{v}</option>)}\n\t\t</select>\n\t} else {\n\t\tconst datalistId = hexId()\n\t\treturn <>\n\t\t\t<input value={value ?? ''} onBlur={onChange} onKeyDown={evt => {if (evt.key === 'Enter') onChange(evt)}}\n\t\t\t\tlist={values.length > 0 ? datalistId : ''} />\n\t\t\t{values.length > 0 && <datalist id={datalistId}>\n\t\t\t\t{values.map(v => <option value={v} />)}\n\t\t\t</datalist>}\n\t\t</>\n\t}\n}\n\ntype MenuAction = {\n\tlabel: string,\n\tdescription?: string,\n\ticon: keyof typeof Octicon,\n\tonSelect: () => unknown,\n}\n\ntype TreeNodeProps = {\n\tschema: INode<any>,\n\tpath: ModelPath,\n\tvalue: any,\n\tlang: string,\n\tstates: BlockStateRegistry,\n\tctx: Record<string, any>,\n\tcompare?: any,\n\tlabel?: string,\n\tactions?: MenuAction[],\n\tchildren?: ComponentChildren,\n}\nfunction TreeNode({ label, schema, path, value, lang, states, ctx, actions, children }: TreeNodeProps) {\n\tconst type = schema.type(path)\n\tconst category = schema.category(path)\n\tconst context = path.getContext().join('.')\n\n\tconst [active, setActive] = useFocus()\n\tconst onContextMenu = (evt: MouseEvent) => {\n\t\tevt.preventDefault()\n\t\tsetActive()\n\t}\n\n\tconst newCtx = {...ctx}\n\tdelete newCtx.index\n\tconst [prefix, suffix, body] = schema.hook(renderHtml, path, value, lang, states, newCtx)\n\treturn <div class={`node ${type}-node`} data-category={category}>\n\t\t<div class=\"node-header\" onContextMenu={onContextMenu}>\n\t\t\t<ErrorPopup lang={lang} path={path} />\n\t\t\t<HelpPopup lang={lang} path={path} />\n\t\t\t{children}\n\t\t\t{prefix}\n\t\t\t<label>\n\t\t\t\t{label ?? pathLocale(lang, path, `${path.last()}`)}\n\t\t\t\t{active && <div class=\"node-menu\">\n\t\t\t\t\t{actions?.map(a => <div key={a.label} class=\"menu-item\">\n\t\t\t\t\t\t<Btn icon={a.icon} tooltip={locale(lang, a.label)} tooltipLoc=\"se\" onClick={() => a.onSelect()}/>\n\t\t\t\t\t\t<span>{a.description ?? locale(lang, a.label)}</span>\n\t\t\t\t\t</div>)}\n\t\t\t\t\t<div class=\"menu-item\">\n\t\t\t\t\t\t<Btn icon=\"clippy\" tooltip={locale(lang, 'copy_context')} tooltipLoc=\"se\" onClick={() => navigator.clipboard.writeText(context)} />\n\t\t\t\t\t\t<span>{context}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t</label>\n\t\t\t{suffix}\n\t\t</div>\n\t\t{body && <div class=\"node-body\">{body}</div>}\n\t</div>\n}\n\nconst MemoedTreeNode = memo(TreeNode, (prev, next) => {\n\treturn prev.schema === next.schema\n\t\t&& prev.lang === next.lang\n\t\t&& prev.path.equals(next.path)\n\t\t&& deepEqual(prev.ctx, next.ctx)\n\t\t&& deepEqual(prev.value, next.value)\n})\n\nfunction isEnum(value?: ValidationOption | EnumOption): value is EnumOption {\n\treturn !!(value as any)?.enum\n}\n\nfunction hashString(str: string) {\n\tvar hash = 0, i, chr\n\tfor (i = 0; i < str.length; i++) {\n\t\tchr = str.charCodeAt(i)\n\t\thash = ((hash << 5) - hash) + chr\n\t\thash |= 0\n\t}\n\treturn hash\n}\n\nfunction pathLocale(lang: string, path: Path, ...params: string[]) {\n\tconst ctx = path.getContext()\n\tfor (let i = 0; i < ctx.length; i += 1) {\n\t\tconst key = ctx.slice(i).join('.')\n\t\tconst result = locale(lang, key, ...params)\n\t\tif (key !== result) {\n\t\t\treturn result\n\t\t}\n\t}\n\treturn ctx[ctx.length - 1]\n}\n\nfunction ErrorPopup({ lang, path, nested }: { lang: string, path: ModelPath, nested?: boolean }) {\n\tif (path.model instanceof ModelWrapper) {\n\t\tpath = path.model.map(path).withModel(path.model)\n\t}\n\tconst e = nested\n\t\t?\tpath.model.errors.getAll().filter(e => e.path.startsWith(path))\n\t\t: path.model.errors.get(path, true)\n\tif (e.length === 0) return null\n\tconst message = locale(lang, e[0].error, ...(e[0].params ?? []))\n\treturn popupIcon('node-error', 'issue_opened', message)\n}\n\nfunction HelpPopup({ lang, path }: { lang: string, path: Path }) {\n\tconst key = path.contextPush('help').getContext().join('.')\n\tconst message = locale(lang, key)\n\tif (message === key) return null\n\treturn popupIcon('node-help', 'info', message)\n}\n\nconst popupIcon = (type: string, icon: keyof typeof Octicon, popup: string) => {\n\tconst [active, setActive] = useFocus()\n\n\treturn <div class={`node-icon ${type}${active ? ' show' : ''}`} onClick={setActive}>\n\t\t{Octicon[icon]}\n\t\t<span class=\"icon-popup\">{popup}</span>\n\t</div>\n}\n\nfunction isDecorated(context: string | undefined, value: any) {\n\treturn context === 'feature'\n\t\t&& value?.type?.replace(/^minecraft:/, '') === 'decorated'\n\t\t&& isObject(value?.config)\n}\n\nfunction createDecoratorsWrapper(originalFields: NodeChildren, path: ModelPath, value: any) {\n\tconst decorators: any[] = []\n\tconst feature = iterateNestedDecorators(value, decorators)\n\tconst fields = {\n\t\ttype: originalFields.type,\n\t\tconfig: ObjectNode({\n\t\t\tdecorators: ListNode(CachedDecorator),\n\t\t\tfeature: CachedFeature,\n\t\t}, { context: 'feature.decorated' }),\n\t}\n\tconst schema = ObjectNode(fields, { context: 'feature' })\n\tconst featurePath = new Path(['config', 'feature'])\n\tconst decoratorsPath = new Path(['config', 'decorators'])\n\tconst model = path.getModel()\n\tconst wrapper: ModelWrapper = new ModelWrapper(schema, path => {\n\t\tif (path.startsWith(featurePath)) {\n\t\t\treturn new Path([...[...Array(decorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\n\t\t} else if (path.startsWith(decoratorsPath)) {\n\t\t\tif (path.modelArr.length === 2) {\n\t\t\t\treturn new Path([])\n\t\t\t}\n\t\t\tconst index = path.modelArr[2]\n\t\t\tif (typeof index === 'number') {\n\t\t\t\treturn new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\n\t\t\t}\n\t\t}\n\t\treturn path\n\t}, path => {\n\t\tif (path.equals(decoratorsPath)) {\n\t\t\tconst newDecorators: any[] = []\n\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\treturn newDecorators\n\t\t}\n\t\treturn model.get(wrapper.map(path))\n\t}, (path, value, silent) => {\n\t\tif (path.startsWith(featurePath)) {\n\t\t\tconst newDecorators: any[] = []\n\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\tconst newPath =new Path([...[...Array(newDecorators.length - 1)].flatMap(() => ['config', 'feature']), ...path.modelArr])\n\t\t\treturn model.set(newPath, value, silent)\n\t\t} else if (path.startsWith(decoratorsPath)) {\n\t\t\tconst index = path.modelArr[2]\n\t\t\tif (path.modelArr.length === 2) {\n\t\t\t\tconst feature = wrapper.get(featurePath)\n\t\t\t\treturn model.set(new Path(), produceNestedDecorators(feature, value), silent)\n\t\t\t} else if (typeof index === 'number') {\n\t\t\t\tif (path.modelArr.length === 3 && value === undefined) {\n\t\t\t\t\tconst feature = wrapper.get(featurePath)\n\t\t\t\t\tconst newDecorators: any[] = []\n\t\t\t\t\titerateNestedDecorators(model.data, newDecorators)\n\t\t\t\t\tnewDecorators.splice(index, 1)\n\t\t\t\t\tconst newValue = produceNestedDecorators(feature, newDecorators)\n\t\t\t\t\treturn model.set(new Path(), newValue, silent)\n\t\t\t\t} else {\n\t\t\t\t\tconst newPath = new Path([...[...Array(index)].flatMap(() => ['config', 'feature']), 'config', 'decorator', ...path.modelArr.slice(3)])\n\t\t\t\t\treturn model.set(newPath, value, silent)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmodel.set(path, value, silent)\n\t})\n\twrapper.data = {\n\t\ttype: model.data.type,\n\t\tconfig: {\n\t\t\tdecorators,\n\t\t\tfeature,\n\t\t},\n\t}\n\twrapper.errors = model.errors\n\treturn { fields, wrapper }\n}\n\nfunction iterateNestedDecorators(value: any, decorators: any[]): any {\n\tif (value?.type?.replace(/^minecraft:/, '') !== 'decorated') {\n\t\treturn value\n\t}\n\tif (!isObject(value?.config)) {\n\t\treturn value\n\t}\n\tdecorators.push({ id: decorators.length, node: value.config.decorator })\n\treturn iterateNestedDecorators(value.config.feature ?? '', decorators)\n}\n\nfunction produceNestedDecorators(feature: any, decorators: any[]): any {\n\tif (decorators.length === 0) return feature\n\treturn {\n\t\ttype: 'minecraft:decorated',\n\t\tconfig: {\n\t\t\tdecorator: decorators.shift().node,\n\t\t\tfeature: produceNestedDecorators(feature, decorators),\n\t\t},\n\t}\n}\n","import type { DataModel } from '@mcschema/core'\nimport { useErrorBoundary, useState } from 'preact/hooks'\nimport { useModel } from '../../hooks'\nimport { FullNode } from '../../schema/renderHtml'\nimport type { BlockStateRegistry, VersionId } from '../../Schemas'\n\ntype TreePanelProps = {\n\tlang: string,\n\tversion: VersionId,\n\tmodel: DataModel | null,\n\tblockStates: BlockStateRegistry | null,\n\tonError: (message: string) => unknown,\n}\nexport function Tree({ lang, model, blockStates, onError }: TreePanelProps) {\n\tif (!model || !blockStates || lang === 'none') return <></>\n\n\tconst [error] = useErrorBoundary(e => {\n\t\tonError(`Error rendering the tree: ${e.message}`)\n\t\tconsole.error(e)\n\t})\n\tif (error) return <></>\n\n\tconst [, setState] = useState(0)\n\tuseModel(model, () => {\n\t\tsetState(state => state + 1)\n\t})\n\n\treturn <div class=\"tree\">\n\t\t<FullNode {...{model, lang, blockStates}}/>\n\t</div>\n}\n","import { getCurrentUrl, Link, route } from 'preact-router'\nimport { Btn, BtnMenu, Icons, Octicon } from '.'\nimport config from '../../config.json'\nimport { locale } from '../Locales'\nimport type { VersionId } from '../Schemas'\nimport { checkVersion } from '../Schemas'\nimport { cleanUrl, getGenerator } from '../Utils'\n\nconst Themes: Record<string, keyof typeof Octicon> = {\n\tsystem: 'device_desktop',\n\tdark: 'moon',\n\tlight: 'sun',\n}\n\ntype HeaderProps = {\n\tlang: string,\n\ttitle: string,\n\tversion: VersionId,\n\ttheme: string,\n\tchangeTheme: (theme: string) => unknown,\n\tlanguage: string,\n\tchangeLanguage: (language: string) => unknown,\n}\nexport function Header({ lang, title, version, theme, changeTheme, language, changeLanguage }: HeaderProps) {\n\tconst loc = locale.bind(null, lang)\n\tconst gen = getGenerator(getCurrentUrl())\n\n\treturn <header>\n\t\t<div class=\"title\">\n\t\t\t<Link class=\"home-link\" href=\"/\" aria-label={loc('home')}>{Icons.home}</Link>\n\t\t\t<h2>{title}</h2>\n\t\t\t{gen && <BtnMenu icon=\"chevron_down\" tooltip={loc('switch_generator')}>\n\t\t\t\t{config.generators\n\t\t\t\t\t.filter(g => g.category === gen?.category && checkVersion(version, g.minVersion))\n\t\t\t\t\t.map(g =>\n\t\t\t\t\t\t<Btn label={loc(g.id)} active={g.id === gen.id} onClick={() => route(cleanUrl(g.url))} />\n\t\t\t\t\t)}\n\t\t\t</BtnMenu>}\n\t\t</div>\n\t\t<nav>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<BtnMenu icon=\"globe\" tooltip={loc('language')}>\n\t\t\t\t\t\t{config.languages.map(({ code, name }) =>\n\t\t\t\t\t\t\t<Btn label={name} active={code === language}\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(code)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<BtnMenu icon={Themes[theme]} tooltip={loc('theme')}>\n\t\t\t\t\t\t{Object.entries(Themes).map(([th, icon]) =>\n\t\t\t\t\t\t\t<Btn icon={icon} label={loc(`theme.${th}`)} active={th === theme}\n\t\t\t\t\t\t\t\tonClick={() => changeTheme(th)} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</BtnMenu>\n\t\t\t\t</li>\n\t\t\t\t<li class=\"dimmed\">\n\t\t\t\t\t<a href=\"https://github.com/misode/misode.github.io\" target=\"_blank\" rel=\"noreferrer\" class=\"tooltipped tip-sw\" aria-label={loc('github')}>\n\t\t\t\t\t\t{Octicon.mark_github}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</nav>\n\t</header>\n}\n","export const Icons = {\n\thome: <svg width=\"32\" height=\"28\" viewBox=\"0 0 32 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"26\" height=\"6\" rx=\"3\" fill=\"#7CB45C\"/><rect x=\"8\" width=\"18\" height=\"6\" rx=\"3\" fill=\"#4BA041\"/><rect y=\"11\" width=\"32\" height=\"6\" rx=\"3\" fill=\"#AAA8A8\"/><rect x=\"11\" y=\"11\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#91908F\"/><rect x=\"11\" y=\"22\" width=\"21\" height=\"6\" rx=\"3\" fill=\"#70B5C3\"/><rect x=\"17\" y=\"22\" width=\"15\" height=\"6\" rx=\"3\" fill=\"#4D989B\"/></svg>,\n\treport: <svg width=\"30\" height=\"36\" viewBox=\"0 0 30 36\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 16C0 13.7909 1.79086 12 4 12V12C6.20914 12 8 13.7909 8 16V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V16Z\" fill=\"#6ACC5D\"/><path d=\"M11 4C11 1.79086 12.7909 0 15 0V0C17.2091 0 19 1.79086 19 4V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V4Z\" fill=\"#FF4C4C\"/><path d=\"M22 10C22 7.79086 23.7909 6 26 6V6C28.2091 6 30 7.79086 30 10V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V10Z\" fill=\"#E5B442\"/><path d=\"M0 23C0 20.7909 1.79086 19 4 19V19C6.20914 19 8 20.7909 8 23V32C8 34.2091 6.20914 36 4 36V36C1.79086 36 0 34.2091 0 32V23Z\" fill=\"#2BAD1D\"/><path d=\"M11 15C11 12.7909 12.7909 11 15 11V11C17.2091 11 19 12.7909 19 15V32C19 34.2091 17.2091 36 15 36V36C12.7909 36 11 34.2091 11 32V15Z\" fill=\"#C10B0B\"/><path d=\"M22 19C22 16.7909 23.7909 15 26 15V15C28.2091 15 30 16.7909 30 19V32C30 34.2091 28.2091 36 26 36V36C23.7909 36 22 34.2091 22 32V19Z\" fill=\"#CC8E00\"/></svg>,\n\tsounds: <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"#451475\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3.5 10C3.5 8.27609 4.18482 6.62279 5.40381 5.40381C6.62279 4.18482 8.27609 3.5 10 3.5C11.7239 3.5 13.3772 4.18482 14.5962 5.40381C15.8152 6.62279 16.5 8.27609 16.5 10C16.5 11.7239 15.8152 13.3772 14.5962 14.5962C13.3772 15.8152 11.7239 16.5 10 16.5C8.27609 16.5 6.62279 15.8152 5.40381 14.5962C4.18482 13.3772 3.5 11.7239 3.5 10V10ZM10 2C7.87827 2 5.84344 2.84285 4.34315 4.34315C2.84285 5.84344 2 7.87827 2 10C2 12.1217 2.84285 14.1566 4.34315 15.6569C5.84344 17.1571 7.87827 18 10 18C12.1217 18 14.1566 17.1571 15.6569 15.6569C17.1571 14.1566 18 12.1217 18 10C18 7.87827 17.1571 5.84344 15.6569 4.34315C14.1566 2.84285 12.1217 2 10 2V2ZM8.379 7.227C8.34101 7.20412 8.29762 7.19175 8.25327 7.19117C8.20892 7.19059 8.16522 7.20181 8.12664 7.2237C8.08807 7.24558 8.05601 7.27733 8.03375 7.3157C8.0115 7.35406 7.99985 7.39765 8 7.442V12.559C8.00003 12.6033 8.0118 12.6467 8.03413 12.685C8.05646 12.7232 8.08854 12.7548 8.12708 12.7765C8.16563 12.7983 8.20926 12.8095 8.25352 12.8088C8.29778 12.8082 8.34108 12.7958 8.379 12.773L12.643 10.214C12.6798 10.1917 12.7103 10.1604 12.7315 10.1229C12.7526 10.0854 12.7638 10.043 12.7638 10C12.7638 9.95695 12.7526 9.91463 12.7315 9.87714C12.7103 9.83965 12.6798 9.80825 12.643 9.786L8.379 7.227Z\" fill=\"#C5A5E6\"/></svg>,\n}\n","import { Howl } from 'howler'\nimport { useEffect, useRef, useState } from 'preact/hooks'\nimport { Btn, NumberInput, RangeInput, TextInput } from '..'\nimport { getResourceUrl } from '../../DataFetcher'\nimport { locale } from '../../Locales'\nimport type { SoundEvents, VersionAssets } from '../../Manifest'\n\nexport interface SoundConfig {\n\tid: string,\n\tsound: string,\n\tdelay: number,\n\tpitch: number,\n\tvolume: number,\n}\ntype SoundConfigProps = SoundConfig & {\n\tlang: string,\n\tassets: VersionAssets,\n\tsounds: SoundEvents,\n\tonEdit: (changes: Partial<SoundConfig>) => unknown,\n\tonDelete: () => unknown,\n\tdelayedPlay?: number,\n}\nexport function SoundConfig({ lang, assets, sounds, sound, delay, pitch, volume, onEdit, onDelete, delayedPlay }: SoundConfigProps) {\n\tconst loc = locale.bind(null, lang)\n\tconst [loading, setLoading] = useState(true)\n\tconst [playing, setPlaying] = useState(false)\n\tconst [invalid, setInvalid] = useState(false)\n\tconst howls = useRef<Howl[]>([])\n\tconst command = `playsound minecraft:${sound} master @s ~ ~ ~ ${volume} ${pitch}`\n\n\tuseEffect(() => {\n\t\tconst soundEvent = sounds[sound]\n\t\tsetInvalid((soundEvent?.sounds?.length ?? 0) === 0)\n\t\thowls.current.forEach(h => h.stop())\n\t\thowls.current = (soundEvent?.sounds ?? []).map(entry => {\n\t\t\tconst soundPath = typeof entry === 'string' ? entry : entry.name\n\t\t\tconst hash = assets[`minecraft/sounds/${soundPath}.ogg`].hash\n\t\t\tconst url = getResourceUrl(hash)\n\t\t\tconst howl = new Howl({\n\t\t\t\tsrc: [url],\n\t\t\t\tformat: ['ogg'],\n\t\t\t\tvolume,\n\t\t\t\trate: pitch,\n\t\t\t})\n\t\t\thowl.on('end', () => {\n\t\t\t\tsetPlaying(false)\n\t\t\t})\n\t\t\tconst completed = () => {\n\t\t\t\tif (loading && howls.current.every(h => h.state() === 'loaded')) {\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (howl.state() === 'loaded') {\n\t\t\t\tsetTimeout(() => completed())\n\t\t\t} else {\n\t\t\t\thowl.on('load', () => {\n\t\t\t\t\tcompleted()\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn howl\n\t\t})\n\t\tsetLoading(true)\n\t}, [sound, sounds])\n\n\tuseEffect(() => {\n\t\thowls.current.forEach(h => h.rate(pitch))\n\t}, [pitch])\n\n\tuseEffect(() => {\n\t\thowls.current.forEach(h => h.volume(volume))\n\t}, [volume])\n\n\tconst play = () => {\n\t\tif (loading || invalid) return\n\t\tstop()\n\t\tconst howl = Math.floor(Math.random() * howls.current.length)\n\t\thowls.current[howl].play()\n\t\tsetPlaying(true)\n\t}\n\tconst stop = () => {\n\t\thowls.current.forEach(h => h.stop())\n\t}\n\tuseEffect(() => {\n\t\tif (delayedPlay) setTimeout(() => play(), delay * 50)\n\t}, [delayedPlay])\n\n\tuseEffect(() => {\n\t\treturn () => stop()\n\t}, [])\n\n\tconst [copyActive, setCopyActive] = useState(false)\n\tconst copyTimeout = useRef<number | undefined>(undefined)\n\tconst copy = () => {\n\t\tnavigator.clipboard.writeText(command)\n\t\tsetCopyActive(true)\n\t\tif (copyTimeout.current !== undefined) clearTimeout(copyTimeout.current)\n\t\tcopyTimeout.current = setTimeout(() => {\n\t\t\tsetCopyActive(false)\n\t\t}, 2000) as any\n\t}\n\n\treturn <div class={`sound-config${loading ? ' loading' : playing ? ' playing' : ''}${invalid ? ' invalid' : ''}`}>\n\t\t<Btn class=\"play\" icon={invalid ? 'alert' : loading ? 'sync' : 'play'} label={loc('sounds.play')} onClick={play} tooltip={invalid ? loc('sounds.unknown_sound') : loading ? loc('sounds.loading_sound') : loc('sounds.play_sound')} tooltipLoc=\"se\" />\n\t\t<TextInput class=\"btn btn-input sound\" list=\"sound-list\" spellcheck={false}\n\t\t\tvalue={sound} onChange={sound => onEdit({ sound })} />\n\t\t<label class=\"delay-label\">{loc('sounds.delay')}: </label>\n\t\t<NumberInput class=\"btn btn-input delay\" min={0}\n\t\t\tvalue={delay} onChange={delay => onEdit({ delay })} />\n\t\t<label class=\"pitch-label\">{loc('sounds.pitch')}: </label>\n\t\t<RangeInput class=\"pitch tooltipped tip-s\" min={0.5} max={2} step={0.01}\n\t\t\taria-label={pitch.toFixed(2)} style={`--x: ${(pitch - 0.5) * (100 / 1.5)}%`}\n\t\t\tvalue={pitch} onChange={pitch => onEdit({ pitch })} />\n\t\t<label class=\"volume-label\">{loc('sounds.volume')}: </label>\n\t\t<RangeInput class=\"volume tooltipped tip-s\" min={0} max={1} step={0.01}\n\t\t\taria-label={volume.toFixed(2)} style={`--x: ${volume * 100}%`}\n\t\t\tvalue={volume} onChange={volume => onEdit({ volume })} />\n\t\t<Btn class={`copy${copyActive ? ' active' : ''}`} icon={copyActive ? 'check' : 'terminal'} label={loc('copy')} tooltip={copyActive ? loc('copied') : loc('sounds.copy_command')}\n\t\t\tonClick={copy} />\n\t\t<Btn class=\"remove\" icon=\"trashcan\" tooltip={loc('sounds.remove_sound')}\n\t\t\tonClick={() => {onDelete(); stop()}} />\n\t</div>\n}\n","import type { ComponentChildren } from 'preact'\nimport { Icons } from './Icons'\n\ntype ToolCardProps = {\n\ttitle: string,\n\tlink: string,\n\ticon?: keyof typeof Icons,\n\tchildren?: ComponentChildren,\n}\nexport function ToolCard({ title, link, icon, children }: ToolCardProps) {\n\treturn <a class=\"tool-card\" href={link}>\n\t\t{icon && Icons[icon]}\n\t\t<div>\n\t\t\t<h3>{title}</h3>\n\t\t\t{children}\n\t\t</div>\n\t</a>\n}\n","import { DataModel, Path } from '@mcschema/core'\nimport { getCurrentUrl } from 'preact-router'\nimport { useEffect, useErrorBoundary, useRef, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport { Analytics } from '../Analytics'\nimport { Ad, Btn, BtnInput, BtnMenu, ErrorPanel, HasPreview, Octicon, PreviewPanel, SourcePanel, Tree } from '../components'\nimport { fetchPreset } from '../DataFetcher'\nimport { useModel } from '../hooks'\nimport { locale } from '../Locales'\nimport type { BlockStateRegistry, VersionId } from '../Schemas'\nimport { checkVersion, getBlockStates, getCollections, getModel } from '../Schemas'\nimport { getGenerator, message } from '../Utils'\n\ntype GeneratorProps = {\n\tlang: string,\n\tchangeTitle: (title: string, versions?: VersionId[]) => unknown,\n\tversion: VersionId,\n\tchangeVersion: (version: VersionId) => unknown,\n\tdefault?: true,\n}\nexport function Generator({ lang, changeTitle, version, changeVersion }: GeneratorProps) {\n\tconst loc = locale.bind(null, lang)\n\tconst [error, setError] = useState<string | null>(null)\n\tconst [errorBoundary, errorRetry] = useErrorBoundary()\n\tif (errorBoundary) {\n\t\treturn <main><ErrorPanel error={`Something went wrong rendering the generator: ${errorBoundary.message}`} onDismiss={errorRetry} /></main>\n\t}\n\n\tconst gen = getGenerator(getCurrentUrl())\n\tif (!gen) {\n\t\treturn <main><ErrorPanel error={`Cannot find generator \"${getCurrentUrl()}\"`} /></main>\n\t}\n\n\tuseEffect(() => {\n\t\tsetError(null)\n\t}, [gen.id, version])\n\n\tconst allowedVersions = config.versions\n\t\t.filter(v => checkVersion(v.id, gen.minVersion))\n\t\t.map(v => v.id as VersionId)\n\n\tchangeTitle(loc('title.generator', loc(gen.id)), allowedVersions)\n\n\tif (!checkVersion(version, gen.minVersion)) {\n\t\tsetError(`The minimum version for this generator is ${gen.minVersion}`)\n\t}\n\n\tconst [model, setModel] = useState<DataModel | null>(null)\n\tconst [blockStates, setBlockStates] = useState<BlockStateRegistry | null>(null)\n\tuseEffect(() => {\n\t\tsetModel(null)\n\t\tgetBlockStates(version)\n\t\t\t.then(b => setBlockStates(b))\n\t\tgetModel(version, gen.id)\n\t\t\t.then(m => setModel(m))\n\t\t\t.catch(e => { console.error(e); setError(message(e)) })\n\t}, [version, gen.id])\n\n\tuseModel(model, () => {\n\t\tsetError(null)\n\t})\n\n\tconst reset = () => {\n\t\tAnalytics.generatorEvent('reset')\n\t\tmodel?.reset(DataModel.wrapLists(model.schema.default()), true)\n\t}\n\tconst undo = (e: MouseEvent) => {\n\t\te.stopPropagation()\n\t\tAnalytics.generatorEvent('undo', 'Menu')\n\t\tmodel?.undo()\n\t}\n\tconst redo = (e: MouseEvent) => {\n\t\te.stopPropagation()\n\t\tAnalytics.generatorEvent('redo', 'Menu')\n\t\tmodel?.redo()\n\t}\n\n\tconst onKeyUp = (e: KeyboardEvent) => {\n\t\tif (e.ctrlKey && e.key === 'z') {\n\t\t\tAnalytics.generatorEvent('undo', 'Hotkey')\n\t\t\tmodel?.undo()\n\t\t} else if (e.ctrlKey && e.key === 'y') {\n\t\t\tAnalytics.generatorEvent('redo', 'Hotkey')\n\t\t\tmodel?.redo()\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tdocument.addEventListener('keyup', onKeyUp)\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keyup', onKeyUp)\n\t\t}\n\t}, [model])\n\n\tconst [presetFilter, setPresetFilter] = useState('')\n\tconst [presetResults, setPresetResults] = useState<string[]>([])\n\tuseEffect(() => {\n\t\tgetCollections(version)\n\t\t\t.then(collections => {\n\t\t\t\tconst terms = (presetFilter ?? '').trim().split(' ')\n\t\t\t\tconst presets = collections.get(gen.id)\n\t\t\t\t\t.map(p => p.slice(10))\n\t\t\t\t\t.filter(p => terms.every(t => p.includes(t)))\n\t\t\t\tif (presets) {\n\t\t\t\t\tsetPresetResults(presets)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(e => { console.error(e); setError(e.message) })\n\t}, [version, gen.id, presetFilter])\n\n\tconst loadPreset = (id: string) => {\n\t\tAnalytics.generatorEvent('load-preset', id)\n\t\tfetchPreset(version, gen.path ?? gen.id, id).then(preset => {\n\t\t\tconst seed = model?.get(new Path(['generator', 'seed']))\n\t\t\tif (preset?.generator?.seed !== undefined && seed !== undefined) {\n\t\t\t\tpreset.generator.seed = seed\n\t\t\t\tif (preset.generator.biome_source?.seed !== undefined) {\n\t\t\t\t\tpreset.generator.biome_source.seed = seed\n\t\t\t\t}\n\t\t\t}\n\t\t\tmodel?.reset(DataModel.wrapLists(preset), false)\n\t\t})\n\t}\n\n\tconst [sourceShown, setSourceShown] = useState(window.innerWidth > 820)\n\tconst [doCopy, setCopy] = useState(0)\n\tconst [doDownload, setDownload] = useState(0)\n\tconst [doImport, setImport] = useState(0)\n\n\tconst copySource = () => {\n\t\tAnalytics.generatorEvent('copy')\n\t\tsetCopy(doCopy + 1)\n\t}\n\tconst downloadSource = () => {\n\t\tAnalytics.generatorEvent('download')\n\t\tsetDownload(doDownload + 1)\n\t}\n\tconst importSource = () => {\n\t\tAnalytics.generatorEvent('import')\n\t\tsetSourceShown(true)\n\t\tsetImport(doImport + 1)\n\t}\n\tconst toggleSource = () => {\n\t\tAnalytics.generatorEvent('toggle-output', !sourceShown ? 'visible' : 'hidden')\n\t\tsetSourceShown(!sourceShown)\n\t\tsetCopy(0)\n\t\tsetDownload(0)\n\t\tsetImport(0)\n\t}\n\n\tconst [copyActive, setCopyActive] = useState(false)\n\tconst copyTimeout = useRef<number | undefined>(undefined)\n\tconst copySuccess = () => {\n\t\tsetCopyActive(true)\n\t\tif (copyTimeout.current !== undefined) clearTimeout(copyTimeout.current)\n\t\tcopyTimeout.current = setTimeout(() => {\n\t\t\tsetCopyActive(false)\n\t\t}, 2000) as any\n\t}\n\n\tconst [previewShown, setPreviewShown] = useState(false)\n\tconst hasPreview = HasPreview.includes(gen.id)\n\tif (previewShown && !hasPreview) setPreviewShown(false)\n\tlet actionsShown = 1\n\tif (hasPreview) actionsShown += 1\n\tif (sourceShown) actionsShown += 2\n\n\tconst togglePreview = () => {\n\t\tAnalytics.generatorEvent('toggle-preview', !previewShown ? 'visible' : 'hidden')\n\t\tsetPreviewShown(!previewShown)\n\t}\n\n\treturn <>\n\t\t<main class={previewShown ? 'has-preview' : ''}>\n\t\t\t<Ad id=\"data-pack-generator\" type=\"text\" />\n\t\t\t<div class=\"controls\">\n\t\t\t\t<Btn icon=\"upload\" label={loc('import')} onClick={importSource} />\n\t\t\t\t<BtnMenu icon=\"archive\" label={loc('presets')} relative={false}>\n\t\t\t\t\t<BtnInput icon=\"search\" large value={presetFilter} onChange={setPresetFilter} doSelect={1} placeholder={loc('search')} />\n\t\t\t\t\t<div class=\"result-list\">\n\t\t\t\t\t\t{presetResults.map(preset => <Btn label={preset} onClick={() => loadPreset(preset)} />)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{presetResults.length === 0 && <Btn label={loc('no_presets')}/>}\n\t\t\t\t</BtnMenu>\n\t\t\t\t<BtnMenu icon=\"tag\" label={version}>\n\t\t\t\t\t{allowedVersions.reverse().map(v =>\n\t\t\t\t\t\t<Btn label={v} active={v === version} onClick={() => changeVersion(v)} />\n\t\t\t\t\t)}\n\t\t\t\t</BtnMenu>\n\t\t\t\t<BtnMenu icon=\"kebab_horizontal\" tooltip={loc('more')}>\n\t\t\t\t\t<Btn icon=\"history\" label={loc('reset')} onClick={reset} />\n\t\t\t\t\t<Btn icon=\"arrow_left\" label={loc('undo')} onClick={undo} />\n\t\t\t\t\t<Btn icon=\"arrow_right\" label={loc('redo')} onClick={redo} />\n\t\t\t\t</BtnMenu>\n\t\t\t</div>\n\t\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t\t<Tree {...{lang, model, version, blockStates}} onError={setError} />\n\t\t</main>\n\t\t<div class=\"popup-actions\" style={`--offset: -${8 + actionsShown * 50}px;`}>\n\t\t\t<div class={`popup-action action-preview${hasPreview ? ' shown' : ''} tooltipped tip-nw`} aria-label={loc(previewShown ? 'hide_preview' : 'show_preview')} onClick={togglePreview}>\n\t\t\t\t{previewShown ? Octicon.x_circle : Octicon.play}\n\t\t\t</div>\n\t\t\t<div class={`popup-action action-download${sourceShown ? ' shown' : ''} tooltipped tip-nw`} aria-label={loc('download')} onClick={downloadSource}>\n\t\t\t\t{Octicon.download}\n\t\t\t</div>\n\t\t\t<div class={`popup-action action-copy${sourceShown ? ' shown' : ''}${copyActive ? ' active' : ''} tooltipped tip-nw`} aria-label={loc(copyActive ? 'copied' : 'copy')} onClick={copySource}>\n\t\t\t\t{copyActive ? Octicon.check : Octicon.clippy}\n\t\t\t</div>\n\t\t\t<div class={'popup-action action-code shown tooltipped tip-nw'} aria-label={loc(sourceShown ? 'hide_output' : 'show_output')} onClick={toggleSource}>\n\t\t\t\t{sourceShown ? Octicon.chevron_right : Octicon.code}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class={`popup-preview${previewShown ? ' shown' : ''}`}>\n\t\t\t<PreviewPanel {...{lang, model, version, id: gen.id}} shown={previewShown} onError={setError} />\n\t\t</div>\n\t\t<div class={`popup-source${sourceShown ? ' shown' : ''}`}>\n\t\t\t<SourcePanel {...{lang, model, blockStates, doCopy, doDownload, doImport}} name={gen.schema ?? 'data'} copySuccess={copySuccess} onError={setError} />\n\t\t</div>\n\t</>\n}\n","import config from '../../config.json'\nimport { ToolCard } from '../components'\nimport { locale } from '../Locales'\nimport { cleanUrl } from '../Utils'\n\ntype HomeProps = {\n\tlang: string,\n\tchangeTitle: (title: string) => unknown,\n\tpath?: string,\n}\nexport function Home({ lang, changeTitle }: HomeProps) {\n\tconst loc = locale.bind(null, lang)\n\tchangeTitle(loc('title.home'))\n\treturn <main>\n\t\t<div class=\"home\">\n\t\t\t{config.generators.filter(g => !g.category).map(g => \n\t\t\t\t<ToolCard title={loc(g.id)} link={cleanUrl(g.url)} />\n\t\t\t)}\n\t\t\t<ToolCard title={loc('worldgen')} link=\"/worldgen/\" />\n\t\t\t<hr />\n\t\t\t<ToolCard title=\"Report Inspector\" icon=\"report\" link=\"https://misode.github.io/report/\">\n\t\t\t\t<p>Analyse your performance reports</p>\n\t\t\t</ToolCard>\n\t\t\t<ToolCard title=\"Minecraft Sounds\" icon=\"sounds\" link=\"/sounds/\">\n\t\t\t\t<p>Browse through and mix all the vanilla sounds</p>\n\t\t\t</ToolCard>\n\t\t\t<ToolCard title=\"Data Pack Upgrader\" link=\"https://misode.github.io/upgrader/\">\n\t\t\t\t<p>Convert your 1.16 data packs to 1.17</p>\n\t\t\t</ToolCard>\n\t\t</div>\n\t</main>\n}\n","import { fetchAssets, fetchManifest, fetchSounds } from './DataFetcher'\nimport type { VersionId } from './Schemas'\n\nexport type VersionManifest = {\n\tlatest: {\n\t\trelease: string,\n\t\tsnapshot: string,\n\t},\n\tversions: {\n\t\tid: string,\n\t\ttype: string,\n\t\turl: string,\n\t}[],\n}\nlet Manifest: VersionManifest | Promise<VersionManifest> | null = null\n\nexport type VersionAssets = {\n\t[key: string]: {\n\t\thash: string,\n\t},\n}\nconst VersionAssets: Record<string, VersionAssets | Promise<VersionAssets>> = {}\n\nexport type SoundEvents = {\n\t[key: string]: {\n\t\tsounds: (string | { name: string })[],\n\t},\n}\nconst SoundEvents: Record<string, SoundEvents | Promise<SoundEvents>> = {}\n\nexport async function getManifest() {\n\tif (!Manifest) {\n\t\tManifest = fetchManifest()\n\t}\n\treturn Manifest\n}\n\nexport async function getAssets(version: VersionId) {\n\tif (!VersionAssets[version]) {\n\t\tVersionAssets[version] = (async () => {\n\t\t\tconst manifest = await getManifest()\n\t\t\treturn await fetchAssets(version, manifest)\n\t\t})()\n\t}\n\treturn VersionAssets[version]\n}\n\nexport async function getSounds(version: VersionId) {\n\tif (!SoundEvents[version]) {\n\t\tSoundEvents[version] = (async () => {\n\t\t\tconst assets = await getAssets(version)\n\t\t\treturn await fetchSounds(version, assets)\n\t\t})()\n\t}\n\treturn SoundEvents[version]\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport config from '../../config.json'\nimport { Ad, Btn, BtnMenu, ErrorPanel, SoundConfig, TextInput } from '../components'\nimport { locale } from '../Locales'\nimport type { SoundEvents, VersionAssets } from '../Manifest'\nimport { getAssets, getSounds } from '../Manifest'\nimport type { VersionId } from '../Schemas'\nimport { hexId, message } from '../Utils'\n\ntype SoundsProps = {\n\tpath?: string,\n\tlang: string,\n\tchangeTitle: (title: string, versions?: VersionId[]) => unknown,\n\tversion: VersionId,\n\tchangeVersion: (version: VersionId) => unknown,\n}\nexport function Sounds({ lang, changeTitle, version, changeVersion }: SoundsProps) {\n\tconst loc = locale.bind(null, lang)\n\tconst [error, setError] = useState<string | null>(null)\n\tchangeTitle(loc('title.sounds'))\n\n\tconst [assets, setAssets] = useState<VersionAssets>({})\n\tconst [sounds, setSounds] = useState<SoundEvents>({})\n\tconst soundKeys = Object.keys(sounds ?? {})\n\tuseEffect(() => {\n\t\tgetAssets(version)\n\t\t\t.then(assets => { setAssets(assets); return getSounds(version) })\n\t\t\t.then(sounds => { if (sounds) setSounds(sounds) })\n\t\t\t.catch(e => { console.error(e); setError(message(e)) })\n\t}, [version])\n\n\tconst [search, setSearch] = useState('')\n\tconst [configs, setConfigs] = useState<SoundConfig[]>([])\n\tconst addConfig = () => {\n\t\tsetConfigs([{ id: hexId(), sound: search, delay: 0, pitch: 1, volume: 1 }, ...configs])\n\t}\n\tconst editConfig = (id: string) => (changes: Partial<SoundConfig>) => {\n\t\tsetConfigs(configs.map(c => c.id === id ? { ...c, ...changes } : c))\n\t}\n\tconst deleteConfig = (id: string) => () => {\n\t\tsetConfigs(configs.filter(c => c.id !== id))\n\t}\n\n\tconst [delayedPlay, setDelayedPlay] = useState(0)\n\tconst playAll = () => {\n\t\tsetDelayedPlay(delayedPlay + 1)\n\t}\n\n\tconst download = useRef<HTMLAnchorElement>(null)\n\tconst downloadFunction = () => {\n\t\tconst hasDelay = configs.some(c => c.delay > 0)\n\t\tconst content = configs\n\t\t\t.sort((a, b) => a.delay - b.delay)\n\t\t\t.map(c => `${hasDelay ? `execute if score @s delay matches ${c.delay} run ` : ''}playsound minecraft:${c.sound} master @s ~ ~ ~ ${c.volume} ${c.pitch}`)\n\t\t\t.join('\\n')\n\t\tdownload.current.setAttribute('href', 'data:text/plain;charset=utf-8,' + content + '%0A')\n\t\tdownload.current.setAttribute('download', 'sounds.mcfunction')\n\t\tdownload.current.click()\n\t}\n\n\treturn <main>\n\t\t<Ad type=\"text\" id=\"sounds\" />\n\t\t{error && <ErrorPanel error={error} onDismiss={() => setError(null)} />}\n\t\t{soundKeys.length > 0 && <>\n\t\t\t<div class=\"controls sounds-controls\">\n\t\t\t\t<div class=\"sound-search-group\">\n\t\t\t\t\t<TextInput class=\"btn btn-input sound-search\" list=\"sound-list\" placeholder={loc('sounds.search')}\n\t\t\t\t\t\tvalue={search} onChange={setSearch} onEnter={addConfig} />\n\t\t\t\t\t<Btn icon=\"plus\" tooltip={loc('sounds.add_sound')} class=\"add-sound\" onClick={addConfig} />\n\t\t\t\t</div>\n\t\t\t\t{configs.length > 1 && <Btn icon=\"play\" label={ loc('sounds.play_all')} class=\"play-all-sounds\" onClick={playAll} />}\n\t\t\t\t<div class=\"spacer\"></div>\n\t\t\t\t<Btn icon=\"download\" label={loc('download')} tooltip={loc('sounds.download_function')} class=\"download-sounds\" onClick={downloadFunction} />\n\t\t\t\t<BtnMenu icon=\"tag\" label={version}>\n\t\t\t\t\t{config.versions.reverse().map(v =>\n\t\t\t\t\t\t<Btn label={v.id} active={v.id === version} onClick={() => changeVersion(v.id as VersionId)} />\n\t\t\t\t\t)}\n\t\t\t\t</BtnMenu>\n\t\t\t</div>\n\t\t\t<div class=\"sounds\">\n\t\t\t\t{configs.map(c => <SoundConfig key={c.id} {...c} {...{ lang, assets, sounds, delayedPlay }} onEdit={editConfig(c.id)} onDelete={deleteConfig(c.id)} />)}\n\t\t\t</div>\n\t\t\t<a ref={download} style=\"display: none;\"></a>\n\t\t</>}\n\t\t<datalist id=\"sound-list\">\n\t\t\t{soundKeys.map(s => <option key={s} value={s} />)}\n\t\t</datalist>\n\t</main>\n}\n","import config from '../../config.json'\nimport { ToolCard } from '../components'\nimport { locale } from '../Locales'\nimport { cleanUrl } from '../Utils'\n\ntype WorldgenProps = {\n\tlang: string,\n\tchangeTitle: (title: string) => unknown,\n\tpath?: string,\n}\nexport function Worldgen({ lang, changeTitle }: WorldgenProps) {\n\tconst loc = locale.bind(null, lang)\n\tchangeTitle(loc('title.generator_category', loc('worldgen')))\n\treturn <main>\n\t\t<div class=\"home\">\n\t\t\t{config.generators.filter(g => g.category === 'worldgen').map(g => \n\t\t\t\t<ToolCard title={loc(g.id)} link={cleanUrl(g.url)} />\n\t\t\t)}\n\t\t</div>\n\t</main>\n}\n","import { render } from 'preact'\nimport type { RouterOnChangeArgs } from 'preact-router'\nimport { Router } from 'preact-router'\nimport { useEffect, useState } from 'preact/hooks'\nimport config from '../config.json'\nimport '../styles/global.css'\nimport '../styles/nodes.css'\nimport { Analytics } from './Analytics'\nimport { Header } from './components'\nimport { loadLocale, locale, Locales } from './Locales'\nimport { Generator, Home, Sounds, Worldgen } from './pages'\nimport type { VersionId } from './Schemas'\nimport { Store } from './Store'\nimport { cleanUrl } from './Utils'\n\nconst VERSIONS_IN_TITLE = 3\n\nfunction Main() {\n\tconst [lang, setLanguage] = useState<string>('none')\n\tconst changeLanguage = async (language: string) => {\n\t\tif (!Locales[language]) {\n\t\t\tawait loadLocale(language)\n\t\t}\n\t\tAnalytics.setLanguage(language)\n\t\tStore.setLanguage(language)\n\t\tsetLanguage(language)\n\t}\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst target = Store.getLanguage()\n\t\t\tawait Promise.all([\n\t\t\t\tloadLocale('en'),\n\t\t\t\t...(target !== 'en' ? [loadLocale(target)] : []),\n\t\t\t])\n\t\t\tsetLanguage(target)\n\t\t})()\n\t}, [])\n\n\tconst [theme, setTheme] = useState<string>(Store.getTheme())\n\tconst changeTheme = (theme: string) => {\n\t\tAnalytics.setTheme(theme)\n\t\tStore.setTheme(theme)\n\t\tsetTheme(theme)\n\t}\n\tuseEffect(() => {\n\t\tdocument.documentElement.setAttribute('data-theme', theme)\n\t}, [theme])\n\n\tconst [version, setVersion] = useState<VersionId>(Store.getVersion())\n\tconst changeVersion = (version: VersionId) => {\n\t\tAnalytics.setVersion(version)\n\t\tStore.setVersion(version)\n\t\tsetVersion(version)\n\t}\n\n\tconst [title, setTitle] = useState<string>(locale(lang, 'title.home'))\n\tconst changeTitle = (title: string, versions?: VersionId[]) => {\n\t\tversions ??= config.versions.map(v => v.id as VersionId)\n\t\tversions.splice(0, versions.length - VERSIONS_IN_TITLE)\n\t\tdocument.title = `${title} Minecraft ${versions.join(', ')}`\n\t\tsetTitle(title)\n\t}\n\n\tconst changeRoute = (e: RouterOnChangeArgs) => {\n\t\t// Needs a timeout to ensure the title is set correctly\n\t\tsetTimeout(() => Analytics.pageview(cleanUrl(e.url)))\n\t}\n\n\treturn <>\n\t\t<Header {...{lang, title, version, theme, language: lang, changeLanguage, changeTheme}} />\n\t\t<Router onChange={changeRoute}>\n\t\t\t<Home path=\"/\" {...{lang, changeTitle}} />\n\t\t\t<Worldgen path=\"/worldgen\" {...{lang, changeTitle}} />\n\t\t\t<Sounds path=\"/sounds\" {...{lang, version, changeTitle, changeVersion}} />\n\t\t\t<Generator default {...{lang, version, changeTitle, changeVersion}} />\n\t\t</Router>\n\t</>\n}\n\nrender(<Main />, document.body)\n"],"names":["Analytics","type","id","getElementById","remove","window","load","data-ea-publisher","data-ea-type","class","icon","label","active","clazz","tooltip","tooltipLoc","onClick","aria-label","Octicon","large","doSelect","value","placeholder","onChange","onInput","e","value2","target","ref","useRef","current","select","stopPropagation","size","draw","onDrag","onHover","onLeave","inputs","canvas","dragStart","dragRequest","dragPending","dragBusy","onMouseDown","offsetX","offsetY","onMouseMove","x","clientWidth","y2","clientHeight","dx","dy","requestAnimationFrame","async","dx2","dy2","onMouseUp","onMouseLeave","addEventListener","body","removeEventListener","redraw","redrawCount","ctx","getContext","s2","width","height","img","getImageData","ownCount","putImageData","setActive","useState","hider","model","invalidated","listener","[object Object]","addListener","removeListener","relative","children","useFocus","Btn","__spreadProps","Analytics2","ID_SITE","ID_GENERATOR","category","action","index","pageview","page","setLanguage","language","setTheme","theme","setVersion","version","setPreview","preview","generatorEvent","alert","xmlns","viewBox","fill-rule","d","archive","arrow_left","arrow_right","check","chevron_down","chevron_right","chevron_up","clippy","code","dash","device_desktop","download","duplicate","eye","eye_closed","gear","globe","history","info","issue_opened","kebab_horizontal","link","mark_github","moon","play","plus","plus_circle","search","sun","sync","tag","terminal","three_bars","trashcan","unfold","upload","x_circle","error","onDismiss","href","component","props","evt","fn","onKeyDown","onEnter","key","__spreadValues","displayName","name","TextInput","BaseInput","v","NumberInput","Number","RangeInput","scriptRel","seen","__vitePreload","baseModule","deps","relList","document","createElement","supports","Promise","all","map","dep","isCss","endsWith","cssSelector","querySelector","rel","as","crossOrigin","head","appendChild","res","rej","then","Locales","fallback","English","params","replace","parseInt","match","slice","resolveLocaleParams","en","langConfig","config","languages","find","lang","data","__variableDynamicImportRuntime0__","schema","schemas","__variableDynamicImportRuntime1__","default","obj","dec2hex","dec","toString","substr","length","arr","Uint8Array","crypto","getRandomValues","Array","from","join","BigInt","Math","floor","random","MAX_SAFE_INTEGER","seed","dimensions","get","Path","set","keys","forEach","url","replaceAll","trimmedUrl","generators","g2","str","h","abs","i","imul","charCodeAt","hashString","a2","b","c","max","min","lerp","Error","message","deepClone","rfdc","constructor","isArray","deepEqual","valueOf","Object","prototype","hasOwnProperty","call","VersionIds","Versions","Models","versionGetter","1.15","java15","1.16","java16","1.17","java17","1.18","java18","CachedDecorator","CachedFeature","collections","getCollections","blockStates","versionId","collectionTarget","blockStateTarget","versions","JSON","stringify","debug","dynamic","refs","filter","localStorage","getItem","r","hash","matches","cache","caches","open","promises","request","push","delete","warn","deleteMatching","startsWith","setItem","fetchRegistries","fetchBlockStateMap","fetchDynamicRegistries","fetchData","getSchemas","minVersionId","maxVersionId","findIndex","minVersion","maxVersion","removeItem","mcdataUrl","vanillaDatapackUrl","registries","checkVersion","mcdata_master","getData","data2","k","entries","register","path","values","properties","states","assign","vanilla_datapack_summary","registry","versionData","vanilla_datapack_data","fetch","json","cacheResponse","ok","fetchResponse","responseData","put","Response","cacheState","biomeSourceCache","climateSamplerCache","state","options","newState","octaves","FixedBiome","biome","shift","scale","numBiomes","biomes","_y","z","node","preset","NetherPreset18","NetherPreset","fetchPreset","generator","biome_source","OverworldPreset18","DataModel","unwrapLists","MultiNoise","fromJson","noise","config2","firstOctave","clamp","NormalNoise","Random","n","n2","sample","minDist","Infinity","minBiome","parameters","p","dist","square","altitude","temperature","humidity","weirdness","offset","getBiomeSource","settings","NoiseGeneratorSettings","noiseSampler","NoiseSampler","getClimate","bind","biomeSource","climateSampler","biomeColors","color","VanillaColors","stringToColor","minecraft:badlands","minecraft:badlands_plateau","minecraft:bamboo_jungle","minecraft:bamboo_jungle_hills","minecraft:basalt_deltas","minecraft:beach","minecraft:birch_forest","minecraft:birch_forest_hills","minecraft:cold_ocean","minecraft:crimson_forest","minecraft:dark_forest","minecraft:dark_forest_hills","minecraft:deep_cold_ocean","minecraft:deep_frozen_ocean","minecraft:deep_lukewarm_ocean","minecraft:deep_ocean","minecraft:deep_warm_ocean","minecraft:desert","minecraft:desert_hills","minecraft:desert_lakes","minecraft:end_barrens","minecraft:end_highlands","minecraft:end_midlands","minecraft:eroded_badlands","minecraft:flower_forest","minecraft:forest","minecraft:frozen_ocean","minecraft:frozen_river","minecraft:giant_spruce_taiga","minecraft:giant_spruce_taiga_hills","minecraft:giant_tree_taiga","minecraft:giant_tree_taiga_hills","minecraft:gravelly_mountains","minecraft:ice_spikes","minecraft:jungle","minecraft:jungle_edge","minecraft:jungle_hills","minecraft:lukewarm_ocean","minecraft:modified_badlands_plateau","minecraft:modified_gravelly_mountains","minecraft:modified_jungle","minecraft:modified_jungle_edge","minecraft:modified_wooded_badlands_plateau","minecraft:mountain_edge","minecraft:mountains","minecraft:mushroom_field_shore","minecraft:mushroom_fields","minecraft:nether_wastes","minecraft:ocean","minecraft:plains","minecraft:river","minecraft:savanna","minecraft:savanna_plateau","minecraft:shattered_savanna","minecraft:shattered_savanna_plateau","minecraft:small_end_islands","minecraft:snowy_beach","minecraft:snowy_mountains","minecraft:snowy_taiga","minecraft:snowy_taiga_hills","minecraft:snowy_taiga_mountains","minecraft:snowy_tundra","minecraft:soul_sand_valley","minecraft:stone_shore","minecraft:sunflower_plains","minecraft:swamp","minecraft:swamp_hills","minecraft:taiga","minecraft:taiga_hills","minecraft:taiga_mountains","minecraft:tall_birch_forest","minecraft:tall_birch_hills","minecraft:the_end","minecraft:the_void","minecraft:warm_ocean","minecraft:warped_forest","minecraft:wooded_badlands_plateau","minecraft:wooded_hills","minecraft:wooded_mountains","minecraft:snowy_slopes","minecraft:lofty_peaks","minecraft:snowcapped_peaks","minecraft:stony_peaks","minecraft:grove","minecraft:meadow","minecraft:lush_caves","minecraft:dripstone_caves","altitude_noise","amplitudes","temperature_noise","humidity_noise","weirdness_noise","continentalness","erosion","depth","terrain","featureColors","placements","features","biomeInfoNoise","PerlinNoise","fork","seaLevel","nextFloat","nextInt","sampleInt","this","fill","pos","feature","j2","base","spread","normalize","min_inclusive","max_inclusive","source","indexOf","useFeature","featureFn","Features","decorator2","decoratorFn","Decorators","decorated","getPositions","decorator","getPlacements","random_boolean_selector","feature_true","feature_false","random_selector","f","chance","simple_random_selector","count","count_extra","extra_chance","extra_count","count_multilayer","count_noise","noise_level","below_noise","above_noise","count_noise_biased","factor","noise_factor","ceil","noise_offset","noise_to_count_ratio","dark_oak_tree","_config","_","outer","flatMap","inner","depth_average","decorateY","baseline","emerald_ore","fire","glowstone","heightmap","heightmap_spread_double","heightmap_world_surface","iceberg","lava_lake","nope","range","maximum","top_offset","bottom_offset","range_biased","range_very_biased","spread_32_above","top_solid_heightmap","magma","surface_relative_threshold","water_lake","minLimitPerlinNoise","maxLimitPerlinNoise","mainPerlinNoise","depthNoise","xOffset","chunkWidth","size_horizontal","chunkHeight","size_vertical","chunkCountY","amplified","biomeDepth","biomeScale","noiseColumnCache","cx","ox","noise1","fillNoiseColumn","noise2","yy","oy","cachedColumn","xzScale","sampling","xz_scale","yScale","y_scale","xzFactor","xz_factor","yFactor","y_factor","randomDensity","random_density_offset","getRandomDensity","sampleAndClampNoise","getOctaveNoise","zo","falloff","density_factor","density_offset","top_slide","clampedLerp","bottom_slide","x2","wrap","y22","z2","minLimitNoise","maxLimitNoise","mainNoise","colors","minecraft:air","minecraft:water","minecraft:lava","minecraft:stone","minecraft:netherrack","minecraft:end_stone","generatorCache","chunkCache","bottomSlide","topSlide","shape","biomeFactor","biomeOffset","peaks","biomePeaks","nearWater","NoiseChunkGenerator","getCached","LevelSlice","minY","generator2","state2","getBlockState","getName","OldNoiseChunkGenerator","reset","row","iterateNoiseColumn","reverse","getColor","minX","filled","chunks","cached","Chunk","ChunkPos","create","Z","chunk","chunkIndex","BiomeSourcePreview","shown","setScale","focused","setFocused","refineTimeout","getOctaves","calculateState","useCanvas","oz","col","worldX","worldZ","getBiomeColor","getBiome","biomeMap","setTimeout","xx","zz","toWorld","changeScale","newScale","locale","newSeed","DecoratorPreview","setSeed","randomSeed","NoiseSettingsPreview","loc","setBiomeFactor","setBiomeOffset","setBiomePeaks","hasPeaks","worldY","min_y","BtnMenu","BtnInput","HasPreview","setCount","transformOutput","switchNode","hook","blockState","validation","validator","relativePath","includes","getActiveFields","activeFields","enabled","Store","Store2","getLanguage","getTheme","getVersion","getIndent","getSoundsVersion","setIndent","indent","setSoundsVersion","INDENT","2_spaces","4_spaces","tabs","doCopy","doDownload","doImport","copySuccess","onError","retransform","getOutput","useCallback","model2","blockStates2","ModelPath","output","clipboard","writeText","content","encodeURIComponent","setAttribute","click","changeIndent","onBlur","parse","wrapLists","spellcheck","autocorrect","style","mapper","getter","setter","silent","selectRegistries","hiddenFields","flattenedFields","inlineFields","nbtFields","fixedLists","keysModel","MapNode","StringNode","historyMax","prefix","suffix","renderHtml","some","data-category","boolean","BooleanSuffix","choices","choice","activeCase","contextPath","context","getModel","getArray","choiceContextPath","choiceContext","inject","c2","newValue","change","pathLocale","contextPush","expand","collapse","isToggled","useToggles","maxShown","setMaxShown","maxLength","ErrorPopup","modelPush","hexId","cValue","cId","cPath","canToggle","toggle","nested","Collapsed","MemoedTreeNode","actions","onSelect","splice","disabled","keyPath","keysSchema","enum","last","errors","add","ObjectNode","fromEntries","cSchema","number","NumberSuffix","getChildModelPath","isObject","isDecorated","wrapper","fields","originalFields","decorators","iterateNestedDecorators","ListNode","featurePath","decoratorsPath","ModelWrapper","path2","modelArr","equals","newDecorators","newPath","feature2","produceNestedDecorators","createDecoratorsWrapper","optional","onExpand","onCollapse","newCtx","pools","loot","child","cPrefix","cSuffix","cBody","isFlattened","isInlined","HelpPopup","string","StringSuffix","toggleState","setToggleState","Map","toggleAll","setToggleAll","ctrlKey","integer","parsed","parseFloat","padStart","getValues","isEnum","additional","context2","pool","datalistId","list","values2","memo","onContextMenu","preventDefault","a","description","navigator","prev","next","result","withModel","getAll","e2","message2","popupIcon","popup","useErrorBoundary","setState","FullNode","Themes","system","dark","light","title","changeTheme","changeLanguage","gen","getGenerator","getCurrentUrl","Link","Icons","home","route","cleanUrl","th","rx","y","report","sounds","cy","clip-rule","assets","sound","delay","pitch","volume","onEdit","onDelete","delayedPlay","loading","setLoading","playing","setPlaying","invalid","setInvalid","howls","command","soundEvent","h2","stop","soundPath","entry","getResourceUrl","howl","Howl","src","format","rate","on","completed","every","copyActive","setCopyActive","copyTimeout","step","toFixed","changeTitle","changeVersion","setError","errorBoundary","errorRetry","ErrorPanel","allowedVersions","setModel","setBlockStates","Reference","ChoiceNode","schemaName","validate","m","catch","onKeyUp","undo","redo","presetFilter","setPresetFilter","presetResults","setPresetResults","terms","trim","split","presets","t","sourceShown","setSourceShown","innerWidth","setCopy","setDownload","setImport","previewShown","setPreviewShown","hasPreview","actionsShown","Ad","loadPreset","Tree","PreviewPanel","SourcePanel","ToolCard","Manifest","VersionAssets","SoundEvents","fetchManifest","manifest","getManifest","latest","snapshot","versionMeta","assetIndex","objects","fetchAssets","getAssets","fetchSounds","setAssets","setSounds","soundKeys","assets2","getSounds","sounds2","setSearch","configs","setConfigs","addConfig","deleteConfig","setDelayedPlay","hasDelay","sort","SoundConfig","changes","loadLocale","documentElement","version2","setTitle","title2","Header","theme2","Router","Home","Worldgen","Sounds","Generator","render","Main"],"mappings":"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"}